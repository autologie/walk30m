{"version":3,"sources":["webpack:///1.app.js","webpack:///external \"window\"","webpack:///external \"jQuery\"","webpack:///external \"_\"","webpack:///./resources/js/dev/Application.js","webpack:///./resources/js/dev/CalculationService.js","webpack:///./resources/js/dev/Logger.js","webpack:///./resources/js/dev/GeoUtil.js","webpack:///./resources/js/dev/AdvancedSettingsController.js","webpack:///./resources/js/dev/ProgressBar.js","webpack:///./resources/js/dev/MapController.js","webpack:///./resources/js/dev/InputController.js","webpack:///./resources/js/dev/Calculation.js","webpack:///./resources/js/dev/Footprint.js","webpack:///./resources/js/dev/ObjectManager.js","webpack:///./resources/js/dev/ResultVisualizer.js","webpack:///./resources/js/dev/Walk30mUtils.js"],"names":["webpackJsonp","module","exports","__webpack_require__","window","jQuery","_","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","CalculationService","Logger","GeoUtil","AdvancedSettingsController","ProgressBar","MapController","InputController","Application","$el","me","this","startDate","Date","messages","$page","$","$gotoTopBtn","find","$execBtn","$cancelBtn","$sendMsgBtn","$goToAboutLink","$message","$goToAdvancedSettingsLink","calcService","logger","advancedSettingsController","css","top","Math","min","height","initEvents","get","done","data","mapController","center","google","maps","LatLng","lat","lng","inputController","progressBar","console","log","fail","err","alert","prototype","addListener","bind","onCompleteCalculation","onProgressCalculation","onWarning","click","onClickGoToAboutBtn","onClickGoToAdvancedSettingsBtn","scroll","onScroll","scrollToTop","onClickSendMsgBtn","startCalculation","viewMap","togglePanel","startView","percent","vertices","update","message","confirm","getMessage","location","reload","throttle","scrollTop","fadeIn","fadeOut","ev","preventDefault","animate","offset","undefined","val","addClass","sendMessage","then","delay","removeClass","callback","fired","blur","isFunction","ajax","type","url","contentType","JSON","stringify","href","compareGeocoderResultsByDistance","r1","r2","map","getCenter","loc1","geometry","loc2","r1Dist","pow","r2Dist","settings","defaults","getValues","origin","doCalculation","address","Geocoder","geocode","results","status","sortedResults","sort","GeocoderStatus","ZERO_RESULTS","OK","trimeGeocoderAddress","formatted_address","keyword","$location","focus","onExitCalculation","complete","stop","finalize","show","start","anglePerStep","SPEED","BALANCE","PRECISION","preference","startEditMessage","attr","code","apply","Calculation","directionsService","DirectionsService","isRunning","PI","MVCObject","calcRoute","dest","successiveRateLimitCount","config","options","task","currentTask","pick","event","trigger","toString","route","destination","travelMode","TravelMode","mode","res","DirectionsStatus","OVER_QUERY_LIMIT","calcNext","isNarrowing","tryDispatch","isPausing","dispatch","stopMonitorVelocity","timeout","clearInterval","startMonitorVelocity","initialDelay","interval","timeConsumed","setInterval","velocity","getVelocity","request","progress","added","goals","meterToLng","walkToFillSecondsAlong","sec","wayPoints","getPartial","step","ratio","len","lat_lngs","limited_length","reduce","passed","v","idx","arr","length","distance","each","pos","push","next_accum","end_flag","accum","duration","value","concat_path","concat","pause","resume","willBeCompletedWith","wayPoint","isComplete","getGoals","getAdvancedOne","p1","p2","calcAngle","response","leg","lastWayPoint","nextDest","time","divide","routes","legs","max","rotate","steps","hasVisited","endLocation","directionResult","executions","onStart","onComplete","endPoint","taskId","dataType","complete_datetime","toISOString","extra_info","collect","getArray","latLng","collectClientInfo","$win","viewport","width","start_datetime","origin_address","origin_latitude","origin_longitude","travel_mode","avoid_ferries","avoidFerries","avoid_tolls","avoidTolls","avoid_highways","avoidHighways","travel_time_sec","query","uuid","trimGeocoderAddress","raw","replace","spline","path","coords","s","points","range","samples","numeric","at","lngToMeter","R","cos","meter","modLng","sqrt","r","getInclusionBounds","delta","LatLngBounds","extend","getGravityCenter","isContained","point","crossingVertices","filter","vertex","crossPtLat","p","theta","atan","prevPoint","degree","radius","phi","sin","$prefs","$optTolls","$optHighways","$optFerries","$initializeBtn","defaultSettings","tolls","is","highways","ferries","initialize","radios","removeProp","prop","hasOwnProperty","removeAttr","append","debounce","GeoUtils","Footprint","ObjectManager","ResultVisualizer","application","mapOptions","$centerMarker","$determineBtn","$retryBtn","footprint","initMap","objectManager","resultVisualizer","Map","zoom","zoomControlOptions","position","ControlPosition","RIGHT_CENTER","streetViewControlOptions","hideMessage","showMessage","text","getMap","onExit","onClickRetryBtn","isCompleted","clearObject","hide","setMap","listeners","forEach","listener","removeListener","off","one","calcMsgTpl","template","clearResultDetail","travelModeExpr","setOptions","once","onInitialProgress","onProgress","panTo","addResult","endLocations","setAngle","drawArea","latDiff","lngDiff","abs","fitBounds","north","south","east","west","setZoom","getZoom","splined","slice","splice","round","showObject","Polygon","strokeColor","fillColor","clickable","strokeOpacity","fillOpacity","zIndex","specifyLocation","dragStartListener","addListenerOnce","initializeScroll","scrollTo","optionTpl","getLocationWatchId","$selModeList","$time","minuteArray","n","num","selected","join","defaultPlaceholder","navigator","geolocation","selMode","CURRENT","$target","target","$li","parents","onSelModeChoosed","keydown","onKeyDownSelModeListItem","onBlurSelModeListItem","toggleSelModeList","onKeydown","change","defer","$currentFocus","$items","keyCode","eq","updateLocationCombo","extractSelModeListItemData","index","$item","selector","tpl","remove","prepend","result","$choosed","GEOCODE","TEXT","MAP","appendElementToLocationInput","fix","$loc","left","outerHeight","outerWidth","isVisible","doShow","doHide","deferred","Deferred","resolve","__bgClickHandler","promise","selectLocationOnMap","loc","setLatLng","selectLocationByText","applyGeoLocationResult","__","lastGeoLocationResult","crd","latitude","longitude","selectLocationByGeoLocation","bar","$bar","initial","geoLocationWatchId","parent","watchPosition","enableHighAccuracy","maximumAge","filteredResults","contains","types","addr","selectLocationByGeocodeResult","$header","isCancellable","padding","marginTop","retVal","feature","getProperty","latVal","lngVal","consumedTime","MVCArray","getAt","getProgress","twicePI","accumulateAngles","sameLocation","some","diff","angles","angle","markerOptions","Marker","constructor","call","stepCount","timer","setIcon","createIconOption","strokeWeight","rotation","scale","anchor","Point","OM","elem","close","Error","obj","open","id","removeAt","clearObjects","taggedAs","toRemove","i","findObject","pop","cls","Walk30mUtils","defaultStyler","getStyle","twitterURITpl","routeLinkTpl","balloonTpl","summaryBalloonTpl","onClickResult","setStyle","isObject","createRouteLink","overview_path","originLat","originLng","destLat","destLng","createBalloonContent","content","end_address","summary","copyright","copyrights","showResultDetail","onClickRoute","InfoWindow","maxWidth","icon","SymbolPath","CIRCLE","Polyline","createSummary","timeUnitMinExpr","showSummaryBalloon","$balloon","getDiv","encodeURIComponent","createSharedURI","getId","setProperty","toSpline","toGeoJsonCoord","coord","addGeoJson","coordinates","properties","isResult","originAddress","timeExpr","encodeResult","diffSequence","decodeResult","str","charSeq","split","x","parseInt","y"],"mappings":"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KACA,IACA,KACA,OACA,OACA,QACA,KACA,KACA,IACA,OACA,QACA,UACA,oBACA,QACA,oBACA,IACA,UACA,oBACA,qBACA,oBACA,qBACA,oBACA,IACA,oBACA,oBACA,oBACA,OACA,oBACA,OACA,IACA,oBACA,OACA,qBACA,OACA,oBACA,OACA,IACA,oBACA,qBACA,oBACA,qBACA,oBACA,qBACA,IACA,oBACA,qBACA,UACA,qBACA,QACA,qBACA,IACA,IACA,QACA,qBACA,IACA,UACA,oBACA,qBACA,UACA,qBACA,QACA,IACA,mBACA,qBACA,oBACA,oBACA,oBACA,KACA,IACA,oBACA,SACA,qBACA,UACA,oBACA,QACA,IACA,qBACA,UACA,UACA,qBACA,QACA,oBACA,IACA,UACA,qBACA,OACA,oBACA,OACA,qBACA,IACA,qBACA,oBACA,qBACA,oBACA,qBACA,qBACA,IACA,qBACA,oBACA,qBACA,UACA,qBACA,QACA,IACA,oBACA,oBACA,oBACA,oBACA,oBACA,QACA,IACA,qBACA,qBACA,mBACA,oBACA,oBACA,qBACA,IACA,qBACA,qBACA,UACA,qBACA,QACA,qBACA,IACA,IAAAsR,KAAA,KAAAnZ,EAAAof,UAAA,OACA,IACA,OACA,qBACA,IACA,oBACA,qBACA,qBACA,qBACA,qBACA,qBACA,IACA,oBACA,oBACA,qBACA,oBACA,qBACA,OACA,IACA,qBACA,OACA,qBACA,OACA,qBACA,OACA,IACA,qBACA,OACA,qBACA,qBACA,mBACA,qBACA,IACA,oBACA,qBACA,SACA,qBACA,OACA,qBACA,IACA,SACA,qBACA,MACA,QACA,KACA,KACA,IACA,OACA,QACA,KACA,OACA,KACA,KACA,IACA,KACA,OACA,oBACA,UACA,oBACA,QACA,IACA,qBACA,qBACA,qBACA,qBACA,oBACA,QACA,IACA,qBACA,UACA,KACA,QACA,KACA,IACA,IACA,KACA,oBACA,qBACA,oBACA,OACA,MACA,IACA,SACA,QACA,oBACA,qBACA,OACA,qBACA,IACA,IACA,QACA,qBACA,IACA,UACA,qBACA,qBACA,oBACA,qBACA,qBACA,IACA,qBACA,oBACA,qBACA,qBACA,qBACA,QACA,IACA,qBACA,qBACA,qBACA,qBACA,oBACA,QACA,IACA,qBACA,UACA,qBACA,oBACA,oBACA,qBACA,IACA,qBACA,oBACA,qBACA,qBACA,OACA,qBACA,IACA,OACA,qBACA,UACA,oBACA,QACA,mBACA,IACA,UACA,qBACA,qBACA,UACA,oBACA,QACA,IACA,qBACA,UACA,oBACA,SACA,qBACA,KACA,IACA,oBACA,oBACA,qBACA,qBACA,qBACA,QACA,IACA,qBACA,UACA,UACA,oBACA,QACA,qBACA,IACA,IACAjG,KAAA,MACA,IACA,QACA,oBACA,IACA,UACA,qBACA,SACA,QACA,OACA,MACA,IACA,qBACA,oBACA,KACA,oBACA,KACA,IACA,IACA,KACA,QACA,qBACA,UACA,oBACA,QACA,IACA,qBACA,qBACA,qBACA,qBACA,oBACA,QACA,IACA,oBACA,UACA,KACA,OACA,KACA,KACA,IACA,KACA,OACA,OACA,QACA,KACA,KACA,IACA,OACA,QACA,UACA,qBACA,QACA,oBACA,IACA,UACA,qBACA,qBACA,qBACA,qBACA,oBACA,IACA,oBACA,qBACA,qBACA,OACA,oBACA,OACA,IACA,oBACA,OACA,qBACA,OACA,oBACA,OACA,IACA,oBACA,oBACA,qBACA,oBACA,oBACA,qBACA,IACA,qBACA,qBACA,UACA,qBACA,QACA,oBACA,IACA,IACA,OACA,qBACA,IACA,oBACA,oBACA,oBACA,UACA,oBACA,QACA,IACA,oBACA,qBACA,oBACA,oBACA,oBACA,KACA,IACA,oBACA,SACA,qBACA,UACA,mBACA,QACA,IACA,oBACA,UACA,SACA,qBACA,OACA,oBACA,IACA,UACA,qBACA,OACA,oBACA,OACA,qBACA,IACA,qBACA,oBACA,qBACA,oBACA,qBACA,qBACA,IACA,qBACA,oBACA,qBACA,UACA,qBACA,QA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","file":"1.app.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = window;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = jQuery;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = _;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t\t__webpack_require__(5),\n\t\t__webpack_require__(6),\n\t\t__webpack_require__(7),\n\t\t__webpack_require__(8),\n\t\t__webpack_require__(9),\n\t\t__webpack_require__(10),\n\t\t__webpack_require__(11)\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function(\n\t\tCalculationService,\n\t\tLogger,\n\t\tGeoUtil,\n\t\tAdvancedSettingsController,\n\t\tProgressBar,\n\t\tMapController,\n\t\tInputController) {\n\t\t\n\t\tfunction Application($el) {\n\t\t\tvar me = this,\n\t\t\t\tstartDate = new Date();\n\t\t\t\n\t\t\tme.messages = window.messages;\n\t\t\tme.$el = $el;\n\t\t\tme.$page = $('html,body');\n\t\t\tme.$gotoTopBtn = $el.find('.btn[role=goto-top]');\n\t\t\tme.$execBtn = $el.find('.btn[role=execute]');\n\t\t\tme.$cancelBtn = $el.find('#control span[role=cancel]');\n\t\t\tme.$sendMsgBtn = $el.find('.btn[role=send-message]');\n\t\t\tme.$goToAboutLink = $el.find('a[href=#about]');\n\t\t\tme.$message = $el.find('#message textarea');\n\t\t\tme.$goToAdvancedSettingsLink = $el.find('a[href=#advanced-settings]');\n\t\t\tme.calcService = new CalculationService();\n\t\t\tme.logger = new Logger(me.calcService);\n\t\t\tme.advancedSettingsController = new AdvancedSettingsController($el.find('#advanced-settings'));\n\t\t\n\t\t\t$el.find('#extra').css({ top: Math.min($(window).height(), 700) + 'px' });\n\t\t\tme.initEvents();\n\t\n\t\t\t$.get('https://hotsh9cqva.execute-api.ap-northeast-1.amazonaws.com/develop/client_location').done(function(data) {\n\t\t\t\tme.mapController = new MapController(me, $el.find('#map-wrapper'), {\n\t\t\t\t\tcenter: new google.maps.LatLng(data.lat, data.lng)\n\t\t\t\t});\n\t\t\t\tme.inputController = new InputController(\n\t\t\t\t\tme,\n\t\t\t\t\t$el.find('#control'),\n\t\t\t\t\tme.mapController\n\t\t\t\t);\n\t\t\t\tme.progressBar = new ProgressBar($el.find('#progressbar'));\n\t\t\t\tconsole.log('Application: initialized', new Date() - startDate);\n\t\t\t}).fail(function(err) {\n\t\t\t\twindow.alert(err);\n\t\t\t});\n\t\n\t\t}\n\t\t\n\t\tApplication.prototype.initEvents = function() {\n\t\t\tvar me = this;\n\t\n\t\t\tme.calcService.addListener('complete', _.bind(me.onCompleteCalculation, me));\n\t\t\tme.calcService.addListener('progress', _.bind(me.onProgressCalculation, me));\n\t\t\tme.calcService.addListener('warn', _.bind(me.onWarning, me));\n\t\n\t\t\tme.$goToAboutLink.click(_.bind(me.onClickGoToAboutBtn, me));\n\t\t\tme.$goToAdvancedSettingsLink.click(_.bind(me.onClickGoToAdvancedSettingsBtn, me));\n\t\t\tme.$el.scroll(_.bind(me.onScroll, me));\n\t\t\tme.$gotoTopBtn.click(_.bind(me.scrollToTop, me));\n\t\t\tme.$sendMsgBtn.click(_.bind(me.onClickSendMsgBtn, me));\n\t\t\tme.$execBtn.click(_.bind(me.startCalculation, me));\n\t\t\tme.$cancelBtn.click(_.bind(me.viewMap, me));\n\t\t\tme.scrollToTop();\n\t\t};\n\t\n\t\tApplication.prototype.viewMap = function() {\n\t\t\tvar me = this;\n\t\n\t\t\tme.inputController.togglePanel(false);\n\t\t\tme.mapController.startView(function() {\n\t\t\t\tme.inputController.togglePanel(true);\n\t\t\t});\n\t\t};\n\t\n\t\tApplication.prototype.onProgressCalculation = function(percent, vertices) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.progressBar.update(percent);\n\t\t};\n\t\n\t\tApplication.prototype.onWarning = function(message) {\n\t\t\tvar me = this;\n\t\n\t\t\tif (window.confirm(me.getMessage('askIfReload'))) {\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t};\n\t\n\t\tApplication.prototype.onCompleteCalculation = function(vertices) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.progressBar.update(100);\n\t\t};\n\t\n\t\tApplication.prototype.onScroll = _.throttle(function() {\n\t\t\tvar me = this;\n\t\n\t\t\tif (me.$el.scrollTop() > 0) {\n\t\t\t\tme.$gotoTopBtn.fadeIn();\n\t\t\t} else {\n\t\t\t\tme.$gotoTopBtn.fadeOut();\n\t\t\t}\n\t\t}, 100);\n\t\n\t\tApplication.prototype.onClickGoToAdvancedSettingsBtn = function(ev) {\n\t\t\tvar me = this;\n\t\n\t\t\tev.preventDefault();\n\t\t\tme.$page.animate({\n\t\t\t\tscrollTop: me.$el.find('#advanced-settings').offset().top + 'px'\n\t\t\t}, undefined, 'swing');\n\t\t};\n\t\n\t\tApplication.prototype.onClickGoToAboutBtn = function(ev) {\n\t\t\tvar me = this;\n\t\n\t\t\tev.preventDefault();\n\t\t\tme.$page.animate({\n\t\t\t\tscrollTop: me.$el.find('#about').offset().top + 'px'\n\t\t\t}, undefined, 'swing');\n\t\t};\n\t\n\t\tApplication.prototype.onClickSendMsgBtn = function() {\n\t\t\tvar me = this,\n\t\t\t\tmessage = me.$el.find('#message textarea').val();\n\t\n\t\t\tif (message) {\n\t\t\t\tme.$sendMsgBtn.addClass('disabled');\n\t\t\t\tme.sendMessage(message).then(function() {\n\t\t\t\t\t\t_.delay(function() {\n\t\t\t\t\t\t\tme.$sendMsgBtn.removeClass('disabled');\n\t\t\t\t\t\t}, 500);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\twindow.alert(me.getMessage('contact'));\n\t\t\t}\n\t\t};\n\t\n\t\tApplication.prototype.scrollToTop = function(callback) {\n\t\t\tvar me = this,\n\t\t\t\tfired = false;\n\t\n\t\t\tme.$gotoTopBtn.blur();\n\t\t\tme.$page.animate({ scrollTop: '0px' }, undefined, function() {\n\t\t\t\t// this event fires twice, for the fact that\n\t\t\t\t// the selector for me.$page matches two elements: html and body.\n\t\t\t\tif (!fired && _.isFunction(callback)) {\n\t\t\t\t\tfired = true;\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\n\t\tApplication.prototype.sendMessage = function(message) {\n\t\t\tvar me = this;\n\t\n\t\t\treturn $.ajax({\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: '/api/messages',\n\t\t\t\tcontentType: 'application/json; charset=utf-8',\n\t\t\t\tdata: JSON.stringify({\n\t\t\t\t\tmessage: message,\n\t\t\t\t\turl: window.location.href\n\t\t\t\t})\n\t\t\t}).done(function() {\n\t\t\t\twindow.alert(me.getMessage('thanks'));\n\t\t\t}).fail(function() {\n\t\t\t});\n\t\t};\n\t\n\t\tApplication.prototype.compareGeocoderResultsByDistance = function(r1, r2) {\n\t\t\tvar me = this,\n\t\t\t\tcenter = me.mapController.map.getCenter();\n\t\t\t\tloc1 = r1.geometry.location,\n\t\t\t\tloc2 = r2.geometry.location,\n\t\t\t\tr1Dist = Math.pow(loc1.lat() - center.lat(), 2) + Math.pow(loc1.lng() - center.lng(), 2),\n\t\t\t\tr2Dist = Math.pow(loc2.lat() - center.lat(), 2) + Math.pow(loc2.lng() - center.lng(), 2);\n\t\n\t\t\t\treturn r1Dist > r2Dist? 1: -1;\n\t\t};\n\t\n\t\tApplication.prototype.startCalculation = function() {\n\t\t\tvar me = this,\n\t\t\t\tsettings = _.defaults(\n\t\t\t\t\tme.inputController.getValues(),\n\t\t\t\t\tme.advancedSettingsController.getValues());\n\t\n\t\t\tme.scrollToTop(function() {\n\t\t\t\tif (settings.origin) {\n\t\t\t\t\tme.doCalculation(settings);\n\t\t\t\t} else if (settings.address) {\n\t\t\t\t\tnew google.maps.Geocoder().geocode({\n\t\t\t\t\t\taddress: settings.address\n\t\t\t\t\t}, function(results, status) {\n\t\t\t\t\t\tvar sortedResults = results.sort(_.bind(me.compareGeocoderResultsByDistance, me));\n\t\n\t\t\t\t\t\tif (status === google.maps.GeocoderStatus.ZERO_RESULTS) {\n\t\t\t\t\t\t\twindow.alert(me.getMessage('geocoderResultNotFound'));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else if (status !== google.maps.GeocoderStatus.OK) {\n\t\t\t\t\t\t\twindow.alert(status);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tme.doCalculation(_.defaults({\n\t\t\t\t\t\t\torigin: sortedResults[0].geometry.location,\n\t\t\t\t\t\t\taddress: GeoUtil.trimeGeocoderAddress(sortedResults[0].formatted_address),\n\t\t\t\t\t\t\tkeyword: settings.address\n\t\t\t\t\t\t}, settings));\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindow.alert(me.getMessage('originLocationIsRequired'));\n\t\t\t\t\tme.inputController.$location.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\n\t\tApplication.prototype.onExitCalculation = function(complete) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.inputController.togglePanel(true);\n\t\t\tme.calcService.stop();\n\t\t\tme.progressBar.finalize();\n\t\t\tif (complete) {\n\t\t\t\tme.$cancelBtn.show();\n\t\t\t}\n\t\t};\n\t\n\t\tApplication.prototype.doCalculation = function(settings) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.inputController.togglePanel(false);\n\t\t\tme.progressBar.update(0);\n\t\t\tme.calcService.start(_.defaults(settings, {\n\t\t\t\tanglePerStep: ({\n\t\t\t\t\tSPEED: 20,\n\t\t\t\t\tBALANCE: 10,\n\t\t\t\t\tPRECISION: 5\n\t\t\t\t})[settings.preference]\n\t\t\t}));\n\t\n\t\t\tme.mapController.startCalculation(me.calcService, _.bind(me.onExitCalculation, me));\n\t\t};\n\t\n\t\tApplication.prototype.startEditMessage = function(message) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.$message.val(message);\n\t\t\tme.$page.animate({\n\t\t\t\tscrollTop: me.$el.find('#message').offset().top + 'px'\n\t\t\t}, undefined, 'swing');\n\t\t\tme.$message.focus();\n\t\t\tif (message) {\n\t\t\t\tme.$message.attr('rows', 10);\n\t\t\t}\n\t\t};\n\t\n\t\tApplication.prototype.getMessage = function(code) {\n\t\t\tvar me = this;\n\t\n\t\t\treturn me.messages[code];\n\t\t};\n\t\n\t\treturn Application;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t\t__webpack_require__(12),\r\n\t\t__webpack_require__(7)\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function(Calculation, GeoUtil) {\r\n\t\t'use strict';\r\n\t\tvar twicePI = 2 * Math.PI;\r\n\t\r\n\t\tfunction CalculationService() {\r\n\t\t\tvar me = this;\r\n\t\t\t\r\n\t\t\tme.directionsService = new google.maps.DirectionsService();\r\n\t\t\tme.isRunning = false;\r\n\t\t}\r\n\t\r\n\t\tCalculationService.prototype = new google.maps.MVCObject();\r\n\t\r\n\t\tCalculationService.prototype.calcRoute = function(dest, callback, successiveRateLimitCount) {\r\n\t\t\tvar me = this,\r\n\t\t\t\ttask = me.currentTask,\r\n\t\t\t\tconfig, options;\r\n\t\r\n\t\t\tif (!task) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\tconfig = task.config;\r\n\t\t\toptions = _.pick(config, 'origin', 'avoidFerries', 'avoidTolls', 'avoidHighways');\r\n\t\r\n\t\t\tgoogle.maps.event.trigger(me, 'request', dest);\r\n\t\t\tconsole.log('CalculationService: do directions request', options.origin.toString(), dest.toString());\r\n\t\r\n\t\t\tme.directionsService.route(_.defaults({\r\n\t\t\t\tdestination: dest,\r\n\t\t\t\ttravelMode: google.maps.TravelMode[config.mode],\r\n\t\t\t}, options), function(res, status) {\r\n\t\r\n\t\t\t\tif (status !== google.maps.DirectionsStatus.OVER_QUERY_LIMIT) {\r\n\t\t\t\t\tcallback(res, status);\r\n\t\r\n\t\t\t\t} else if (successiveRateLimitCount < 3) {\r\n\t\t\t\t\t_.delay(function() {\r\n\t\t\t\t\t\tme.calcRoute(dest, callback, ++successiveRateLimitCount);\r\n\t\t\t\t\t}, successiveRateLimitCount * 2000);\r\n\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgoogle.maps.event.trigger(me, 'warn', 'FREQUENT_OVER_QUERY_LIMIT');\r\n\t\t\t\t\tme.calcRoute(dest, callback, 0);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\r\n\t\tCalculationService.prototype.calcNext = function(dest, isNarrowing) {\r\n\t\t\tvar me = this;\r\n\t\r\n\t\t\tfunction tryDispatch(res, status) {\r\n\t\t\t\tif (me.isPausing) {\r\n\t\t\t\t\t_.delay(function() { tryDispatch(res, status); }, 100);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tme.dispatch(res, status, {\r\n\t\t\t\t\t\tdestination: dest,\r\n\t\t\t\t\t\tisNarrowing: isNarrowing\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tme.calcRoute(dest, function(res, status) {\r\n\t\t\t\tif (me.isRunning) {\r\n\t\t\t\t\ttryDispatch(res, status);\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t};\r\n\t\r\n\t\tCalculationService.prototype.stopMonitorVelocity= function(task) {\r\n\t\t\tif (task.timeout) {\r\n\t\t\t\twindow.clearInterval(task.timeout);\r\n\t\t\t\tdelete task.timeout;\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\tCalculationService.prototype.startMonitorVelocity= function(task, initialDelay, interval) {\r\n\t\t\tvar me = this;\r\n\t\r\n\t\t\tif (task.timeout) {\r\n\t\t\t\tconsole.log('CalculationService: already monitoring', task);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\ttask.timeConsumed = 0;\r\n\t\t\t_.delay(function() {\r\n\t\t\t\ttask.timeout = window.setInterval(function() {\r\n\t\t\t\t\tif (!me.isRunning) {\r\n\t\t\t\t\t\tme.stopMonitorVelocity(task);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar velocity = task.getVelocity();\r\n\t\r\n\t\t\t\t\tconsole.log('CalculationService: current velocity: ', velocity);\r\n\t\r\n\t\t\t\t\tif (velocity < 1) {\r\n\t\t\t\t\t\tgoogle.maps.event.trigger(me, 'warn', 'CALCULATION_IS_GETTING_SLOWER');\r\n\t\t\t\t\t}\r\n\t\t\t\t}, interval);\r\n\t\t\t}, initialDelay);\r\n\t\t};\r\n\t\r\n\t\tCalculationService.prototype.start = function(request) {\r\n\t\t\tvar me = this,\r\n\t\t\t\ttask = new Calculation(request),\r\n\t\t\t\torigin = request.origin;\r\n\t\r\n\t\t\ttask.addListener('progress', function(progress, added, goals) {\r\n\t\t\t\tgoogle.maps.event.trigger(me, 'progress', progress, added, goals);\r\n\t\t\t});\r\n\t\r\n\t\t\tme.startMonitorVelocity(task, 5000, 1000);\r\n\t\r\n\t\t\tme.currentTask = task;\r\n\t\t\tme.isPausing = false;\r\n\t\t\tme.isRunning = true;\r\n\t\t\tme.calcNext(new google.maps.LatLng(\r\n\t\t\t\torigin.lat(),\r\n\t\t\t\torigin.lng() + GeoUtil.meterToLng(100, origin.lat())\r\n\t\t\t));\r\n\t\r\n\t\t\tgoogle.maps.event.trigger(me, 'start', task);\r\n\t\t\treturn task;\r\n\t\t};\r\n\t\r\n\t\tCalculationService.prototype.walkToFillSecondsAlong = function(sec, wayPoints) {\r\n\t\r\n\t\t\tfunction getPartial(step, ratio) {\r\n\t\t\t\tvar len = 0, lat_lngs = [],\r\n\t\t\t\t\tlimited_length = _.reduce(step.lat_lngs, function(passed, v, idx, arr) {\r\n\t\t\t\t\t\treturn idx === arr.length - 1? passed: passed + GeoUtil.distance(v, arr[idx + 1]);\r\n\t\t\t\t\t}, 0) * ratio;\r\n\t\t\t\t\r\n\t\t\t\t_.each(step.lat_lngs, function(pos, idx, arr) {\r\n\t\t\t\t\tif (idx === 0 || (len += GeoUtil.distance(pos, arr[idx - 1])) <= limited_length) {\r\n\t\t\t\t\t\tlat_lngs.push(pos);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn lat_lngs;\r\n\t\t\t}\r\n\t\r\n\t\t\treturn _.reduce(wayPoints, function(passed, step) {\r\n\t\t\t\tvar next_accum;\r\n\t\t\t\t\r\n\t\t\t\tif (passed && passed.end_flag) {\r\n\t\t\t\t\treturn passed;\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnext_accum = (passed? passed.accum: 0) + step.duration.value;\r\n\t\t\t\t\tif (next_accum > sec) {\r\n\t\t\t\t\t\tstep.lat_lngs = getPartial(step, 1 - (next_accum - sec) / step.duration.value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tstep.accum = next_accum;\r\n\t\t\t\t\tstep.end_flag = next_accum > sec;\r\n\t\t\t\t\tstep.concat_path = ((passed && passed.concat_path) || []).concat(step.lat_lngs);\r\n\t\t\t\t\treturn step;\r\n\t\t\t\t}\r\n\t\t\t}, null);\r\n\t\t};\r\n\t\r\n\t\tCalculationService.prototype.stop = function() {\r\n\t\t\tvar me = this;\r\n\t\t\t\r\n\t\t\tme.isRunning = false;\r\n\t\t\tme.stopMonitorVelocity(me.currentTask);\r\n\t\t\tdelete me.currentTask;\r\n\t\t};\r\n\t\r\n\t\tCalculationService.prototype.pause = function() { this.isPausing = true; };\r\n\t\r\n\t\tCalculationService.prototype.resume = function() { this.isPausing = false; };\r\n\t\r\n\t\tCalculationService.prototype.willBeCompletedWith = function(wayPoint) {\r\n\t\t\tvar me = this;\r\n\t\t\t\r\n\t\t\treturn me.currentTask.isComplete(me.currentTask.getGoals().concat(wayPoint));\r\n\t\t};\r\n\t\r\n\t\tCalculationService.prototype.getAdvancedOne = function(task, p1, p2) {\r\n\t\t\tvar origin = task.config.origin;\r\n\t\r\n\t\t\treturn GeoUtil.calcAngle(origin, p1) <= GeoUtil.calcAngle(origin, p2)\r\n\t\t\t\t? p2\r\n\t\t\t\t: p1;\r\n\t\t};\r\n\t\r\n\t\tCalculationService.prototype.dispatch = function(response, status, request) {\r\n\t\t\tvar leg, lastWayPoint, step,\r\n\t\t\t\tme = this,\r\n\t\t\t\tdest = request.destination,\r\n\t\t\t\ttask = me.currentTask,\r\n\t\t\t\tsec = task.config.time,\r\n\t\t\t\tcenter = task.config.origin,\r\n\t\t\t\tanglePerStep = task.config.anglePerStep,\r\n\t\t\t\tnextDest, sameLocation, rotateBase;\r\n\t\t\t\r\n\t\t\tif (status === google.maps.DirectionsStatus.ZERO_RESULTS) {\r\n\t\t\t\tnextDest = GeoUtil.divide(center, dest, 0.8);\r\n\t\t\t\tme.calcNext(nextDest, true);\r\n\t\t\t\r\n\t\t\t} else if (status !== google.maps.DirectionsStatus.OK) {\r\n\t\t\t\tgoogle.maps.event.trigger(me, 'error', status);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tleg = response.routes[0].legs[0];\r\n\t\t\t\t\r\n\t\t\t\tif (leg.duration.value > sec * 1.2) {\r\n\t\t\t\t\tnextDest = GeoUtil.divide(center, dest, 0.8);\r\n\t\t\t\t\tme.calcNext(nextDest, true);\r\n\t\t\t\r\n\t\t\t\t} else if (!request.isNarrowing && leg.duration.value < sec) {\r\n\t\t\t\t\tnextDest = GeoUtil.divide(center, dest, Math.max(1.1, sec / leg.duration.value));\r\n\t\r\n\t\t\t\t\tif (me.getAdvancedOne(task, dest, nextDest) === dest) {\r\n\t\t\t\t\t\tnextDest = GeoUtil.rotate(center, nextDest, anglePerStep);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tme.calcNext(nextDest);\r\n\t\t\t\t\t\r\n\t\t\t\t} else if (step = me.walkToFillSecondsAlong(sec, leg.steps)) {\r\n\t\t\t\t\tlastWayPoint = step.lat_lngs[step.lat_lngs.length - 1];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (task.hasVisited(lastWayPoint)) {\r\n\t\t\t\t\t\tnextDest = GeoUtil.divide(center, GeoUtil.rotate(center, dest, 3), 0.8);\r\n\t\t\t\t\t\tme.calcNext(nextDest, true);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else if (me.willBeCompletedWith(lastWayPoint)) {\r\n\t\t\t\t\t\tme.isRunning = false;\r\n\t\t\t\t\t\tgoogle.maps.event.trigger(me, 'complete', task.vertices, task);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttask.vertices.push({\r\n\t\t\t\t\t\t\tendLocation: lastWayPoint,\r\n\t\t\t\t\t\t\tstep: step,\r\n\t\t\t\t\t\t\tdirectionResult: response\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tnextDest = GeoUtil.rotate(center, me.getAdvancedOne(task, lastWayPoint, dest), anglePerStep);\r\n\t\t\t\t\t\tme.calcNext(nextDest);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgoogle.maps.event.trigger(me, 'error');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\treturn CalculationService;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t\tvar endPoint = 'https://hotsh9cqva.execute-api.ap-northeast-1.amazonaws.com/develop/execution_log/';\n\t\n\t\tfunction Logger(calcService) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.calcService = calcService;\n\t\t\tme.executions = {};\n\t\n\t\t\tcalcService.addListener('start', _.bind(me.onStart, me));\n\t\t\tcalcService.addListener('complete', _.bind(me.onComplete, me));\n\t\t}\n\t\n\t\tLogger.prototype.onComplete = function(vertices, task) {\n\t\t\tvar me = this,\n\t\t\t\ttaskId = task.taskId;\n\t\n\t\t\t$.ajax({\n\t\t\t\turl: endPoint + taskId,\n\t\t\t\ttype: 'PUT',\n\t\t\t\tdataType: 'json',\n\t\t\t\tcontentType: 'application/json; charset=utf-8',\n\t\t\t\tdata: JSON.stringify(_.defaults({\n\t\t\t\t\tcomplete_datetime: new Date().toISOString(),\n\t\t\t\t\textra_info: _.map(_.collect(vertices.getArray(), 'endLocation'), function(latLng) {\n\t\t\t\t\t\treturn { lat: latLng.lat(), lng: latLng.lng() };\n\t\t\t\t\t})\n\t\t\t\t}, me.executions[taskId]))\n\t\t\t})\n\t\t};\n\t\n\t\tLogger.prototype.collectClientInfo = function() {\n\t\t\tvar $win = $(window);\n\t\n\t\t\treturn {\n\t\t\t\turl: window.location.href,\n\t\t\t\tviewport: [ $win.width(), $win.height() ]\n\t\t\t};\n\t\t};\n\t\n\t\tLogger.prototype.onStart = function(task) {\n\t\t\tvar me = this,\n\t\t\t\trequest = task.config,\n\t\t\t\tcenter = request.origin,\n\t\t\t\tdata = _.defaults({\n\t\t\t\t\tstart_datetime: new Date().toISOString(),\n\t\t\t\t\torigin_address: task.address,\n\t\t\t\t\torigin_latitude: center.lat(),\n\t\t\t\t\torigin_longitude: center.lng(),\n\t\t\t\t\ttravel_mode: task.mode,\n\t\t\t\t\tavoid_ferries: request.avoidFerries? 1: 0,\n\t\t\t\t\tavoid_tolls: request.avoidTolls? 1: 0,\n\t\t\t\t\tavoid_highways: request.avoidHighways? 1: 0,\n\t\t\t\t\ttravel_time_sec: task.time,\n\t\t\t\t\tquery: request.keyword\n\t\t\t\t}, me.collectClientInfo());\n\t\n\t\t\t$.ajax({\n\t\t\t\turl: endPoint,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\tcontentType: 'application/json; charset=utf-8',\n\t\t\t\tdata: JSON.stringify(data)\n\t\t\t}).done(function(res) {\n\t\t\t\tme.executions[res.uuid] = _.defaults({\n\t\t\t\t\tuuid: res.uuid\n\t\t\t\t}, data);\n\t\n\t\t\t\ttask.taskId = res.uuid;\n\t\t\t});\n\t\t};\n\t\n\t\treturn Logger;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\r\n\t\t'use strict';\r\n\t\r\n\t\tvar GeoUtil = {};\r\n\t\r\n\t\tGeoUtil.trimGeocoderAddress = function(raw) {\r\n\t\t\treturn raw.replace(/^[^]*[\\d\\-\\s]+/, '');\r\n\t\t};\r\n\t\r\n\t\tGeoUtil.spline = function(path) {\r\n\t\t\tvar coords = _.map(path.concat(path[0]), function(s) {\r\n\t\t\t\treturn [ s.lat(), s.lng() ];\r\n\t\t\t}),\r\n\t\t\tpoints = _.range(0, path.length),\r\n\t\t\tsamples = _.range(0, path.length, 0.1);\r\n\t\t\t\r\n\t\t\treturn _.map(numeric.spline(points, coords).at(samples), function(s) {\r\n\t\t\t\treturn new google.maps.LatLng(s[0], s[1]);\r\n\t\t\t});\r\n\t\t};\r\n\t\r\n\t\tGeoUtil.lngToMeter = function(lng, lat) {\r\n\t\t\tvar R = 40000; // \r\n\t\t\treturn R * 1000 * Math.cos(2 * Math.PI * lat / 360) * lng / 360;\r\n\t\t};\r\n\t\r\n\t\tGeoUtil.meterToLng = function(meter, lat) {\r\n\t\t\tvar R = 40000; // \r\n\t\t\treturn meter * 360 / (R * 1000 * Math.cos(2 * Math.PI * lat / 360));\r\n\t\t};\r\n\t\r\n\t\tGeoUtil.distance = function(p1, p2) {\r\n\t\t\tvar modLng = Math.cos(2 * Math.PI * p1.lat() / 360);\r\n\t\t\t\r\n\t\t\treturn Math.sqrt(Math.pow(p1.lat() - p2.lat(), 2) + Math.pow((p1.lng() - p2.lng()) * modLng, 2));\r\n\t\t};\r\n\t\r\n\t\tGeoUtil.divide = function(p1, p2, r) {\r\n\t\t\treturn new google.maps.LatLng(\r\n\t\t\t\tp1.lat() + (p2.lat() - p1.lat()) * r,\r\n\t\t\t\tp1.lng() + (p2.lng() - p1.lng()) * r\r\n\t\t\t);\r\n\t\t};\r\n\t\r\n\t\tGeoUtil.getInclusionBounds = function(path) {\r\n\t\t\tvar delta = 0.00001;\r\n\t\t\t\r\n\t\t\treturn _.reduce(path, function(passed, pos) {\r\n\t\t\t\tif (passed === null) {\r\n\t\t\t\t\treturn new google.maps.LatLngBounds(\r\n\t\t\t\t\t\tpos,\r\n\t\t\t\t\t\tnew google.maps.LatLng(pos.lat() + delta, pos.lng() + delta)\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn passed.extend(pos);\r\n\t\t\t\t}\r\n\t\t\t}, null);\r\n\t\t};\r\n\t\r\n\t\tGeoUtil.getGravityCenter = function(path) {\r\n\t\t\tvar len = path.length;\r\n\t\t\t\r\n\t\t\treturn new google.maps.LatLng(\r\n\t\t\t\t_.reduce(path, function(passed, val) { return passed + val.lat(); }, 0) / len,\r\n\t\t\t\t_.reduce(path, function(passed, val) { return passed + val.lng(); }, 0) / len\r\n\t\t\t);\r\n\t\t};\r\n\t\r\n\t\tGeoUtil.isContained = function(point, path) {\r\n\t\t\tvar vertices = _.map(path, function(pos, idx) {\r\n\t\t\t\t\treturn [ pos, path[(idx + 1) % path.length] ];\r\n\t\t\t\t}),\r\n\t\t\t\tcrossingVertices = _.filter(vertices, function(vertex) {\r\n\t\t\t\t\tvar r = (vertex[0].lng() - point.lng()) / (vertex[0].lng() - vertex[1].lng()),\r\n\t\t\t\t\t\tcrossPtLat = r * vertex[1].lat() + (1 - r) * vertex[0].lat();\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn crossPtLat >= point.lat()\r\n\t\t\t\t\t\t&& (vertex[0].lng() - point.lng()) * (vertex[1].lng() - point.lng()) <= 0;\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t\treturn crossingVertices.length % 2 === 1;\r\n\t\t};\r\n\t\r\n\t\t/*\r\n\t\tpath=[\r\n\t\t\tnew google.maps.LatLng(1,1),\r\n\t\t\tnew google.maps.LatLng(2,4),\r\n\t\t\tnew google.maps.LatLng(4,1),\r\n\t\t\tnew google.maps.LatLng(2,0)\r\n\t\t]\r\n\t\t*/\r\n\t\r\n\t\tGeoUtil.calcAngle = function(origin, p) {\r\n\t\t\tvar modLng = Math.cos(2 * Math.PI * origin.lat() / 360),\r\n\t\t\t\ttheta = Math.atan((p.lat() - origin.lat()) / ((p.lng() - origin.lng()) * modLng));\r\n\t\t\t\r\n\t\t\tif (p.lat() - origin.lat() > 0 && theta < 0) { theta += Math.PI; }\r\n\t\t\tif (p.lat() - origin.lat() < 0 && p.lng() - origin.lng() < 0) { theta += Math.PI; }\r\n\t\t\tif (p.lat() - origin.lat() < 0 && p.lng() - origin.lng() >= 0) { theta += 2 * Math.PI; }\r\n\t\t\t\r\n\t\t\treturn theta;\r\n\t\t};\r\n\t\r\n\t\tGeoUtil.rotate = function(center, prevPoint, degree) {\r\n\t\t\tvar radius = GeoUtil.distance(center, prevPoint),\r\n\t\t\t\tmodLng = Math.cos(2 * Math.PI * center.lat() / 360),\r\n\t\t\t\tphi = GeoUtil.calcAngle(center, prevPoint) + degree * 2 * Math.PI / 360;\r\n\t\t\t\r\n\t\t\treturn new google.maps.LatLng(\r\n\t\t\t\tcenter.lat() + radius * Math.sin(phi),\r\n\t\t\t\tcenter.lng() + radius * Math.cos(phi) / modLng\r\n\t\t\t);\r\n\t\t};\r\n\t\r\n\t\treturn GeoUtil;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t\tfunction AdvancedSettingsController($el) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.$el = $el;\n\t\t\tme.$prefs = $el.find('input[name=preference]');\n\t\t\tme.$optTolls = $el.find('#option_tolls');\n\t\t\tme.$optHighways = $el.find('#option_highways');\n\t\t\tme.$optFerries = $el.find('#option_ferries');\n\t\t\tme.$initializeBtn = $el.find('.btn[role=initialize]');\n\t\t\tme.defaultSettings = {\n\t\t\t\tpreference: me.$prefs.filter(':checked').val(),\n\t\t\t\ttolls: me.$optTolls.is(':checked'),\n\t\t\t\thighways: me.$optHighways.is(':checked'),\n\t\t\t\tferries: me.$optFerries.is(':checked')\n\t\t\t};\n\t\n\t\t\tme.$initializeBtn.click(_.bind(me.initialize, me));\n\t\t}\n\t\n\t\tAdvancedSettingsController.prototype.initialize = function() {\n\t\t\tvar me = this,\n\t\t\t\tradios = {\n\t\t\t\t\t'$optTolls': me.defaultSettings.tolls,\n\t\t\t\t\t'$optHighways': me.defaultSettings.highways,\n\t\t\t\t\t'$optFerries': me.defaultSettings.ferries\n\t\t\t\t};\n\t\n\t\t\tme.$prefs.removeProp('checked');\n\t\t\tme.$prefs.filter('[value=' + me.defaultSettings.preference + ']').prop('checked', 'checked');\n\t\t\tfor (p in radios) {\n\t\t\t\tif (radios.hasOwnProperty(p)) {\n\t\t\t\t\tif (radios[p]) {\n\t\t\t\t\t\tme[p].prop('checked', 'checked');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tme[p].removeAttr('checked');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\n\t\tAdvancedSettingsController.prototype.getValues = function() {\n\t\t\tvar me = this;\n\t\n\t\t\treturn {\n\t\t\t\tavoidFerries: !me.$optFerries.is(':checked'),\n\t\t\t\tavoidHighways: !me.$optHighways.is(':checked'),\n\t\t\t\tavoidTolls: !me.$optTolls.is(':checked'),\n\t\t\t\tpreference: me.$prefs.filter(':checked').val()\n\t\t\t};\n\t\t};\n\t\n\t\treturn AdvancedSettingsController;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t\tfunction ProgressBar($el) {\n\t\t\tthis.$el = $el;\n\t\t\t$el.append('<div class=\"progress\"><div class=\"inner\"></div></div>');\n\t\t}\n\t\n\t\tProgressBar.prototype.finalize = _.debounce(function() {\n\t\t\tvar me = this;\n\t\n\t\t\tme.$el.fadeOut(undefined, function() {\n\t\t\t\tme.$el.find('.progress').css({ width: 0 });\n\t\t\t});\n\t\t}, 1000);\n\t\n\t\tProgressBar.prototype.update = _.throttle(function(percent) {\n\t\t\tvar $el = this.$el,\n\t\t\t\tme = this;\n\t\n\t\t\tif ($el.is(':visible')) {\n\t\t\t\t$el.find('.progress').animate({ width: percent + '%' }, 1000, function() {\n\t\t\t\t\tif (percent === 100) {\n\t\t\t\t\t\tme.finalize();\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t$el.fadeIn(undefined, function() { me.update(percent); });\n\t\t\t}\n\t\t}, 1000);\n\t\n\t\treturn ProgressBar;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t\t__webpack_require__(7),\n\t\t__webpack_require__(13),\n\t\t__webpack_require__(14),\n\t\t__webpack_require__(15)\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function(GeoUtils, Footprint, ObjectManager, ResultVisualizer) {\n\t\n\t\tfunction MapController(application, $el, mapOptions) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.$el = $el;\n\t\t\tme.application = application;\n\t\t\tme.$centerMarker = $el.find('.center-marker');\n\t\t\tme.$message = $el.find('.message');\n\t\t\tme.$determineBtn = $el.find('.btn[role=determine-location]');\n\t\t\tme.$retryBtn = $el.find('.btn[role=retry]');\n\t\t\tme.$cancelBtn = $el.find('.btn[role=cancel]');\n\t\t\tme.footprint = new Footprint();\n\t\t\tme.map = me.initMap(mapOptions);\n\t\t\tme.objectManager = new ObjectManager(me.map);\n\t\t\tme.resultVisualizer= new ResultVisualizer(application, me.map, me.objectManager);\n\t\t}\n\t\n\t\tMapController.prototype.initMap = function(options) {\n\t\t\treturn new google.maps.Map(this.$el.find('#map-canvas').get(0), _.defaults(options || {}, {\n\t\t\t\tcenter: new google.maps.LatLng(36, 140),\n\t\t\t\tzoom: 13,\n\t\t\t\tzoomControlOptions: {\n\t\t\t\t\tposition: google.maps.ControlPosition.RIGHT_CENTER\n\t\t\t\t},\n\t\t\t\tstreetViewControlOptions: {\n\t\t\t\t\tposition: google.maps.ControlPosition.RIGHT_CENTER\n\t\t\t\t}\n\t\t\t}));\n\t\t};\n\t\t\n\t\tMapController.prototype.hideMessage = function(message) {\n\t\t\tthis.$message.fadeOut();\n\t\t};\n\t\t\n\t\tMapController.prototype.showMessage = function(message) {\n\t\t\tthis.$message.text(message).fadeIn();\n\t\t};\n\t\n\t\tMapController.prototype.getMap = function() { return this.map; };\n\t\n\t\tMapController.prototype.startCalculation = function(calcService, onExit) {\n\t\t\tvar me = this,\n\t\t\t\tcalcMsgTpl = _.template(me.application.getMessage('searching')),\n\t\t\t\trequest = calcService.currentTask.config,\n\t\t\t\tlisteners = [];\n\t\n\t\t\tfunction onClickRetryBtn() {\n\t\t\t\tvar isCompleted = !calcService.isRunning;\n\t\n\t\t\t\tif (isCompleted || window.confirm(me.application.getMessage('askIfAbort'))) {\n\t\t\t\t\tme.objectManager.clearObject('inProgress');\n\t\t\t\t\tme.$retryBtn.hide();\n\t\t\t\t\tme.hideMessage();\n\t\t\t\t\tme.footprint.setMap(null);\n\t\t\t\t\tlisteners.forEach(function(listener) {\n\t\t\t\t\t\tgoogle.maps.event.removeListener(listener);\n\t\t\t\t\t});\n\t\t\t\t\tonExit(isCompleted);\n\t\t\t\t} else {\n\t\t\t\t\tme.$retryBtn.off().one('click', onClickRetryBtn);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tme.resultVisualizer.clearResultDetail();\n\t\t\tme.showMessage(calcMsgTpl(_.defaults({\n\t\t\t\tmin: request.time / 60,\n\t\t\t\ttravelModeExpr: me.application.getMessage('travelModes')[request.mode]\n\t\t\t}, request)));\n\t\t\tme.$retryBtn.show();\n\t\t\tme.$retryBtn.off().one('click', onClickRetryBtn);\n\t\n\t\t\tme.footprint.setOptions({ position: request.origin });\n\t\t\tme.footprint.setMap(me.map);\n\t\n\t\t\tlisteners.push(calcService.addListener('progress', _.once(_.bind(me.onInitialProgress, me, calcService))));\n\t\t\tlisteners.push(calcService.addListener('progress', _.bind(me.onProgress, me, calcService)));\n\t\t\tlisteners.push(calcService.addListener('complete', _.bind(me.onComplete, me, calcService)));\n\t\n\t\t\tme.map.panTo(request.origin);\n\t\t};\n\t\n\t\tMapController.prototype.onComplete = function(calcService, vertices, task) {\n\t\t\tvar me = this;\n\t\t\t\n\t\t\tme.objectManager.clearObject('inProgress');\n\t\t\tme.resultVisualizer.addResult({\n\t\t\t\ttaskId: task.taskId,\n\t\t\t\toptions: task.config,\n\t\t\t\tvertices: vertices.getArray()\n\t\t\t});\n\t\t\tme.footprint.stop();\n\t\t\tme.showMessage(me.application.getMessage('completed'));\n\t\t\t_.delay(function() {\n\t\t\t\tme.hideMessage();\n\t\t\t\tme.footprint.setMap(null);\n\t\t\t}, 2000);\n\t\t};\n\t\n\t\tMapController.prototype.onProgress = function(calcService, percent, added, endLocations) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.footprint.setAngle(90 - percent * 360 / 100);\n\t\t\tme.drawArea(endLocations);\n\t\t};\n\t\n\t\tMapController.prototype.onInitialProgress = function(calcService, percent, added, endLocations) {\n\t\t\tvar me = this,\n\t\t\t\tcenter = calcService.currentTask.config.origin,\n\t\t\t\tlatDiff, lngDiff;\n\t\n\t\t\tlatDiff = Math.abs(center.lat() - added.endLocation.lat());\n\t\t\tlngDiff = Math.abs(center.lng() - added.endLocation.lng());\n\t\t\tme.map.fitBounds({\n\t\t\t\tnorth: center.lat() + latDiff,\n\t\t\t\tsouth: center.lat() - latDiff,\n\t\t\t\teast: center.lng() + lngDiff,\n\t\t\t\twest: center.lng() - lngDiff\n\t\t\t});\n\t\t\tme.map.setZoom(me.map.getZoom() - 1);\n\t\t};\n\t\n\t\tMapController.prototype.drawArea = function(vertices) {\n\t\t\tvar me = this,\n\t\t\t\tsplined = GeoUtils.spline(vertices.concat(vertices.slice(0).splice(0, Math.round(vertices.length / 2))));\n\t\t\t\t\n\t\t\tme.objectManager.showObject(new google.maps.Polygon({\n\t\t\t\tpath: splined.splice(0, Math.round(splined.length * 2 / 3) - 2),\n\t\t\t\tstrokeColor: '#080',\n\t\t\t\tfillColor: '#080',\n\t\t\t\tclickable: false,\n\t\t\t\tstrokeOpacity: 0.7,\n\t\t\t\tfillOpacity: 0.3,\n\t\t\t\tzIndex: 100\n\t\t\t}), null, 'inProgress');\n\t\t};\n\t\n\t\tMapController.prototype.startView = function(callback) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.$retryBtn.show();\n\t\t\tme.$retryBtn.off().one('click', function() {\n\t\t\t\tme.$retryBtn.hide();\n\t\t\t\tcallback();\n\t\t\t});\n\t\t};\n\t\n\t\tMapController.prototype.specifyLocation = function(callback) {\n\t\t\tvar me = this,\n\t\t\t\tdragStartListener;\n\t\n\t\t\tfunction hideMessage() {\n\t\t\t\tme.hideMessage();\n\t\t\t}\n\t\n\t\t\tfunction finalize(latLng) {\n\t\t\t\tme.$centerMarker.hide();\n\t\t\t\tme.$determineBtn.hide();\n\t\t\t\tme.$cancelBtn.hide();\n\t\t\t\tgoogle.maps.event.removeListener(dragStartListener);\n\t\t\t\thideMessage();\n\t\t\t\tcallback(latLng);\n\t\t\t}\n\t\n\t\t\tme.$centerMarker.show();\n\t\t\tme.$determineBtn.show();\n\t\t\tme.$cancelBtn.show();\n\t\t\tme.showMessage(me.application.getMessage('dragMapToSpecifyLocation'));\n\t\n\t\t\tdragStartListener = google.maps.event.addListenerOnce(me.map, 'dragstart', hideMessage);\n\t\n\t\t\tme.$cancelBtn.off().one('click', function() {\n\t\t\t\tfinalize();\n\t\t\t});\n\t\t\tme.$determineBtn.off().one('click', function() {\n\t\t\t\tfinalize(me.map.getCenter());\n\t\t\t});\n\t\t};\n\t\n\t\treturn MapController;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t\t__webpack_require__(7),\n\t\t__webpack_require__(9)\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function(GeoUtil, ProgressBar) {\n\t\tvar minuteArray = _.range(1, 61).concat(_.map(_.range(1, 19), function(n) {\n\t\t\treturn 60 + n * 10;\n\t\t})).concat(_.map(_.range(1, 7), function(n) {\n\t\t\treturn 240 + n * 60;\n\t\t}));\n\t\t\n\t\tfunction initializeScroll() {\n\t\t\t// correct unnecessary scroll offset caused by software keyboard of iPhone.\n\t\t\twindow.scrollTo(0, 0);\n\t\t}\n\t\n\t\tfunction InputController(application, $el, mapController) {\n\t\t\tvar me = this;\n\t\t\tvar optionTpl = _.template('<option value=\"{{num}}\" {{selected}}>{{num}}</option>');\n\t\n\t\t\tme.mapController = mapController;\n\t\t\tme.application = application;\n\t\t\tme.getLocationWatchId = null;\n\t\n\t\t\tme.$el = $el;\n\t\t\tme.$selModeList = $el.find('.select');\n\t\t\tme.$location = $el.find('input[name=location]');\n\t\t\tme.$time = $el.find('[name=travelTime]');\n\t\t\tme.$execBtn = $el.find('.btn[role=execute]');\n\t\t\tme.$cancelBtn = $el.find('.glyphicon[role=cancel]');\n\t\t\tme.$time.append(_.map(minuteArray, function(n) {\n\t\t\t\treturn optionTpl({ num: n, selected: n === 30? 'selected': '' });\n\t\t\t}).join(''));\n\t\n\t\t\tme.defaultPlaceholder = me.$location.attr('placeholder');\n\t\n\t\t\tif (!window.navigator.geolocation) {\n\t\t\t\tme.$selModeList.find('[data-selmode=' + me.selMode.CURRENT + ']').addClass('disabled');\n\t\t\t}\n\t\n\t\t\tme.initEvents();\n\t\t}\n\t\n\t\tInputController.prototype.initEvents = function() {\n\t\t\tvar me = this;\n\t\n\t\t\tme.$selModeList.find('li[data-selmode]:not(.disabled)').click(function(ev) {\n\t\t\t\tvar $target = $(ev.target),\n\t\t\t\t\t$li = $target.is('li')\n\t\t\t\t\t\t? $target\n\t\t\t\t\t\t: $target.parents('li');\n\t\n\t\t\t\tme.onSelModeChoosed($li.attr('data-selmode'));\n\t\t\t}).keydown(_.bind(me.onKeyDownSelModeListItem, me))\n\t\t\t\t.blur(_.bind(me.onBlurSelModeListItem, me));\n\t\n\t\t\tme.$location.focus(function() {\n\t\t\t\tme.toggleSelModeList(true);\n\t\t\t});\n\t\t\tme.$location.blur(_.bind(me.onBlurSelModeListItem, me));\n\t\t\tme.$location.keydown(_.bind(me.onKeydown, me));\n\t\t\tme.$location.change(function() {\n\t\t\t\tme.$location.removeAttr('data-latitude');\n\t\t\t\tme.$location.removeAttr('data-longitude');\n\t\t\t});\n\t\t\tme.$time.blur(initializeScroll);\n\t\t};\n\t\t\n\t\tInputController.prototype.onBlurSelModeListItem= function() {\n\t\t\tvar me = this;\n\t\n\t\t\t_.defer(function() {\n\t\t\t\tinitializeScroll();\n\t\t\t\tif (!me.$el.find(':focus').is('li')) {\n\t\t\t\t\tme.toggleSelModeList(false);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\n\t\tInputController.prototype.onKeydown = function(ev) {\n\t\t\tvar me = this,\n\t\t\t\t$currentFocus,\n\t\t\t\t$items;\n\t\n\t\t\tif (ev.keyCode === 13) {\n\t\t\t\t// return\n\t\t\t\tme.$location.blur();\n\t\t\t} else if (ev.keyCode === 38 || ev.keyCode === 40) {\n\t\t\t\t// up or down\n\t\t\t\t$items = me.$selModeList.find('li');\n\t\t\t\t$currentFocus = $items.filter(':focus');\n\t\n\t\t\t\tme.$location.blur();\n\t\t\t\t$items.eq(ev.keyCode === 38? $items.length - 1: 0).focus();\n\t\t\t\tev.preventDefault();\n\t\n\t\t\t} else {\n\t\t\t\tme.updateLocationCombo();\n\t\t\t}\n\t\t};\n\t\n\t\tInputController.prototype.onKeyDownSelModeListItem = function(ev) {\n\t\t\tvar me = this,\n\t\t\t\t$target = $(ev.target),\n\t\t\t\t$items,\n\t\t\t\t$li = $target.is('li')\n\t\t\t\t\t? $target\n\t\t\t\t\t: $target.parents('li');\n\t\n\t\t\tif (ev.keyCode === 13) {\n\t\t\t\tme.onSelModeChoosed($li.attr('data-selmode'), me.extractSelModeListItemData($li));\n\t\t\t} else if (ev.keyCode === 38 || ev.keyCode === 40) {\n\t\t\t\t$items = me.$selModeList.find('li');\n\t\t\t\t$items.eq(($li.index() + (ev.keyCode === 38? -1: 1)) % $items.length).focus();\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t};\n\t\n\t\tInputController.prototype.extractSelModeListItemData = function($item) {\n\t\t\treturn {\n\t\t\t\tposition: {\n\t\t\t\t\tlat: +$item.attr('data-latitude'),\n\t\t\t\t\tlng: +$item.attr('data-longitude')\n\t\t\t\t},\n\t\t\t\taddress: $item.text()\n\t\t\t};\n\t\t};\n\t\n\t\tInputController.prototype.updateLocationCombo = _.debounce(function() {\n\t\t\tvar me = this,\n\t\t\t\tval = me.$location.val(),\n\t\t\t\tselector = 'li[data-selmode=selmode-geocode]',\n\t\t\t\ttpl = _.template('<li tabindex=\"-1\" data-selmode=\"selmode-geocode\" data-latitude=\"{{lat}}\" data-longitude=\"{{lng}}\">{{address}}</li>');\n\t\n\t\t\tme.$selModeList.find(selector).remove();\n\t\n\t\t\tif (!val || val.length < 2) {\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tnew google.maps.Geocoder().geocode({\n\t\t\t\taddress: val\n\t\t\t}, function(results, status) {\n\t\t\t\tif (status === google.maps.GeocoderStatus.OK) {\n\t\t\t\t\tme.$selModeList.prepend(results.slice(0, 3).map(function(result) {\n\t\t\t\t\t\treturn tpl({\n\t\t\t\t\t\t\tlat: result.geometry.location.lat(),\n\t\t\t\t\t\t\tlng: result.geometry.location.lng(),\n\t\t\t\t\t\t\taddress: GeoUtil.trimGeocoderAddress(result.formatted_address)\n\t\t\t\t\t\t});\n\t\t\t\t\t}).join(''));\n\t\n\t\t\t\t\tme.$selModeList.find(selector).click(function(ev) {\n\t\t\t\t\t\tvar $choosed = $(ev.target);\n\t\n\t\t\t\t\t\tme.onSelModeChoosed(me.selMode.GEOCODE, me.extractSelModeListItemData($choosed));\n\t\t\t\t\t}).keydown(_.bind(me.onKeyDownSelModeListItem, me))\n\t\t\t\t\t\t.blur(_.bind(me.onBlurSelModeListItem, me));\n\t\t\t\t}\n\t\t\t});\n\t\t}, 200);\n\t\n\t\tInputController.prototype.selMode = {\n\t\t\tTEXT: 'selmode-text',\n\t\t\tMAP: 'selmode-map',\n\t\t\tCURRENT: 'selmode-current',\n\t\t\tGEOCODE: 'selmode-geocode'\n\t\t};\n\t\n\t\tInputController.prototype.appendElementToLocationInput = function($el, fix) {\n\t\t\tvar me = this,\n\t\t\t\t$loc = me.$location;\n\t\n\t\t\tfix = _.defaults(fix || {}, { top: 0, left: 0, width: 0 });\n\t\n\t\t\t$el.css({\n\t\t\t\ttop: (fix.top + $loc.outerHeight()) + 'px',\n\t\t\t\tleft: (fix.left + Math.round($loc.offset().left - ($loc.outerWidth() - $loc.width()) / 2)) + 'px',\n\t\t\t\twidth: (fix.width + $loc.outerWidth()) + 'px'\n\t\t\t});\n\t\t};\n\t\n\t\tInputController.prototype.toggleSelModeList = function(show) {\n\t\t\tvar me = this,\n\t\t\t\tisVisible = me.$selModeList.is(':visible'),\n\t\t\t\tdoShow = !isVisible && (show !== false || show === true),\n\t\t\t\tdoHide = isVisible && (show === false || show !== true),\n\t\t\t\tdeferred = new $.Deferred();\n\t\n\t\t\tif (doShow) {\n\t\t\t\tme.appendElementToLocationInput(me.$selModeList, { left: -3 });\n\t\t\t\tme.$selModeList.fadeIn(undefined, function() {\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t});\n\t\t\t\t_.delay(function() {\n\t\t\t\t\tme.$el.one('click', me.__bgClickHandler);\n\t\t\t\t}, 100);\n\t\t\t} else if (doHide) {\n\t\t\t\tme.$selModeList.fadeOut(undefined, function() {\n\t\t\t\t\tdeferred.resolve();\n\t\t\t\t});\n\t\t\t}\n\t\n\t\t\treturn deferred.promise();\n\t\t};\n\t\n\t\tInputController.prototype.selectLocationOnMap = function() {\n\t\t\tvar me = this;\n\t\n\t\t\tme.togglePanel(false);\n\t\t\tme.mapController.specifyLocation(function(loc) {\n\t\t\t\tme.togglePanel(true);\n\t\t\t\tif (loc) {\n\t\t\t\t\tme.setLatLng(loc);\n\t\t\t\t\tme.$execBtn.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\n\t\tInputController.prototype.selectLocationByText = function() {\n\t\t\tvar me = this;\n\t\n\t\t\tme.$location.focus();\n\t\t};\n\t\n\t\tInputController.prototype.applyGeoLocationResult = function() {\n\t\t\tvar me = this,\n\t\t\t\t__ = _.bind(me.application.getMessage, me.application);\n\t\n\t\t\tif (me.lastGeoLocationResult.code === 1) {\n\t\t\t\twindow.alert(__('geolocationForbidden'));\n\t\n\t\t\t} else if (me.lastGeoLocationResult.code === 2) {\n\t\t\t\twindow.alert(__('geolocationUnavailable'));\n\t\n\t\t\t} else if (me.lastGeoLocationResult.code === 3) {\n\t\t\t\twindow.alert(__('geolocationFailure'));\n\t\n\t\t\t} else if (me.lastGeoLocationResult.coords) {\n\t\t\t\tcrd = me.lastGeoLocationResult.coords;\n\t\t\t\tlatLng = new google.maps.LatLng(crd.latitude, crd.longitude);\n\t\t\t\tme.setLatLng(latLng);\n\t\t\t\tme.mapController.map.panTo(latLng);\n\t\n\t\t\t} else {\n\t\t\t\twindow.alert(__('geolocationError'));\n\t\t\t}\n\t\t};\n\t\n\t\tInputController.prototype.selectLocationByGeoLocation = function() {\n\t\t\tvar me = this,\n\t\t\t\tcrd, latLng, bar, $bar, initial = false;\n\t\n\t\t\tif (me.lastGeoLocationResult) {\n\t\t\t\tme.$location.attr('placeholder', me.defaultPlaceholder);\n\t\t\t\tme.applyGeoLocationResult(me.lastGeoLocationResult);\n\t\t\t\tme.$execBtn.focus();\n\t\n\t\t\t} else {\n\t\t\t\tif (!me.geoLocationWatchId) {\n\t\t\t\t\tinitial = true;\n\t\t\t\t\t$bar = me.$location.parent().find('div[role=progressbar]');\n\t\t\t\t\tbar = new ProgressBar($bar);\n\t\t\t\t\tme.appendElementToLocationInput($bar, { top: 8, left: 7 });\n\t\t\t\t\tbar.update(99.9);\n\t\t\t\t\tme.$location.attr('placeholder', me.application.getMessage('geolocationDetecting'));\n\t\t\t\t\t_.delay(function() {\n\t\t\t\t\t\tme.geoLocationWatchId = window.navigator.geolocation.watchPosition(function(pos) {\n\t\t\t\t\t\t\t// on success\n\t\t\t\t\t\t\tme.lastGeoLocationResult = pos;\n\t\t\t\t\t\t\tbar.finalize();\n\t\t\t\t\t\t}, function(err) {\n\t\t\t\t\t\t\t// on error\n\t\t\t\t\t\t\tme.lastGeoLocationResult = err;\n\t\t\t\t\t\t\tbar.finalize();\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tenableHighAccuracy: true,\n\t\t\t\t\t\t\tmaximumAge: 0,\n\t\t\t\t\t\t\ttimeout: 5000\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 500);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t_.delay(function() {\n\t\t\t\t\tme.selectLocationByGeoLocation();\n\t\t\t\t}, initial? 500: 100);\n\t\t\t}\n\t\t};\n\t\n\t\tInputController.prototype.setLatLng = function(loc) {\n\t\t\tvar me = this;\n\t\t\n\t\t\tnew google.maps.Geocoder().geocode({\n\t\t\t\tlocation: loc\n\t\t\t}, function(results, status) {\n\t\t\t\t\tvar filteredResults = results.filter(function(r) {\n\t\t\t\t\t\t// exclude road name\n\t\t\t\t\t\treturn !_.contains(r.types, 'route');\n\t\t\t\t\t});\n\t\n\t\t\t\tif (status !== google.maps.GeocoderStatus.OK) {\n\t\t\t\t\twindow.alert(status);\n\t\t\t\t\treturn;\n\t\t\t\t} else if (filteredResults.length === 0) {\n\t\t\t\t\taddr = '';\n\t\t\t\t} else {\n\t\t\t\t\taddr = GeoUtil.trimGeocoderAddress(filteredResults[0].formatted_address);\n\t\t\t\t}\n\t\n\t\t\t\tme.$location.val(addr);\n\t\t\t\tme.$location.attr('data-latitude', loc.lat());\n\t\t\t\tme.$location.attr('data-longitude', loc.lng());\n\t\t\t\tme.$location.blur();\n\t\t\t});\n\t\t};\n\t\n\t\tInputController.prototype.onSelModeChoosed = function(mode, data) {\n\t\t\tvar me = this;\n\t\t\t\n\t\t\tme.toggleSelModeList(false);\n\t\n\t\t\tif (mode === me.selMode.MAP) {\n\t\t\t\tme.selectLocationOnMap();\n\t\n\t\t\t} else if (mode === me.selMode.GEOCODE) {\n\t\t\t\tme.selectLocationByGeocodeResult(data);\n\t\n\t\t\t} else if (mode === me.selMode.TEXT) {\n\t\t\t\tme.selectLocationByText();\n\t\n\t\t\t} else if (mode === me.selMode.CURRENT) {\n\t\t\t\tme.selectLocationByGeoLocation();\n\t\t\t}\n\t\t};\n\t\n\t\tInputController.prototype.selectLocationByGeocodeResult = function(data) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.$location.val(data.address);\n\t\t\tme.$location.attr('data-latitude', data.position.lat);\n\t\t\tme.$location.attr('data-longitude', data.position.lng);\n\t\t\tme.$execBtn.focus();\n\t\t};\n\t\n\t\tInputController.prototype.togglePanel = function(show) {\n\t\t\tvar me = this,\n\t\t\t\t$header = me.$el.find('#app-header'),\n\t\t\t\t// isVisible = me.$el.is(':visible'),\n\t\t\t\tisVisible = me.$el.css('height') !== '50px',\n\t\t\t\tdoShow = !isVisible && (show !== false),\n\t\t\t\tdoHide = isVisible && (show !== true);\n\t\n\t\t\tif (doShow) {\n\t\t\t\t// me.$el.fadeIn();\n\t\t\t\tif (me.isCancellable()) {\n\t\t\t\t\tme.$cancelBtn.show();\n\t\t\t\t}\n\t\t\t\t$header.animate({ padding: '3.6em 0 0 120px', zoom: '100%' });\n\t\t\t\t$header.find('h1').animate({ marginTop: '1em' });\n\t\t\t\tme.$el.animate({ height: '100%' });\n\t\t\t} else if (doHide) {\n\t\t\t\t// me.$el.fadeOut();\n\t\t\t\tme.$cancelBtn.hide();\n\t\t\t\t$header.animate({ padding: '1em 0 0 60px', zoom: '60%' });\n\t\t\t\t$header.find('h1').animate({ marginTop: '0' });\n\t\t\t\tme.$el.animate({ height: '50px' });\n\t\t\t}\n\t\t};\n\t\n\t\tInputController.prototype.isCancellable= function() {\n\t\t\tvar me = this,\n\t\t\t\tretVal = false;\n\t\t\t\n\t\t\tme.mapController.map.data.forEach(function(feature) {\n\t\t\t\tif (feature.getProperty('isResult') === true) {\n\t\t\t\t\tretVal = true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\treturn retVal;\n\t\t};\n\t\n\t\tInputController.prototype.getValues = function() {\n\t\t\tvar me = this,\n\t\t\t\tlatVal = +me.$location.attr('data-latitude'),\n\t\t\t\tlngVal = +me.$location.attr('data-longitude');\n\t\n\t\t\treturn {\n\t\t\t\taddress: me.$location.val(),\n\t\t\t\torigin: latVal && lngVal\n\t\t\t\t\t? new google.maps.LatLng(latVal, lngVal)\n\t\t\t\t\t: undefined,\n\t\t\t\ttime: +me.$time.val() * 60,\n\t\t\t\tmode: me.$el.find('input[name=travelMode]:checked').val()\n\t\t\t};\n\t\t};\n\t\n\t\treturn InputController;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t\t__webpack_require__(7)\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function(GeoUtil) {\n\t\t'use strict';\n\t\tvar twicePI = 2 * Math.PI,\n\t\t\thalfPI = Math.PI / 2;\n\t\n\t\tfunction Calculation(request) {\n\t\t\tvar me = this;\n\t\n\t\t\tme.config = request;\n\t\t\tme.consumedTime = 0;\n\t\t\tme.vertices = new google.maps.MVCArray();\n\t\t\t\n\t\t\tme.vertices.addListener('insert_at', function(n) {\n\t\t\t\tvar added = me.vertices.getAt(n);\n\t\t\t\t\n\t\t\t\tgoogle.maps.event.trigger(me, 'progress', me.getProgress(), added, me.getGoals());\n\t\t\t});\n\t\t}\n\t\n\t\tCalculation.prototype = new google.maps.MVCObject();\n\t\n\t\tCalculation.prototype.getGoals = function() {\n\t\t\treturn _.collect(this.vertices.getArray(), 'endLocation');\n\t\t};\n\t\n\t\tCalculation.prototype.getProgress = function() {\n\t\t\tvar me = this;\n\t\n\t\t\treturn Math.round(100 * me.accumulateAngles(me.getGoals()) / twicePI);\n\t\t};\n\t\n\t\tCalculation.prototype.getVelocity = function() {\n\t\t\tvar me = this;\n\t\n\t\t\treturn 1000 * me.getProgress() / me.consumedTime;\n\t\t}\n\t\n\t\tCalculation.prototype.isComplete = function(vertices) {\n\t\t\tvar me = this;\n\t\n\t\t\treturn me.accumulateAngles(vertices || me.getGoals()) >= twicePI;\n\t\t};\n\t\n\t\tCalculation.prototype.hasVisited = function(location) {\n\t\t\tvar me = this,\n\t\t\t\tsameLocation = function(v) {\n\t\t\t\t\treturn GeoUtil.distance(v.endLocation, location) < 0.0005;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\treturn _.some(me.vertices.getArray(), sameLocation);\n\t\t};\n\t\n\t\tCalculation.prototype.accumulateAngles = function(vertices) {\n\t\t\tvar me = this,\n\t\t\t\tchecked = 0,\n\t\t\t\tdiff,\n\t\t\t\tangles = _.map(vertices, function(v) {\n\t\t\t\t\treturn GeoUtil.calcAngle(me.config.origin, v);\n\t\t\t\t});\n\t\t\t\t\n\t\t\treturn _.reduce(angles, function(passed, angle, idx, arr) {\n\t\t\t\treturn passed + (idx > 0? ((diff = angle - arr[idx - 1]) < -1 * Math.PI? (diff + twicePI): diff): 0);\n\t\t\t}, 0);\n\t\t};\n\t\n\t\treturn Calculation;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t\tfunction Footprint(markerOptions) {\n\t\t\tvar me = this;\n\t\t\t\n\t\t\tgoogle.maps.Marker.constructor.call(me, markerOptions);\n\t\t\tme.angle = 90;\n\t\t\tme.stepCount = 0;\n\t\n\t\t\tme.timer = window.setInterval(function() {\n\t\t\t\tme.stepCount++;\n\t\t\t\tme.setIcon(me.createIconOption());\n\t\t\t}, 500);\n\t\t}\n\t\n\t\tFootprint.prototype = new google.maps.Marker();\n\t\n\t\tFootprint.prototype.stop = function() {\n\t\t\tvar me = this;\n\t\t\t\n\t\t\tme.setIcon(me.createIconOption(true));\n\t\t\twindow.clearInterval(me.timer);\n\t\t};\n\t\n\t\tFootprint.prototype.createIconOption = function(stop) {\n\t\t\tvar me = this;\n\t\t\t\n\t\t\treturn {\n\t\t\t\tpath: stop\n\t\t\t\t\t? [\n\t\t\t\t\t'M',\n\t\t\t\t\t'33.25',\n\t\t\t\t\t'16.025278207000508',\n\t\t\t\t\t'C',\n\t\t\t\t\t'32.0125',\n\t\t\t\t\t'16.01137519315023',\n\t\t\t\t\t'29.875',\n\t\t\t\t\t'17.125',\n\t\t\t\t\t'28.5',\n\t\t\t\t\t'18.5',\n\t\t\t\t\t'C',\n\t\t\t\t\t'26.944444444444443',\n\t\t\t\t\t'20.055555555555557',\n\t\t\t\t\t'26',\n\t\t\t\t\t'22.133333333333333',\n\t\t\t\t\t'26',\n\t\t\t\t\t'24',\n\t\t\t\t\t'C',\n\t\t\t\t\t'26',\n\t\t\t\t\t'25.65',\n\t\t\t\t\t'26.718232309083987',\n\t\t\t\t\t'29.1375',\n\t\t\t\t\t'27.59607179796442',\n\t\t\t\t\t'31.75',\n\t\t\t\t\t'C',\n\t\t\t\t\t'28.817051115483906',\n\t\t\t\t\t'35.38370354993694',\n\t\t\t\t\t'28.934556004964225',\n\t\t\t\t\t'37.02877200266145',\n\t\t\t\t\t'28.09607179796442',\n\t\t\t\t\t'38.75',\n\t\t\t\t\t'C',\n\t\t\t\t\t'27.49323230908399',\n\t\t\t\t\t'39.9875',\n\t\t\t\t\t'27',\n\t\t\t\t\t'41.9',\n\t\t\t\t\t'27',\n\t\t\t\t\t'43',\n\t\t\t\t\t'C',\n\t\t\t\t\t'27',\n\t\t\t\t\t'44.1',\n\t\t\t\t\t'27.9',\n\t\t\t\t\t'45.45',\n\t\t\t\t\t'29',\n\t\t\t\t\t'46',\n\t\t\t\t\t'C',\n\t\t\t\t\t'30.1',\n\t\t\t\t\t'46.55',\n\t\t\t\t\t'31.5625',\n\t\t\t\t\t'46.79335988647727',\n\t\t\t\t\t'32.25',\n\t\t\t\t\t'46.54079974772727',\n\t\t\t\t\t'C',\n\t\t\t\t\t'32.9375',\n\t\t\t\t\t'46.28823960897727',\n\t\t\t\t\t'34.244611443600775',\n\t\t\t\t\t'44.60073960897727',\n\t\t\t\t\t'35.154692096890614',\n\t\t\t\t\t'42.79079974772727',\n\t\t\t\t\t'C',\n\t\t\t\t\t'36.06477275018045',\n\t\t\t\t\t'40.98085988647727',\n\t\t\t\t\t'37.29976312969924',\n\t\t\t\t\t'37.7',\n\t\t\t\t\t'37.89911516248792',\n\t\t\t\t\t'35.5',\n\t\t\t\t\t'C',\n\t\t\t\t\t'38.49846719527659',\n\t\t\t\t\t'33.3',\n\t\t\t\t\t'39.006023382671565',\n\t\t\t\t\t'28.8',\n\t\t\t\t\t'39.02701780114341',\n\t\t\t\t\t'25.5',\n\t\t\t\t\t'C',\n\t\t\t\t\t'39.05552142071855',\n\t\t\t\t\t'21.019668967058752',\n\t\t\t\t\t'38.61369715435026',\n\t\t\t\t\t'19.063165635728122',\n\t\t\t\t\t'37.28259473554611',\n\t\t\t\t\t'17.775278207000508',\n\t\t\t\t\t'C',\n\t\t\t\t\t'36.30216763099575',\n\t\t\t\t\t'16.826681220850787',\n\t\t\t\t\t'34.4875',\n\t\t\t\t\t'16.039181220850786',\n\t\t\t\t\t'33.25',\n\t\t\t\t\t'16.025278207000508',\n\t\t\t\t\t'Z',\n\t\t\t\t\t'M',\n\t\t\t\t\t'15.25',\n\t\t\t\t\t'18.025278207000508',\n\t\t\t\t\t'C',\n\t\t\t\t\t'14.0125',\n\t\t\t\t\t'18.01137519315023',\n\t\t\t\t\t'12.029399448381973',\n\t\t\t\t\t'19.0125',\n\t\t\t\t\t'10.843109885293275',\n\t\t\t\t\t'20.25',\n\t\t\t\t\t'C',\n\t\t\t\t\t'9.06600455055934',\n\t\t\t\t\t'22.103820450048765',\n\t\t\t\t\t'8.782723188934392',\n\t\t\t\t\t'23.29235909990247',\n\t\t\t\t\t'9.234286149351865',\n\t\t\t\t\t'27',\n\t\t\t\t\t'C',\n\t\t\t\t\t'9.535722657672789',\n\t\t\t\t\t'29.475',\n\t\t\t\t\t'10.956323209290815',\n\t\t\t\t\t'34.0875',\n\t\t\t\t\t'12.39117626405859',\n\t\t\t\t\t'37.25',\n\t\t\t\t\t'C',\n\t\t\t\t\t'13.826029318826365',\n\t\t\t\t\t'40.4125',\n\t\t\t\t\t'16.0125',\n\t\t\t\t\t'43.697443923338966',\n\t\t\t\t\t'17.25',\n\t\t\t\t\t'44.54987538519771',\n\t\t\t\t\t'C',\n\t\t\t\t\t'18.4875',\n\t\t\t\t\t'45.402306847056444',\n\t\t\t\t\t'20.4',\n\t\t\t\t\t'45.96020979614915',\n\t\t\t\t\t'21.5',\n\t\t\t\t\t'45.789659716514834',\n\t\t\t\t\t'C',\n\t\t\t\t\t'22.773760289505443',\n\t\t\t\t\t'45.59216888123285',\n\t\t\t\t\t'23.610306095530625',\n\t\t\t\t\t'44.57547853664944',\n\t\t\t\t\t'23.803773241635348',\n\t\t\t\t\t'42.989784331317125',\n\t\t\t\t\t'C',\n\t\t\t\t\t'23.970848524534787',\n\t\t\t\t\t'41.62040294909271',\n\t\t\t\t\t'23.408348524534787',\n\t\t\t\t\t'39.0375',\n\t\t\t\t\t'22.553773241635348',\n\t\t\t\t\t'37.25',\n\t\t\t\t\t'C',\n\t\t\t\t\t'21.64498244521012',\n\t\t\t\t\t'35.34909836954499',\n\t\t\t\t\t'21.01353030910185',\n\t\t\t\t\t'31.40558005856733',\n\t\t\t\t\t'21.03259473554611',\n\t\t\t\t\t'27.75',\n\t\t\t\t\t'C',\n\t\t\t\t\t'21.057182515417388',\n\t\t\t\t\t'23.035323791686757',\n\t\t\t\t\t'20.6272918537451',\n\t\t\t\t\t'21.07631897554676',\n\t\t\t\t\t'19.28259473554611',\n\t\t\t\t\t'19.775278207000508',\n\t\t\t\t\t'C',\n\t\t\t\t\t'18.302167630995747',\n\t\t\t\t\t'18.826681220850787',\n\t\t\t\t\t'16.4875',\n\t\t\t\t\t'18.039181220850786',\n\t\t\t\t\t'15.25',\n\t\t\t\t\t'18.025278207000508',\n\t\t\t\t\t'Z',\n\t\t\t\t\t'' ].join(' '): me.stepCount % 2 === 0 ? [\n\t\t\t\t\t'M',\n\t\t\t\t\t'6.75',\n\t\t\t\t\t'0.9674052644538893',\n\t\t\t\t\t'C',\n\t\t\t\t\t'5.512499999999999',\n\t\t\t\t\t'0.9494781599035285',\n\t\t\t\t\t'3.7238751931502287',\n\t\t\t\t\t'1.7369781599035283',\n\t\t\t\t\t'2.7752782070005075',\n\t\t\t\t\t'2.7174052644538893',\n\t\t\t\t\t'C',\n\t\t\t\t\t'1.537811369197653',\n\t\t\t\t\t'3.996395232246864',\n\t\t\t\t\t'1.0449905640558672',\n\t\t\t\t\t'6.195073224589727',\n\t\t\t\t\t'1.0308551414032063',\n\t\t\t\t\t'10.5',\n\t\t\t\t\t'C',\n\t\t\t\t\t'1.0200194414744117',\n\t\t\t\t\t'13.8',\n\t\t\t\t\t'1.5015328047234089',\n\t\t\t\t\t'18.3',\n\t\t\t\t\t'2.1008848375120888',\n\t\t\t\t\t'20.5',\n\t\t\t\t\t'C',\n\t\t\t\t\t'2.7002368703007686',\n\t\t\t\t\t'22.7',\n\t\t\t\t\t'3.9352272498195546',\n\t\t\t\t\t'25.980859886477273',\n\t\t\t\t\t'4.84530790310939',\n\t\t\t\t\t'27.790799747727274',\n\t\t\t\t\t'C',\n\t\t\t\t\t'5.755388556399225',\n\t\t\t\t\t'29.600739608977275',\n\t\t\t\t\t'7.0625',\n\t\t\t\t\t'31.288239608977275',\n\t\t\t\t\t'7.75',\n\t\t\t\t\t'31.540799747727274',\n\t\t\t\t\t'C',\n\t\t\t\t\t'8.4375',\n\t\t\t\t\t'31.793359886477273',\n\t\t\t\t\t'9.9',\n\t\t\t\t\t'31.55',\n\t\t\t\t\t'11',\n\t\t\t\t\t'31',\n\t\t\t\t\t'C',\n\t\t\t\t\t'12.1',\n\t\t\t\t\t'30.45',\n\t\t\t\t\t'13',\n\t\t\t\t\t'29.1',\n\t\t\t\t\t'13',\n\t\t\t\t\t'28',\n\t\t\t\t\t'C',\n\t\t\t\t\t'13',\n\t\t\t\t\t'26.9',\n\t\t\t\t\t'12.50676769091601',\n\t\t\t\t\t'24.9875',\n\t\t\t\t\t'11.90392820203558',\n\t\t\t\t\t'23.75',\n\t\t\t\t\t'C',\n\t\t\t\t\t'11.065443995035771',\n\t\t\t\t\t'22.028772002661448',\n\t\t\t\t\t'11.182948884516094',\n\t\t\t\t\t'20.383703549936946',\n\t\t\t\t\t'12.40392820203558',\n\t\t\t\t\t'16.75',\n\t\t\t\t\t'C',\n\t\t\t\t\t'13.281767690916011',\n\t\t\t\t\t'14.1375',\n\t\t\t\t\t'14',\n\t\t\t\t\t'10.65',\n\t\t\t\t\t'14',\n\t\t\t\t\t'9',\n\t\t\t\t\t'C',\n\t\t\t\t\t'14',\n\t\t\t\t\t'7.133333333333333',\n\t\t\t\t\t'13.055555555555555',\n\t\t\t\t\t'5.055555555555555',\n\t\t\t\t\t'11.5',\n\t\t\t\t\t'3.5',\n\t\t\t\t\t'C',\n\t\t\t\t\t'10.125',\n\t\t\t\t\t'2.125',\n\t\t\t\t\t'7.987500000000001',\n\t\t\t\t\t'0.9853323690042503',\n\t\t\t\t\t'6.75',\n\t\t\t\t\t'0.9674052644538893',\n\t\t\t\t\t'Z',\n\t\t\t\t\t'M',\n\t\t\t\t\t'22.75',\n\t\t\t\t\t'18.967405264453888',\n\t\t\t\t\t'C',\n\t\t\t\t\t'21.5125',\n\t\t\t\t\t'18.949478159903528',\n\t\t\t\t\t'19.723875193150228',\n\t\t\t\t\t'19.73697815990353',\n\t\t\t\t\t'18.775278207000508',\n\t\t\t\t\t'20.717405264453888',\n\t\t\t\t\t'C',\n\t\t\t\t\t'17.523506201306184',\n\t\t\t\t\t'22.01118040924059',\n\t\t\t\t\t'17.043624674242828',\n\t\t\t\t\t'24.213862596654838',\n\t\t\t\t\t'17.025278207000508',\n\t\t\t\t\t'28.75',\n\t\t\t\t\t'C',\n\t\t\t\t\t'17.010964011861812',\n\t\t\t\t\t'32.289163976901435',\n\t\t\t\t\t'16.326076083975728',\n\t\t\t\t\t'36.409634732011256',\n\t\t\t\t\t'15.44622675836466',\n\t\t\t\t\t'38.25',\n\t\t\t\t\t'C',\n\t\t\t\t\t'14.591651475465222',\n\t\t\t\t\t'40.0375',\n\t\t\t\t\t'14.029151475465222',\n\t\t\t\t\t'42.62040294909271',\n\t\t\t\t\t'14.19622675836466',\n\t\t\t\t\t'43.989784331317125',\n\t\t\t\t\t'C',\n\t\t\t\t\t'14.389693904469379',\n\t\t\t\t\t'45.57547853664944',\n\t\t\t\t\t'15.226239710494553',\n\t\t\t\t\t'46.592168881232844',\n\t\t\t\t\t'16.5',\n\t\t\t\t\t'46.789659716514834',\n\t\t\t\t\t'C',\n\t\t\t\t\t'17.6',\n\t\t\t\t\t'46.960209796149144',\n\t\t\t\t\t'19.5125',\n\t\t\t\t\t'46.40230684705644',\n\t\t\t\t\t'20.75',\n\t\t\t\t\t'45.5498753851977',\n\t\t\t\t\t'C',\n\t\t\t\t\t'21.9875',\n\t\t\t\t\t'44.697443923338966',\n\t\t\t\t\t'24.173970681173635',\n\t\t\t\t\t'41.4125',\n\t\t\t\t\t'25.60882373594141',\n\t\t\t\t\t'38.25',\n\t\t\t\t\t'C',\n\t\t\t\t\t'27.043676790709185',\n\t\t\t\t\t'35.0875',\n\t\t\t\t\t'28.46427734232721',\n\t\t\t\t\t'30.475',\n\t\t\t\t\t'28.765713850648137',\n\t\t\t\t\t'28',\n\t\t\t\t\t'C',\n\t\t\t\t\t'29.21727681106561',\n\t\t\t\t\t'24.29235909990247',\n\t\t\t\t\t'28.933995449440662',\n\t\t\t\t\t'23.103820450048765',\n\t\t\t\t\t'27.156890114706727',\n\t\t\t\t\t'21.25',\n\t\t\t\t\t'C',\n\t\t\t\t\t'25.970600551618027',\n\t\t\t\t\t'20.0125',\n\t\t\t\t\t'23.9875',\n\t\t\t\t\t'18.98533236900425',\n\t\t\t\t\t'22.75',\n\t\t\t\t\t'18.967405264453888',\n\t\t\t\t\t'Z',\n\t\t\t\t\t''\n\t\t\t\t].join(' '): [\n\t\t\t\t\t'M',\n\t\t\t\t\t'23.25',\n\t\t\t\t\t'1.025278207000508',\n\t\t\t\t\t'C',\n\t\t\t\t\t'22.0125',\n\t\t\t\t\t'1.0113751931502286',\n\t\t\t\t\t'19.875',\n\t\t\t\t\t'2.125',\n\t\t\t\t\t'18.5',\n\t\t\t\t\t'3.5',\n\t\t\t\t\t'C',\n\t\t\t\t\t'16.944444444444443',\n\t\t\t\t\t'5.055555555555555',\n\t\t\t\t\t'16',\n\t\t\t\t\t'7.133333333333333',\n\t\t\t\t\t'16',\n\t\t\t\t\t'9',\n\t\t\t\t\t'C',\n\t\t\t\t\t'16',\n\t\t\t\t\t'10.65',\n\t\t\t\t\t'16.718232309083987',\n\t\t\t\t\t'14.1375',\n\t\t\t\t\t'17.59607179796442',\n\t\t\t\t\t'16.75',\n\t\t\t\t\t'C',\n\t\t\t\t\t'18.817051115483906',\n\t\t\t\t\t'20.383703549936943',\n\t\t\t\t\t'18.934556004964225',\n\t\t\t\t\t'22.028772002661448',\n\t\t\t\t\t'18.09607179796442',\n\t\t\t\t\t'23.75',\n\t\t\t\t\t'C',\n\t\t\t\t\t'17.49323230908399',\n\t\t\t\t\t'24.9875',\n\t\t\t\t\t'17',\n\t\t\t\t\t'26.9',\n\t\t\t\t\t'17',\n\t\t\t\t\t'28',\n\t\t\t\t\t'C',\n\t\t\t\t\t'17',\n\t\t\t\t\t'29.1',\n\t\t\t\t\t'17.9',\n\t\t\t\t\t'30.45',\n\t\t\t\t\t'19',\n\t\t\t\t\t'31',\n\t\t\t\t\t'C',\n\t\t\t\t\t'20.1',\n\t\t\t\t\t'31.55',\n\t\t\t\t\t'21.5625',\n\t\t\t\t\t'31.793359886477273',\n\t\t\t\t\t'22.25',\n\t\t\t\t\t'31.54079974772727',\n\t\t\t\t\t'C',\n\t\t\t\t\t'22.9375',\n\t\t\t\t\t'31.288239608977268',\n\t\t\t\t\t'24.244611443600775',\n\t\t\t\t\t'29.600739608977268',\n\t\t\t\t\t'25.154692096890614',\n\t\t\t\t\t'27.79079974772727',\n\t\t\t\t\t'C',\n\t\t\t\t\t'26.06477275018045',\n\t\t\t\t\t'25.980859886477273',\n\t\t\t\t\t'27.299763129699233',\n\t\t\t\t\t'22.7',\n\t\t\t\t\t'27.89911516248791',\n\t\t\t\t\t'20.5',\n\t\t\t\t\t'C',\n\t\t\t\t\t'28.49846719527659',\n\t\t\t\t\t'18.3',\n\t\t\t\t\t'29.006023382671565',\n\t\t\t\t\t'13.8',\n\t\t\t\t\t'29.02701780114341',\n\t\t\t\t\t'10.5',\n\t\t\t\t\t'C',\n\t\t\t\t\t'29.05552142071855',\n\t\t\t\t\t'6.019668967058752',\n\t\t\t\t\t'28.613697154350263',\n\t\t\t\t\t'4.063165635728123',\n\t\t\t\t\t'27.28259473554611',\n\t\t\t\t\t'2.7752782070005075',\n\t\t\t\t\t'C',\n\t\t\t\t\t'26.302167630995747',\n\t\t\t\t\t'1.8266812208507872',\n\t\t\t\t\t'24.4875',\n\t\t\t\t\t'1.0391812208507871',\n\t\t\t\t\t'23.25',\n\t\t\t\t\t'1.025278207000508',\n\t\t\t\t\t'Z',\n\t\t\t\t\t'M',\n\t\t\t\t\t'7.25',\n\t\t\t\t\t'19.025278207000508',\n\t\t\t\t\t'C',\n\t\t\t\t\t'6.012499999999999',\n\t\t\t\t\t'19.01137519315023',\n\t\t\t\t\t'4.029399448381974',\n\t\t\t\t\t'20.0125',\n\t\t\t\t\t'2.843109885293275',\n\t\t\t\t\t'21.25',\n\t\t\t\t\t'C',\n\t\t\t\t\t'1.066004550559339',\n\t\t\t\t\t'23.103820450048765',\n\t\t\t\t\t'0.782723188934392',\n\t\t\t\t\t'24.29235909990247',\n\t\t\t\t\t'1.234286149351865',\n\t\t\t\t\t'28',\n\t\t\t\t\t'C',\n\t\t\t\t\t'1.535722657672788',\n\t\t\t\t\t'30.475',\n\t\t\t\t\t'2.9563232092908143',\n\t\t\t\t\t'35.0875',\n\t\t\t\t\t'4.39117626405859',\n\t\t\t\t\t'38.25',\n\t\t\t\t\t'C',\n\t\t\t\t\t'5.826029318826366',\n\t\t\t\t\t'41.4125',\n\t\t\t\t\t'8.0125',\n\t\t\t\t\t'44.697443923338966',\n\t\t\t\t\t'9.25',\n\t\t\t\t\t'45.54987538519771',\n\t\t\t\t\t'C',\n\t\t\t\t\t'10.4875',\n\t\t\t\t\t'46.402306847056444',\n\t\t\t\t\t'12.4',\n\t\t\t\t\t'46.96020979614915',\n\t\t\t\t\t'13.5',\n\t\t\t\t\t'46.789659716514834',\n\t\t\t\t\t'C',\n\t\t\t\t\t'14.773760289505443',\n\t\t\t\t\t'46.59216888123285',\n\t\t\t\t\t'15.610306095530625',\n\t\t\t\t\t'45.57547853664944',\n\t\t\t\t\t'15.803773241635348',\n\t\t\t\t\t'43.989784331317125',\n\t\t\t\t\t'C',\n\t\t\t\t\t'15.970848524534787',\n\t\t\t\t\t'42.62040294909271',\n\t\t\t\t\t'15.408348524534787',\n\t\t\t\t\t'40.0375',\n\t\t\t\t\t'14.553773241635348',\n\t\t\t\t\t'38.25',\n\t\t\t\t\t'C',\n\t\t\t\t\t'13.644982445210116',\n\t\t\t\t\t'36.34909836954499',\n\t\t\t\t\t'13.013530309101847',\n\t\t\t\t\t'32.40558005856733',\n\t\t\t\t\t'13.032594735546109',\n\t\t\t\t\t'28.75',\n\t\t\t\t\t'C',\n\t\t\t\t\t'13.057182515417391',\n\t\t\t\t\t'24.03532379168675',\n\t\t\t\t\t'12.6272918537451',\n\t\t\t\t\t'22.07631897554676',\n\t\t\t\t\t'11.282594735546109',\n\t\t\t\t\t'20.775278207000508',\n\t\t\t\t\t'C',\n\t\t\t\t\t'10.302167630995749',\n\t\t\t\t\t'19.826681220850787',\n\t\t\t\t\t'8.4875',\n\t\t\t\t\t'19.039181220850786',\n\t\t\t\t\t'7.25',\n\t\t\t\t\t'19.025278207000508',\n\t\t\t\t\t'Z',\n\t\t\t\t\t''\n\t\t\t\t].join(' '),\n\t\t\t\tfillColor: '#233f5b',\n\t\t\t\tfillOpacity: 1,\n\t\t\t\tstrokeWeight: 0,\n\t\t\t\trotation: me.angle,\n\t\t\t\tscale: 1,\n\t\t\t\tanchor: new google.maps.Point(15, 24)\n\t\t\t};\n\t\t};\n\t\n\t\tFootprint.prototype.setAngle = function(angle) { this.angle = angle; };\n\t\n\t\treturn Footprint;\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\r\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\r\n\t\t'use strict';\r\n\t\r\n\t\tfunction OM(map) {\r\n\t\t\tvar me = this;\r\n\t\r\n\t\t\tgoogle.maps.MVCArray.constructor.call(me);\r\n\t\t\tme.map = map;\r\n\t\t\tme.addListener('remove_at', function(idx, elem) {\r\n\t\t\t\tif (elem[0].setMap) {\r\n\t\t\t\t\telem[0].setMap(null);\r\n\t\t\t\t} else if (elem.close) {\r\n\t\t\t\t\telem[0].close();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new Error('cannot destroy item', elem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\r\n\t\t\tme.addListener('insert_at', function(idx) {\r\n\t\t\t\tvar elem = me.getArray()[idx],\r\n\t\t\t\t\tobj = elem[0],\r\n\t\t\t\t\tcls = elem[1],\r\n\t\t\t\t\tid = elem[2],\r\n\t\t\t\t\tmarker;\r\n\t\r\n\t\t\t\tif (obj.open) {\r\n\t\t\t\t\tobj.open(me.map);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobj.setMap(me.map);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\r\n\t\tOM.prototype = new google.maps.MVCArray();\r\n\t\r\n\t\tOM.prototype.clearObject = function(id) {\r\n\t\t\tvar me = this;\r\n\t\r\n\t\t\tif (!id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\tme.forEach(function(elem, idx) {\r\n\t\t\t\tif (elem[2] === id) {\r\n\t\t\t\t\tme.removeAt(idx);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\t\r\n\t\tOM.prototype.clearObjects = function(taggedAs) {\r\n\t\t\tvar me = this,\r\n\t\t\t\ttoRemove = [];\r\n\t\t\t\r\n\t\t\tme.forEach(function(elem, idx) {\r\n\t\t\t\tif (elem && (taggedAs === undefined || elem[1] === taggedAs)) {\r\n\t\t\t\t\ttoRemove.push(idx);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\r\n\t\t\tfor (var i = toRemove.length; i > 0; --i) {\r\n\t\t\t\tme.removeAt(i - 1) ;\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\tOM.prototype.findObject = function(id) {\r\n\t\t\tvar me = this;\r\n\t\t\t\r\n\t\t\treturn me.getArray().filter(function(elem) {\r\n\t\t\t\treturn elem[2] === id;\r\n\t\t\t}).pop();\r\n\t\t};\r\n\t\r\n\t\tOM.prototype.showObject = function(obj, cls, id) {\r\n\t\t\tvar me = this;\r\n\t\t\t\r\n\t\t\tme.clearObject(id);\r\n\t\t\tme.push([ obj, cls, id ]);\r\n\t\t\treturn obj;\r\n\t\t};\r\n\t\r\n\t\treturn OM;\r\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\r\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(7),\n\t\t__webpack_require__(16)\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function(GeoUtil, Walk30mUtils) {\n\t\n\t\tfunction ResultVisualizer(application, map, objectManager) {\n\t\t\tvar me = this,\n\t\t\t\tdefaultStyler = map.data.getStyle();\n\t\n\t\t\tme.application = application;\n\t\t\tme.map = map;\n\t\t\tme.objectManager = objectManager;\n\t\t\tme.twitterURITpl = _.template('https://twitter.com/intent/tweet?text={{message}}&url={{url}}&hashtags=walk30m');\n\t\t\tme.routeLinkTpl = _.template('https://www.google.co.jp/maps/dir/{{originLat}},{{originLng}}/{{destLat}},{{destLng}}');\n\t\t\tme.balloonTpl = _.template(application.getMessage('routeDetailBalloonTpl'));\n\t\t\tme.summaryBalloonTpl = _.template(application.getMessage('resultSummaryBalloonTpl'));\n\t\n\t\t\tme.map.data.addListener('click', _.bind(me.onClickResult, me));\n\t\n\t\t\tme.map.data.setStyle(function(feature) {\n\t\t\t\tif (feature.getProperty('isResult') === true) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstrokeColor: '#4a4',\n\t\t\t\t\t\tfillColor: '#4a4',\n\t\t\t\t\t\tstrokeOpacity: 1,\n\t\t\t\t\t\tfillOpacity: 0.3\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\treturn _.isObject(defaultStyler)\n\t\t\t\t\t\t? defaultStyler\n\t\t\t\t\t\t: _.isFunction(defaultStyler)\n\t\t\t\t\t\t\t? defaultStyler(feature)\n\t\t\t\t\t\t\t: {};\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\n\t\tResultVisualizer.prototype.createRouteLink = function(route) { \n\t\t\tvar me = this,\n\t\t\t\tpath = route.overview_path;\n\t\n\t\t\treturn me.routeLinkTpl({\n\t\t\t\toriginLat: path[0].lat(),\n\t\t\t\toriginLng: path[0].lng(),\n\t\t\t\tdestLat: route.overview_path[path.length - 1].lat(),\n\t\t\t\tdestLng: path[path.length - 1].lng(),\n\t\t\t});\n\t\t};\n\t\n\t\tResultVisualizer.prototype.createBalloonContent = function(directionResult) {\n\t\t\tvar me = this,\n\t\t\t\troute = directionResult.routes[0],\n\t\t\t\tcontent = me.balloonTpl({\n\t\t\t\t\tdest: GeoUtil.trimGeocoderAddress(route.legs[0].end_address),\n\t\t\t\t\ttime: route.legs[0].duration.text,\n\t\t\t\t\turl: me.createRouteLink(route),\n\t\t\t\t\tsummary: route.summary,\n\t\t\t\t\tcopyright: route.copyrights\n\t\t\t\t});\n\t\n\t\t\treturn content;\n\t\t};\n\t\n\t\tResultVisualizer.prototype.clearResultDetail = function() {\n\t\t\tvar me = this;\n\t\n\t\t\tme.objectManager.clearObject('routeBalloon');\n\t\t\tme.objectManager.clearObjects('route');\n\t\t};\n\t\n\t\tResultVisualizer.prototype.showResultDetail = function(feature) {\n\t\t\tvar me = this,\n\t\t\t\tcls = 'route';\n\t\t\t\n\t\t\tfeature.getProperty('vertices').forEach(function(vertex) {\n\t\t\t\tvar route = vertex.directionResult.routes[0].overview_path,\n\t\t\t\t\tendPoint = me.objectManager.showObject(new google.maps.Marker({\n\t\t\t\t\t\tposition: route[route.length - 1],\n\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\tpath: google.maps.SymbolPath.CIRCLE,\n\t\t\t\t\t\t\tscale: 6,\n\t\t\t\t\t\t\tstrokeColor: '#4a4',\n\t\t\t\t\t\t\tstrokeWeight: 3\n\t\t\t\t\t\t}\n\t\t\t\t\t}), cls),\n\t\t\t\t\tpath = me.objectManager.showObject(new google.maps.Polyline({\n\t\t\t\t\t\tpath: route,\n\t\t\t\t\t\tclickable: false,\n\t\t\t\t\t\tstrokeColor: '#4a4',\n\t\t\t\t\t\tstrokeWeight: 3,\n\t\t\t\t\t\tstrokeOpacity: 1\n\t\t\t\t\t}), cls);\n\t\n\t\t\t\tfunction onClickRoute(event) {\n\t\t\t\t\tme.objectManager.clearObject('routeBalloon');\n\t\t\t\t\tme.objectManager.showObject(new google.maps.InfoWindow({\n\t\t\t\t\t\tposition: event.latLng,\n\t\t\t\t\t\tcontent: me.createBalloonContent(vertex.directionResult),\n\t\t\t\t\t\tmaxWidth: 320\n\t\t\t\t\t}), null, 'routeBalloon');\n\t\t\t\t}\n\t\n\t\t\t\tendPoint.addListener('click', onClickRoute);\n\t\t\t});\n\t\t};\n\t\n\t\tResultVisualizer.prototype.createSummary = function(feature) {\n\t\t\tvar me = this,\n\t\t\t\toptions = feature.getProperty('options');\n\t\n\t\t\treturn me.summaryBalloonTpl(Walk30mUtils.createSummary(_.defaults({\n\t\t\t\ttimeUnitMinExpr: me.application.getMessage('timeUnitMinExpr')\n\t\t\t}, options)));\n\t\t};\n\t\n\t\tResultVisualizer.prototype.showSummaryBalloon = function(feature) {\n\t\t\tvar me = this,\n\t\t\t\t__ = _.bind(me.application.getMessage, me.application)\n\t\t\t\t$balloon = $(me.map.getDiv()).find('.gm-style-iw'),\n\t\t\t\toptions = feature.getProperty('options'),\n\t\t\t\tsummary = Walk30mUtils.createSummary(_.defaults({\n\t\t\t\t\ttravelModeExpr: __('travelModes')[options.mode],\n\t\t\t\t\ttimeUnitMinExpr: __('timeUnitMinExpr')\n\t\t\t\t}, options));\n\t\n\t\t\tme.objectManager.showObject(new google.maps.InfoWindow({\n\t\t\t\tposition: options.origin,\n\t\t\t\tcontent: me.createSummary(feature),\n\t\t\t\tmaxWidth: 320\n\t\t\t}), null, 'summaryBalloon');\n\t\n\t\t\t$balloon.find('a[role=tweet-result]').click(function() {\n\t\t\t\tvar url = me.twitterURITpl({\n\t\t\t\t\turl: window.encodeURIComponent(Walk30mUtils.createSharedURI(feature)),\n\t\t\t\t\tmessage: window.encodeURIComponent(_.template(__('tweetMessageTpl'))(summary))\n\t\t\t\t});\n\t\n\t\t\t\twindow.open(url, '_blank');\n\t\t\t});\n\t\t\t$balloon.find('a[role=report-problem]').click(function() {\n\t\t\t\tme.application.startEditMessage(_.template(__('reportMessageTpl'))({\n\t\t\t\t\tid: feature.getId(),\n\t\t\t\t\tsummary: _.template(__('summaryTpl'))(summary)\n\t\t\t\t}));\n\t\t\t});\n\t\t\t$balloon.find('a[role=erase-result]').click(function() {\n\t\t\t\tme.map.data.remove(feature);\n\t\t\t\tme.objectManager.clearObject('summaryBalloon');\n\t\t\t});\n\t\t\t$balloon.find('a[role=show-routes]').click(function() {\n\t\t\t\tme.objectManager.clearObject('summaryBalloon');\n\t\t\t\tfeature.setProperty('detailed', true);\n\t\t\t\tme.showResultDetail(feature);\n\t\t\t});\n\t\t};\n\t\n\t\tResultVisualizer.prototype.onClickResult = function(event) {\n\t\t\tvar me = this;\n\t\t\t\n\t\t\tme.clearResultDetail();\n\t\n\t\t\tif (event.feature.getProperty('detailed')) {\n\t\t\t\tevent.feature.setProperty('detailed', false);\n\t\t\t}\n\t\t\tme.showSummaryBalloon(event.feature);\n\t\t};\n\t\n\t\tResultVisualizer.prototype.addResult = function(result) {\n\t\t\tvar me = this,\n\t\t\t\tvertices = _.collect(result.vertices, 'endLocation'),\n\t\t\t\ttoSpline = vertices.concat(vertices.slice(0).splice(0, Math.round(vertices.length / 2))),\n\t\t\t\ttoGeoJsonCoord = function(coord) {\n\t\t\t\t\treturn [ coord.lng(), coord.lat() ];\n\t\t\t\t},\n\t\t\t\tsplined = GeoUtil.spline(toSpline);\n\t\t\t\n\t\t\tsplined = splined.slice(0, Math.round(splined.length * 2 / 3) - 2);\n\t\n\t\t\tme.map.data.addGeoJson({\n\t\t\t\ttype: 'Feature',\n\t\t\t\tid: result.taskId,\n\t\t\t\tgeometry: {\n\t\t\t\t\ttype: 'Polygon',\n\t\t\t\t\tcoordinates: [\n\t\t\t\t\t\tsplined.concat([ splined[0] ]).map(toGeoJsonCoord)\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tproperties: _.defaults({\n\t\t\t\t\tisResult: true,\n\t\t\t\t\tvertices: result.vertices.slice(0)\n\t\t\t\t}, result)\n\t\t\t});\n\t\t};\n\t\n\t\treturn ResultVisualizer;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t\t'use strict';\n\t\n\t\tvar Walk30mUtils = {};\n\t\n\t\tWalk30mUtils.createSummary = function(options) {\n\t\t\treturn _.defaults({\n\t\t\t\toriginAddress: options.address,\n\t\t\t\ttimeExpr: (options.time / 60) + options.timeUnitMinExpr\n\t\t\t}, options);\n\t\t};\n\t\n\t\tWalk30mUtils.encodeResult = function(coords) {\n\t\t\tvar diffSequence = coords.reduce(function(passed, elem) {\n\t\t\t\treturn [\n\t\t\t\t\telem,\n\t\t\t\t\tpassed[1].concat([[\n\t\t\t\t\t\tMath.round(1000000 * (elem.lng - (passed[0] === null? 0: passed[0].lng))),\n\t\t\t\t\t\tMath.round(1000000 * (elem.lat - (passed[0] === null? 0: passed[0].lat)))\n\t\t\t\t\t]])\n\t\t\t\t];\n\t\t\t}, [ null, [] ])[1];\n\t\n\t\t\treturn diffSequence.map(function(s) {\n\t\t\t\treturn [\n\t\t\t\t\ts[0].toString(36),\n\t\t\t\t\ts[1].toString(36)\n\t\t\t\t].join(' ');\n\t\t\t}).join(',')\n\t\t\t\t.replace(/,/g, ' ')\n\t\t\t\t.replace(/\\s/g, '+')\n\t\t\t\t.replace(/\\+\\-/g, '-');\n\t\t};\n\t\n\t\tWalk30mUtils.decodeResult = function(str) {\n\t\t\tvar charSeq = str\n\t\t\t\t.replace(/\\+/g, ' ')\n\t\t\t\t.replace(/\\-/g, ' -')\n\t\t\t\t.split(' ')\n\t\t\t\t.reduce(function(passed, elem) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\tpassed[0] === null? elem: null,\n\t\t\t\t\t\tpassed[0] === null? passed[1]: passed[1].concat([[ passed[0], elem ]])\n\t\t\t\t\t]\n\t\t\t\t}, [ null, [] ])[1];\n\t\t\t\n\t\t\treturn charSeq.reduce(function(passed, elem) {\n\t\t\t\tvar x = parseInt(elem[0], 36) / 1000000,\n\t\t\t\t\ty = parseInt(elem[1], 36) / 1000000;\n\t\t\t\t\t\n\t\t\t\treturn [\n\t\t\t\t\t[ x, y ],\n\t\t\t\t\tpassed\n\t\t\t\t\t\t? passed[1].concat([ { lat: passed[0][1] + y, lng: passed[0][0] + x } ])\n\t\t\t\t\t\t: [ { lat: y, lng: x } ]\n\t\t\t\t];\n\t\t\t}, null)[1];\n\t\t};\n\t\n\t\tWalk30mUtils.createSharedURI = function(feature) {\n\t\t\treturn _.template('https://walk30m.com?path={{path}}')({\n\t\t\t\tpath: Walk30mUtils.encodeResult(_.collect(feature.getProperty('vertices'), 'endLocation').map(function(latLng) {\n\t\t\t\t\treturn { lat: latLng.lat(), lng: latLng.lng() };\n\t\t\t\t}))\n\t\t\t});\n\t\t};\n\t\n\t\treturn Walk30mUtils;\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** 1.app.js\n **/","module.exports = window;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"window\"\n ** module id = 1\n ** module chunks = 1\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 2\n ** module chunks = 1\n **/","module.exports = _;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 3\n ** module chunks = 1\n **/","define([\n\t'resources/js/dev/CalculationService.js',\n\t'resources/js/dev/Logger.js',\n\t'resources/js/dev/GeoUtil.js',\n\t'resources/js/dev/AdvancedSettingsController.js',\n\t'resources/js/dev/ProgressBar.js',\n\t'resources/js/dev/MapController.js',\n\t'resources/js/dev/InputController.js'\n], function(\n\tCalculationService,\n\tLogger,\n\tGeoUtil,\n\tAdvancedSettingsController,\n\tProgressBar,\n\tMapController,\n\tInputController) {\n\t\n\tfunction Application($el) {\n\t\tvar me = this,\n\t\t\tstartDate = new Date();\n\t\t\n\t\tme.messages = window.messages;\n\t\tme.$el = $el;\n\t\tme.$page = $('html,body');\n\t\tme.$gotoTopBtn = $el.find('.btn[role=goto-top]');\n\t\tme.$execBtn = $el.find('.btn[role=execute]');\n\t\tme.$cancelBtn = $el.find('#control span[role=cancel]');\n\t\tme.$sendMsgBtn = $el.find('.btn[role=send-message]');\n\t\tme.$goToAboutLink = $el.find('a[href=#about]');\n\t\tme.$message = $el.find('#message textarea');\n\t\tme.$goToAdvancedSettingsLink = $el.find('a[href=#advanced-settings]');\n\t\tme.calcService = new CalculationService();\n\t\tme.logger = new Logger(me.calcService);\n\t\tme.advancedSettingsController = new AdvancedSettingsController($el.find('#advanced-settings'));\n\t\n\t\t$el.find('#extra').css({ top: Math.min($(window).height(), 700) + 'px' });\n\t\tme.initEvents();\n\n\t\t$.get('https://hotsh9cqva.execute-api.ap-northeast-1.amazonaws.com/develop/client_location').done(function(data) {\n\t\t\tme.mapController = new MapController(me, $el.find('#map-wrapper'), {\n\t\t\t\tcenter: new google.maps.LatLng(data.lat, data.lng)\n\t\t\t});\n\t\t\tme.inputController = new InputController(\n\t\t\t\tme,\n\t\t\t\t$el.find('#control'),\n\t\t\t\tme.mapController\n\t\t\t);\n\t\t\tme.progressBar = new ProgressBar($el.find('#progressbar'));\n\t\t\tconsole.log('Application: initialized', new Date() - startDate);\n\t\t}).fail(function(err) {\n\t\t\twindow.alert(err);\n\t\t});\n\n\t}\n\t\n\tApplication.prototype.initEvents = function() {\n\t\tvar me = this;\n\n\t\tme.calcService.addListener('complete', _.bind(me.onCompleteCalculation, me));\n\t\tme.calcService.addListener('progress', _.bind(me.onProgressCalculation, me));\n\t\tme.calcService.addListener('warn', _.bind(me.onWarning, me));\n\n\t\tme.$goToAboutLink.click(_.bind(me.onClickGoToAboutBtn, me));\n\t\tme.$goToAdvancedSettingsLink.click(_.bind(me.onClickGoToAdvancedSettingsBtn, me));\n\t\tme.$el.scroll(_.bind(me.onScroll, me));\n\t\tme.$gotoTopBtn.click(_.bind(me.scrollToTop, me));\n\t\tme.$sendMsgBtn.click(_.bind(me.onClickSendMsgBtn, me));\n\t\tme.$execBtn.click(_.bind(me.startCalculation, me));\n\t\tme.$cancelBtn.click(_.bind(me.viewMap, me));\n\t\tme.scrollToTop();\n\t};\n\n\tApplication.prototype.viewMap = function() {\n\t\tvar me = this;\n\n\t\tme.inputController.togglePanel(false);\n\t\tme.mapController.startView(function() {\n\t\t\tme.inputController.togglePanel(true);\n\t\t});\n\t};\n\n\tApplication.prototype.onProgressCalculation = function(percent, vertices) {\n\t\tvar me = this;\n\n\t\tme.progressBar.update(percent);\n\t};\n\n\tApplication.prototype.onWarning = function(message) {\n\t\tvar me = this;\n\n\t\tif (window.confirm(me.getMessage('askIfReload'))) {\n\t\t\twindow.location.reload();\n\t\t}\n\t};\n\n\tApplication.prototype.onCompleteCalculation = function(vertices) {\n\t\tvar me = this;\n\n\t\tme.progressBar.update(100);\n\t};\n\n\tApplication.prototype.onScroll = _.throttle(function() {\n\t\tvar me = this;\n\n\t\tif (me.$el.scrollTop() > 0) {\n\t\t\tme.$gotoTopBtn.fadeIn();\n\t\t} else {\n\t\t\tme.$gotoTopBtn.fadeOut();\n\t\t}\n\t}, 100);\n\n\tApplication.prototype.onClickGoToAdvancedSettingsBtn = function(ev) {\n\t\tvar me = this;\n\n\t\tev.preventDefault();\n\t\tme.$page.animate({\n\t\t\tscrollTop: me.$el.find('#advanced-settings').offset().top + 'px'\n\t\t}, undefined, 'swing');\n\t};\n\n\tApplication.prototype.onClickGoToAboutBtn = function(ev) {\n\t\tvar me = this;\n\n\t\tev.preventDefault();\n\t\tme.$page.animate({\n\t\t\tscrollTop: me.$el.find('#about').offset().top + 'px'\n\t\t}, undefined, 'swing');\n\t};\n\n\tApplication.prototype.onClickSendMsgBtn = function() {\n\t\tvar me = this,\n\t\t\tmessage = me.$el.find('#message textarea').val();\n\n\t\tif (message) {\n\t\t\tme.$sendMsgBtn.addClass('disabled');\n\t\t\tme.sendMessage(message).then(function() {\n\t\t\t\t\t_.delay(function() {\n\t\t\t\t\t\tme.$sendMsgBtn.removeClass('disabled');\n\t\t\t\t\t}, 500);\n\t\t\t});\n\t\t} else {\n\t\t\twindow.alert(me.getMessage('contact'));\n\t\t}\n\t};\n\n\tApplication.prototype.scrollToTop = function(callback) {\n\t\tvar me = this,\n\t\t\tfired = false;\n\n\t\tme.$gotoTopBtn.blur();\n\t\tme.$page.animate({ scrollTop: '0px' }, undefined, function() {\n\t\t\t// this event fires twice, for the fact that\n\t\t\t// the selector for me.$page matches two elements: html and body.\n\t\t\tif (!fired && _.isFunction(callback)) {\n\t\t\t\tfired = true;\n\t\t\t\tcallback();\n\t\t\t}\n\t\t});\n\t};\n\n\tApplication.prototype.sendMessage = function(message) {\n\t\tvar me = this;\n\n\t\treturn $.ajax({\n\t\t\ttype: 'POST',\n\t\t\turl: '/api/messages',\n\t\t\tcontentType: 'application/json; charset=utf-8',\n\t\t\tdata: JSON.stringify({\n\t\t\t\tmessage: message,\n\t\t\t\turl: window.location.href\n\t\t\t})\n\t\t}).done(function() {\n\t\t\twindow.alert(me.getMessage('thanks'));\n\t\t}).fail(function() {\n\t\t});\n\t};\n\n\tApplication.prototype.compareGeocoderResultsByDistance = function(r1, r2) {\n\t\tvar me = this,\n\t\t\tcenter = me.mapController.map.getCenter();\n\t\t\tloc1 = r1.geometry.location,\n\t\t\tloc2 = r2.geometry.location,\n\t\t\tr1Dist = Math.pow(loc1.lat() - center.lat(), 2) + Math.pow(loc1.lng() - center.lng(), 2),\n\t\t\tr2Dist = Math.pow(loc2.lat() - center.lat(), 2) + Math.pow(loc2.lng() - center.lng(), 2);\n\n\t\t\treturn r1Dist > r2Dist? 1: -1;\n\t};\n\n\tApplication.prototype.startCalculation = function() {\n\t\tvar me = this,\n\t\t\tsettings = _.defaults(\n\t\t\t\tme.inputController.getValues(),\n\t\t\t\tme.advancedSettingsController.getValues());\n\n\t\tme.scrollToTop(function() {\n\t\t\tif (settings.origin) {\n\t\t\t\tme.doCalculation(settings);\n\t\t\t} else if (settings.address) {\n\t\t\t\tnew google.maps.Geocoder().geocode({\n\t\t\t\t\taddress: settings.address\n\t\t\t\t}, function(results, status) {\n\t\t\t\t\tvar sortedResults = results.sort(_.bind(me.compareGeocoderResultsByDistance, me));\n\n\t\t\t\t\tif (status === google.maps.GeocoderStatus.ZERO_RESULTS) {\n\t\t\t\t\t\twindow.alert(me.getMessage('geocoderResultNotFound'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} else if (status !== google.maps.GeocoderStatus.OK) {\n\t\t\t\t\t\twindow.alert(status);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tme.doCalculation(_.defaults({\n\t\t\t\t\t\torigin: sortedResults[0].geometry.location,\n\t\t\t\t\t\taddress: GeoUtil.trimeGeocoderAddress(sortedResults[0].formatted_address),\n\t\t\t\t\t\tkeyword: settings.address\n\t\t\t\t\t}, settings));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\twindow.alert(me.getMessage('originLocationIsRequired'));\n\t\t\t\tme.inputController.$location.focus();\n\t\t\t}\n\t\t});\n\t};\n\n\tApplication.prototype.onExitCalculation = function(complete) {\n\t\tvar me = this;\n\n\t\tme.inputController.togglePanel(true);\n\t\tme.calcService.stop();\n\t\tme.progressBar.finalize();\n\t\tif (complete) {\n\t\t\tme.$cancelBtn.show();\n\t\t}\n\t};\n\n\tApplication.prototype.doCalculation = function(settings) {\n\t\tvar me = this;\n\n\t\tme.inputController.togglePanel(false);\n\t\tme.progressBar.update(0);\n\t\tme.calcService.start(_.defaults(settings, {\n\t\t\tanglePerStep: ({\n\t\t\t\tSPEED: 20,\n\t\t\t\tBALANCE: 10,\n\t\t\t\tPRECISION: 5\n\t\t\t})[settings.preference]\n\t\t}));\n\n\t\tme.mapController.startCalculation(me.calcService, _.bind(me.onExitCalculation, me));\n\t};\n\n\tApplication.prototype.startEditMessage = function(message) {\n\t\tvar me = this;\n\n\t\tme.$message.val(message);\n\t\tme.$page.animate({\n\t\t\tscrollTop: me.$el.find('#message').offset().top + 'px'\n\t\t}, undefined, 'swing');\n\t\tme.$message.focus();\n\t\tif (message) {\n\t\t\tme.$message.attr('rows', 10);\n\t\t}\n\t};\n\n\tApplication.prototype.getMessage = function(code) {\n\t\tvar me = this;\n\n\t\treturn me.messages[code];\n\t};\n\n\treturn Application;\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/Application.js\n ** module id = 4\n ** module chunks = 1\n **/","define([\r\n\t'resources/js/dev/Calculation.js',\r\n\t'resources/js/dev/GeoUtil'\r\n], function(Calculation, GeoUtil) {\r\n\t'use strict';\r\n\tvar twicePI = 2 * Math.PI;\r\n\r\n\tfunction CalculationService() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.directionsService = new google.maps.DirectionsService();\r\n\t\tme.isRunning = false;\r\n\t}\r\n\r\n\tCalculationService.prototype = new google.maps.MVCObject();\r\n\r\n\tCalculationService.prototype.calcRoute = function(dest, callback, successiveRateLimitCount) {\r\n\t\tvar me = this,\r\n\t\t\ttask = me.currentTask,\r\n\t\t\tconfig, options;\r\n\r\n\t\tif (!task) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconfig = task.config;\r\n\t\toptions = _.pick(config, 'origin', 'avoidFerries', 'avoidTolls', 'avoidHighways');\r\n\r\n\t\tgoogle.maps.event.trigger(me, 'request', dest);\r\n\t\tconsole.log('CalculationService: do directions request', options.origin.toString(), dest.toString());\r\n\r\n\t\tme.directionsService.route(_.defaults({\r\n\t\t\tdestination: dest,\r\n\t\t\ttravelMode: google.maps.TravelMode[config.mode],\r\n\t\t}, options), function(res, status) {\r\n\r\n\t\t\tif (status !== google.maps.DirectionsStatus.OVER_QUERY_LIMIT) {\r\n\t\t\t\tcallback(res, status);\r\n\r\n\t\t\t} else if (successiveRateLimitCount < 3) {\r\n\t\t\t\t_.delay(function() {\r\n\t\t\t\t\tme.calcRoute(dest, callback, ++successiveRateLimitCount);\r\n\t\t\t\t}, successiveRateLimitCount * 2000);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tgoogle.maps.event.trigger(me, 'warn', 'FREQUENT_OVER_QUERY_LIMIT');\r\n\t\t\t\tme.calcRoute(dest, callback, 0);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tCalculationService.prototype.calcNext = function(dest, isNarrowing) {\r\n\t\tvar me = this;\r\n\r\n\t\tfunction tryDispatch(res, status) {\r\n\t\t\tif (me.isPausing) {\r\n\t\t\t\t_.delay(function() { tryDispatch(res, status); }, 100);\r\n\t\t\t} else {\r\n\t\t\t\tme.dispatch(res, status, {\r\n\t\t\t\t\tdestination: dest,\r\n\t\t\t\t\tisNarrowing: isNarrowing\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tme.calcRoute(dest, function(res, status) {\r\n\t\t\tif (me.isRunning) {\r\n\t\t\t\ttryDispatch(res, status);\r\n\t\t\t}\r\n\t\t}, 0);\r\n\t};\r\n\r\n\tCalculationService.prototype.stopMonitorVelocity= function(task) {\r\n\t\tif (task.timeout) {\r\n\t\t\twindow.clearInterval(task.timeout);\r\n\t\t\tdelete task.timeout;\r\n\t\t}\r\n\t};\r\n\r\n\tCalculationService.prototype.startMonitorVelocity= function(task, initialDelay, interval) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (task.timeout) {\r\n\t\t\tconsole.log('CalculationService: already monitoring', task);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttask.timeConsumed = 0;\r\n\t\t_.delay(function() {\r\n\t\t\ttask.timeout = window.setInterval(function() {\r\n\t\t\t\tif (!me.isRunning) {\r\n\t\t\t\t\tme.stopMonitorVelocity(task);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar velocity = task.getVelocity();\r\n\r\n\t\t\t\tconsole.log('CalculationService: current velocity: ', velocity);\r\n\r\n\t\t\t\tif (velocity < 1) {\r\n\t\t\t\t\tgoogle.maps.event.trigger(me, 'warn', 'CALCULATION_IS_GETTING_SLOWER');\r\n\t\t\t\t}\r\n\t\t\t}, interval);\r\n\t\t}, initialDelay);\r\n\t};\r\n\r\n\tCalculationService.prototype.start = function(request) {\r\n\t\tvar me = this,\r\n\t\t\ttask = new Calculation(request),\r\n\t\t\torigin = request.origin;\r\n\r\n\t\ttask.addListener('progress', function(progress, added, goals) {\r\n\t\t\tgoogle.maps.event.trigger(me, 'progress', progress, added, goals);\r\n\t\t});\r\n\r\n\t\tme.startMonitorVelocity(task, 5000, 1000);\r\n\r\n\t\tme.currentTask = task;\r\n\t\tme.isPausing = false;\r\n\t\tme.isRunning = true;\r\n\t\tme.calcNext(new google.maps.LatLng(\r\n\t\t\torigin.lat(),\r\n\t\t\torigin.lng() + GeoUtil.meterToLng(100, origin.lat())\r\n\t\t));\r\n\r\n\t\tgoogle.maps.event.trigger(me, 'start', task);\r\n\t\treturn task;\r\n\t};\r\n\r\n\tCalculationService.prototype.walkToFillSecondsAlong = function(sec, wayPoints) {\r\n\r\n\t\tfunction getPartial(step, ratio) {\r\n\t\t\tvar len = 0, lat_lngs = [],\r\n\t\t\t\tlimited_length = _.reduce(step.lat_lngs, function(passed, v, idx, arr) {\r\n\t\t\t\t\treturn idx === arr.length - 1? passed: passed + GeoUtil.distance(v, arr[idx + 1]);\r\n\t\t\t\t}, 0) * ratio;\r\n\t\t\t\r\n\t\t\t_.each(step.lat_lngs, function(pos, idx, arr) {\r\n\t\t\t\tif (idx === 0 || (len += GeoUtil.distance(pos, arr[idx - 1])) <= limited_length) {\r\n\t\t\t\t\tlat_lngs.push(pos);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn lat_lngs;\r\n\t\t}\r\n\r\n\t\treturn _.reduce(wayPoints, function(passed, step) {\r\n\t\t\tvar next_accum;\r\n\t\t\t\r\n\t\t\tif (passed && passed.end_flag) {\r\n\t\t\t\treturn passed;\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tnext_accum = (passed? passed.accum: 0) + step.duration.value;\r\n\t\t\t\tif (next_accum > sec) {\r\n\t\t\t\t\tstep.lat_lngs = getPartial(step, 1 - (next_accum - sec) / step.duration.value);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tstep.accum = next_accum;\r\n\t\t\t\tstep.end_flag = next_accum > sec;\r\n\t\t\t\tstep.concat_path = ((passed && passed.concat_path) || []).concat(step.lat_lngs);\r\n\t\t\t\treturn step;\r\n\t\t\t}\r\n\t\t}, null);\r\n\t};\r\n\r\n\tCalculationService.prototype.stop = function() {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.isRunning = false;\r\n\t\tme.stopMonitorVelocity(me.currentTask);\r\n\t\tdelete me.currentTask;\r\n\t};\r\n\r\n\tCalculationService.prototype.pause = function() { this.isPausing = true; };\r\n\r\n\tCalculationService.prototype.resume = function() { this.isPausing = false; };\r\n\r\n\tCalculationService.prototype.willBeCompletedWith = function(wayPoint) {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\treturn me.currentTask.isComplete(me.currentTask.getGoals().concat(wayPoint));\r\n\t};\r\n\r\n\tCalculationService.prototype.getAdvancedOne = function(task, p1, p2) {\r\n\t\tvar origin = task.config.origin;\r\n\r\n\t\treturn GeoUtil.calcAngle(origin, p1) <= GeoUtil.calcAngle(origin, p2)\r\n\t\t\t? p2\r\n\t\t\t: p1;\r\n\t};\r\n\r\n\tCalculationService.prototype.dispatch = function(response, status, request) {\r\n\t\tvar leg, lastWayPoint, step,\r\n\t\t\tme = this,\r\n\t\t\tdest = request.destination,\r\n\t\t\ttask = me.currentTask,\r\n\t\t\tsec = task.config.time,\r\n\t\t\tcenter = task.config.origin,\r\n\t\t\tanglePerStep = task.config.anglePerStep,\r\n\t\t\tnextDest, sameLocation, rotateBase;\r\n\t\t\r\n\t\tif (status === google.maps.DirectionsStatus.ZERO_RESULTS) {\r\n\t\t\tnextDest = GeoUtil.divide(center, dest, 0.8);\r\n\t\t\tme.calcNext(nextDest, true);\r\n\t\t\r\n\t\t} else if (status !== google.maps.DirectionsStatus.OK) {\r\n\t\t\tgoogle.maps.event.trigger(me, 'error', status);\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\tleg = response.routes[0].legs[0];\r\n\t\t\t\r\n\t\t\tif (leg.duration.value > sec * 1.2) {\r\n\t\t\t\tnextDest = GeoUtil.divide(center, dest, 0.8);\r\n\t\t\t\tme.calcNext(nextDest, true);\r\n\t\t\r\n\t\t\t} else if (!request.isNarrowing && leg.duration.value < sec) {\r\n\t\t\t\tnextDest = GeoUtil.divide(center, dest, Math.max(1.1, sec / leg.duration.value));\r\n\r\n\t\t\t\tif (me.getAdvancedOne(task, dest, nextDest) === dest) {\r\n\t\t\t\t\tnextDest = GeoUtil.rotate(center, nextDest, anglePerStep);\r\n\t\t\t\t}\r\n\t\t\t\tme.calcNext(nextDest);\r\n\t\t\t\t\r\n\t\t\t} else if (step = me.walkToFillSecondsAlong(sec, leg.steps)) {\r\n\t\t\t\tlastWayPoint = step.lat_lngs[step.lat_lngs.length - 1];\r\n\t\t\t\t\r\n\t\t\t\tif (task.hasVisited(lastWayPoint)) {\r\n\t\t\t\t\tnextDest = GeoUtil.divide(center, GeoUtil.rotate(center, dest, 3), 0.8);\r\n\t\t\t\t\tme.calcNext(nextDest, true);\r\n\t\t\t\t\t\r\n\t\t\t\t} else if (me.willBeCompletedWith(lastWayPoint)) {\r\n\t\t\t\t\tme.isRunning = false;\r\n\t\t\t\t\tgoogle.maps.event.trigger(me, 'complete', task.vertices, task);\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.vertices.push({\r\n\t\t\t\t\t\tendLocation: lastWayPoint,\r\n\t\t\t\t\t\tstep: step,\r\n\t\t\t\t\t\tdirectionResult: response\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnextDest = GeoUtil.rotate(center, me.getAdvancedOne(task, lastWayPoint, dest), anglePerStep);\r\n\t\t\t\t\tme.calcNext(nextDest);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tgoogle.maps.event.trigger(me, 'error');\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\treturn CalculationService;\r\n});\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/CalculationService.js\n ** module id = 5\n ** module chunks = 1\n **/","define([\n], function() {\n\tvar endPoint = 'https://hotsh9cqva.execute-api.ap-northeast-1.amazonaws.com/develop/execution_log/';\n\n\tfunction Logger(calcService) {\n\t\tvar me = this;\n\n\t\tme.calcService = calcService;\n\t\tme.executions = {};\n\n\t\tcalcService.addListener('start', _.bind(me.onStart, me));\n\t\tcalcService.addListener('complete', _.bind(me.onComplete, me));\n\t}\n\n\tLogger.prototype.onComplete = function(vertices, task) {\n\t\tvar me = this,\n\t\t\ttaskId = task.taskId;\n\n\t\t$.ajax({\n\t\t\turl: endPoint + taskId,\n\t\t\ttype: 'PUT',\n\t\t\tdataType: 'json',\n\t\t\tcontentType: 'application/json; charset=utf-8',\n\t\t\tdata: JSON.stringify(_.defaults({\n\t\t\t\tcomplete_datetime: new Date().toISOString(),\n\t\t\t\textra_info: _.map(_.collect(vertices.getArray(), 'endLocation'), function(latLng) {\n\t\t\t\t\treturn { lat: latLng.lat(), lng: latLng.lng() };\n\t\t\t\t})\n\t\t\t}, me.executions[taskId]))\n\t\t})\n\t};\n\n\tLogger.prototype.collectClientInfo = function() {\n\t\tvar $win = $(window);\n\n\t\treturn {\n\t\t\turl: window.location.href,\n\t\t\tviewport: [ $win.width(), $win.height() ]\n\t\t};\n\t};\n\n\tLogger.prototype.onStart = function(task) {\n\t\tvar me = this,\n\t\t\trequest = task.config,\n\t\t\tcenter = request.origin,\n\t\t\tdata = _.defaults({\n\t\t\t\tstart_datetime: new Date().toISOString(),\n\t\t\t\torigin_address: task.address,\n\t\t\t\torigin_latitude: center.lat(),\n\t\t\t\torigin_longitude: center.lng(),\n\t\t\t\ttravel_mode: task.mode,\n\t\t\t\tavoid_ferries: request.avoidFerries? 1: 0,\n\t\t\t\tavoid_tolls: request.avoidTolls? 1: 0,\n\t\t\t\tavoid_highways: request.avoidHighways? 1: 0,\n\t\t\t\ttravel_time_sec: task.time,\n\t\t\t\tquery: request.keyword\n\t\t\t}, me.collectClientInfo());\n\n\t\t$.ajax({\n\t\t\turl: endPoint,\n\t\t\ttype: 'POST',\n\t\t\tdataType: 'json',\n\t\t\tcontentType: 'application/json; charset=utf-8',\n\t\t\tdata: JSON.stringify(data)\n\t\t}).done(function(res) {\n\t\t\tme.executions[res.uuid] = _.defaults({\n\t\t\t\tuuid: res.uuid\n\t\t\t}, data);\n\n\t\t\ttask.taskId = res.uuid;\n\t\t});\n\t};\n\n\treturn Logger;\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/Logger.js\n ** module id = 6\n ** module chunks = 1\n **/","define([\r\n], function() {\r\n\t'use strict';\r\n\r\n\tvar GeoUtil = {};\r\n\r\n\tGeoUtil.trimGeocoderAddress = function(raw) {\r\n\t\treturn raw.replace(/^[^]*[\\d\\-\\s]+/, '');\r\n\t};\r\n\r\n\tGeoUtil.spline = function(path) {\r\n\t\tvar coords = _.map(path.concat(path[0]), function(s) {\r\n\t\t\treturn [ s.lat(), s.lng() ];\r\n\t\t}),\r\n\t\tpoints = _.range(0, path.length),\r\n\t\tsamples = _.range(0, path.length, 0.1);\r\n\t\t\r\n\t\treturn _.map(numeric.spline(points, coords).at(samples), function(s) {\r\n\t\t\treturn new google.maps.LatLng(s[0], s[1]);\r\n\t\t});\r\n\t};\r\n\r\n\tGeoUtil.lngToMeter = function(lng, lat) {\r\n\t\tvar R = 40000; // \r\n\t\treturn R * 1000 * Math.cos(2 * Math.PI * lat / 360) * lng / 360;\r\n\t};\r\n\r\n\tGeoUtil.meterToLng = function(meter, lat) {\r\n\t\tvar R = 40000; // \r\n\t\treturn meter * 360 / (R * 1000 * Math.cos(2 * Math.PI * lat / 360));\r\n\t};\r\n\r\n\tGeoUtil.distance = function(p1, p2) {\r\n\t\tvar modLng = Math.cos(2 * Math.PI * p1.lat() / 360);\r\n\t\t\r\n\t\treturn Math.sqrt(Math.pow(p1.lat() - p2.lat(), 2) + Math.pow((p1.lng() - p2.lng()) * modLng, 2));\r\n\t};\r\n\r\n\tGeoUtil.divide = function(p1, p2, r) {\r\n\t\treturn new google.maps.LatLng(\r\n\t\t\tp1.lat() + (p2.lat() - p1.lat()) * r,\r\n\t\t\tp1.lng() + (p2.lng() - p1.lng()) * r\r\n\t\t);\r\n\t};\r\n\r\n\tGeoUtil.getInclusionBounds = function(path) {\r\n\t\tvar delta = 0.00001;\r\n\t\t\r\n\t\treturn _.reduce(path, function(passed, pos) {\r\n\t\t\tif (passed === null) {\r\n\t\t\t\treturn new google.maps.LatLngBounds(\r\n\t\t\t\t\tpos,\r\n\t\t\t\t\tnew google.maps.LatLng(pos.lat() + delta, pos.lng() + delta)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn passed.extend(pos);\r\n\t\t\t}\r\n\t\t}, null);\r\n\t};\r\n\r\n\tGeoUtil.getGravityCenter = function(path) {\r\n\t\tvar len = path.length;\r\n\t\t\r\n\t\treturn new google.maps.LatLng(\r\n\t\t\t_.reduce(path, function(passed, val) { return passed + val.lat(); }, 0) / len,\r\n\t\t\t_.reduce(path, function(passed, val) { return passed + val.lng(); }, 0) / len\r\n\t\t);\r\n\t};\r\n\r\n\tGeoUtil.isContained = function(point, path) {\r\n\t\tvar vertices = _.map(path, function(pos, idx) {\r\n\t\t\t\treturn [ pos, path[(idx + 1) % path.length] ];\r\n\t\t\t}),\r\n\t\t\tcrossingVertices = _.filter(vertices, function(vertex) {\r\n\t\t\t\tvar r = (vertex[0].lng() - point.lng()) / (vertex[0].lng() - vertex[1].lng()),\r\n\t\t\t\t\tcrossPtLat = r * vertex[1].lat() + (1 - r) * vertex[0].lat();\r\n\t\t\t\t\r\n\t\t\t\treturn crossPtLat >= point.lat()\r\n\t\t\t\t\t&& (vertex[0].lng() - point.lng()) * (vertex[1].lng() - point.lng()) <= 0;\r\n\t\t\t});\r\n\t\t\r\n\t\treturn crossingVertices.length % 2 === 1;\r\n\t};\r\n\r\n\t/*\r\n\tpath=[\r\n\t\tnew google.maps.LatLng(1,1),\r\n\t\tnew google.maps.LatLng(2,4),\r\n\t\tnew google.maps.LatLng(4,1),\r\n\t\tnew google.maps.LatLng(2,0)\r\n\t]\r\n\t*/\r\n\r\n\tGeoUtil.calcAngle = function(origin, p) {\r\n\t\tvar modLng = Math.cos(2 * Math.PI * origin.lat() / 360),\r\n\t\t\ttheta = Math.atan((p.lat() - origin.lat()) / ((p.lng() - origin.lng()) * modLng));\r\n\t\t\r\n\t\tif (p.lat() - origin.lat() > 0 && theta < 0) { theta += Math.PI; }\r\n\t\tif (p.lat() - origin.lat() < 0 && p.lng() - origin.lng() < 0) { theta += Math.PI; }\r\n\t\tif (p.lat() - origin.lat() < 0 && p.lng() - origin.lng() >= 0) { theta += 2 * Math.PI; }\r\n\t\t\r\n\t\treturn theta;\r\n\t};\r\n\r\n\tGeoUtil.rotate = function(center, prevPoint, degree) {\r\n\t\tvar radius = GeoUtil.distance(center, prevPoint),\r\n\t\t\tmodLng = Math.cos(2 * Math.PI * center.lat() / 360),\r\n\t\t\tphi = GeoUtil.calcAngle(center, prevPoint) + degree * 2 * Math.PI / 360;\r\n\t\t\r\n\t\treturn new google.maps.LatLng(\r\n\t\t\tcenter.lat() + radius * Math.sin(phi),\r\n\t\t\tcenter.lng() + radius * Math.cos(phi) / modLng\r\n\t\t);\r\n\t};\r\n\r\n\treturn GeoUtil;\r\n});\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/GeoUtil.js\n ** module id = 7\n ** module chunks = 1\n **/","define([\n], function() {\n\tfunction AdvancedSettingsController($el) {\n\t\tvar me = this;\n\n\t\tme.$el = $el;\n\t\tme.$prefs = $el.find('input[name=preference]');\n\t\tme.$optTolls = $el.find('#option_tolls');\n\t\tme.$optHighways = $el.find('#option_highways');\n\t\tme.$optFerries = $el.find('#option_ferries');\n\t\tme.$initializeBtn = $el.find('.btn[role=initialize]');\n\t\tme.defaultSettings = {\n\t\t\tpreference: me.$prefs.filter(':checked').val(),\n\t\t\ttolls: me.$optTolls.is(':checked'),\n\t\t\thighways: me.$optHighways.is(':checked'),\n\t\t\tferries: me.$optFerries.is(':checked')\n\t\t};\n\n\t\tme.$initializeBtn.click(_.bind(me.initialize, me));\n\t}\n\n\tAdvancedSettingsController.prototype.initialize = function() {\n\t\tvar me = this,\n\t\t\tradios = {\n\t\t\t\t'$optTolls': me.defaultSettings.tolls,\n\t\t\t\t'$optHighways': me.defaultSettings.highways,\n\t\t\t\t'$optFerries': me.defaultSettings.ferries\n\t\t\t};\n\n\t\tme.$prefs.removeProp('checked');\n\t\tme.$prefs.filter('[value=' + me.defaultSettings.preference + ']').prop('checked', 'checked');\n\t\tfor (p in radios) {\n\t\t\tif (radios.hasOwnProperty(p)) {\n\t\t\t\tif (radios[p]) {\n\t\t\t\t\tme[p].prop('checked', 'checked');\n\t\t\t\t} else {\n\t\t\t\t\tme[p].removeAttr('checked');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tAdvancedSettingsController.prototype.getValues = function() {\n\t\tvar me = this;\n\n\t\treturn {\n\t\t\tavoidFerries: !me.$optFerries.is(':checked'),\n\t\t\tavoidHighways: !me.$optHighways.is(':checked'),\n\t\t\tavoidTolls: !me.$optTolls.is(':checked'),\n\t\t\tpreference: me.$prefs.filter(':checked').val()\n\t\t};\n\t};\n\n\treturn AdvancedSettingsController;\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/AdvancedSettingsController.js\n ** module id = 8\n ** module chunks = 1\n **/","define([\n], function() {\n\tfunction ProgressBar($el) {\n\t\tthis.$el = $el;\n\t\t$el.append('<div class=\"progress\"><div class=\"inner\"></div></div>');\n\t}\n\n\tProgressBar.prototype.finalize = _.debounce(function() {\n\t\tvar me = this;\n\n\t\tme.$el.fadeOut(undefined, function() {\n\t\t\tme.$el.find('.progress').css({ width: 0 });\n\t\t});\n\t}, 1000);\n\n\tProgressBar.prototype.update = _.throttle(function(percent) {\n\t\tvar $el = this.$el,\n\t\t\tme = this;\n\n\t\tif ($el.is(':visible')) {\n\t\t\t$el.find('.progress').animate({ width: percent + '%' }, 1000, function() {\n\t\t\t\tif (percent === 100) {\n\t\t\t\t\tme.finalize();\t\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t$el.fadeIn(undefined, function() { me.update(percent); });\n\t\t}\n\t}, 1000);\n\n\treturn ProgressBar;\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/ProgressBar.js\n ** module id = 9\n ** module chunks = 1\n **/","define([\n\t'resources/js/dev/GeoUtil.js',\n\t'resources/js/dev/Footprint.js',\n\t'resources/js/dev/ObjectManager.js',\n\t'resources/js/dev/ResultVisualizer.js'\n], function(GeoUtils, Footprint, ObjectManager, ResultVisualizer) {\n\n\tfunction MapController(application, $el, mapOptions) {\n\t\tvar me = this;\n\n\t\tme.$el = $el;\n\t\tme.application = application;\n\t\tme.$centerMarker = $el.find('.center-marker');\n\t\tme.$message = $el.find('.message');\n\t\tme.$determineBtn = $el.find('.btn[role=determine-location]');\n\t\tme.$retryBtn = $el.find('.btn[role=retry]');\n\t\tme.$cancelBtn = $el.find('.btn[role=cancel]');\n\t\tme.footprint = new Footprint();\n\t\tme.map = me.initMap(mapOptions);\n\t\tme.objectManager = new ObjectManager(me.map);\n\t\tme.resultVisualizer= new ResultVisualizer(application, me.map, me.objectManager);\n\t}\n\n\tMapController.prototype.initMap = function(options) {\n\t\treturn new google.maps.Map(this.$el.find('#map-canvas').get(0), _.defaults(options || {}, {\n\t\t\tcenter: new google.maps.LatLng(36, 140),\n\t\t\tzoom: 13,\n\t\t\tzoomControlOptions: {\n\t\t\t\tposition: google.maps.ControlPosition.RIGHT_CENTER\n\t\t\t},\n\t\t\tstreetViewControlOptions: {\n\t\t\t\tposition: google.maps.ControlPosition.RIGHT_CENTER\n\t\t\t}\n\t\t}));\n\t};\n\t\n\tMapController.prototype.hideMessage = function(message) {\n\t\tthis.$message.fadeOut();\n\t};\n\t\n\tMapController.prototype.showMessage = function(message) {\n\t\tthis.$message.text(message).fadeIn();\n\t};\n\n\tMapController.prototype.getMap = function() { return this.map; };\n\n\tMapController.prototype.startCalculation = function(calcService, onExit) {\n\t\tvar me = this,\n\t\t\tcalcMsgTpl = _.template(me.application.getMessage('searching')),\n\t\t\trequest = calcService.currentTask.config,\n\t\t\tlisteners = [];\n\n\t\tfunction onClickRetryBtn() {\n\t\t\tvar isCompleted = !calcService.isRunning;\n\n\t\t\tif (isCompleted || window.confirm(me.application.getMessage('askIfAbort'))) {\n\t\t\t\tme.objectManager.clearObject('inProgress');\n\t\t\t\tme.$retryBtn.hide();\n\t\t\t\tme.hideMessage();\n\t\t\t\tme.footprint.setMap(null);\n\t\t\t\tlisteners.forEach(function(listener) {\n\t\t\t\t\tgoogle.maps.event.removeListener(listener);\n\t\t\t\t});\n\t\t\t\tonExit(isCompleted);\n\t\t\t} else {\n\t\t\t\tme.$retryBtn.off().one('click', onClickRetryBtn);\n\t\t\t}\n\t\t}\n\n\t\tme.resultVisualizer.clearResultDetail();\n\t\tme.showMessage(calcMsgTpl(_.defaults({\n\t\t\tmin: request.time / 60,\n\t\t\ttravelModeExpr: me.application.getMessage('travelModes')[request.mode]\n\t\t}, request)));\n\t\tme.$retryBtn.show();\n\t\tme.$retryBtn.off().one('click', onClickRetryBtn);\n\n\t\tme.footprint.setOptions({ position: request.origin });\n\t\tme.footprint.setMap(me.map);\n\n\t\tlisteners.push(calcService.addListener('progress', _.once(_.bind(me.onInitialProgress, me, calcService))));\n\t\tlisteners.push(calcService.addListener('progress', _.bind(me.onProgress, me, calcService)));\n\t\tlisteners.push(calcService.addListener('complete', _.bind(me.onComplete, me, calcService)));\n\n\t\tme.map.panTo(request.origin);\n\t};\n\n\tMapController.prototype.onComplete = function(calcService, vertices, task) {\n\t\tvar me = this;\n\t\t\n\t\tme.objectManager.clearObject('inProgress');\n\t\tme.resultVisualizer.addResult({\n\t\t\ttaskId: task.taskId,\n\t\t\toptions: task.config,\n\t\t\tvertices: vertices.getArray()\n\t\t});\n\t\tme.footprint.stop();\n\t\tme.showMessage(me.application.getMessage('completed'));\n\t\t_.delay(function() {\n\t\t\tme.hideMessage();\n\t\t\tme.footprint.setMap(null);\n\t\t}, 2000);\n\t};\n\n\tMapController.prototype.onProgress = function(calcService, percent, added, endLocations) {\n\t\tvar me = this;\n\n\t\tme.footprint.setAngle(90 - percent * 360 / 100);\n\t\tme.drawArea(endLocations);\n\t};\n\n\tMapController.prototype.onInitialProgress = function(calcService, percent, added, endLocations) {\n\t\tvar me = this,\n\t\t\tcenter = calcService.currentTask.config.origin,\n\t\t\tlatDiff, lngDiff;\n\n\t\tlatDiff = Math.abs(center.lat() - added.endLocation.lat());\n\t\tlngDiff = Math.abs(center.lng() - added.endLocation.lng());\n\t\tme.map.fitBounds({\n\t\t\tnorth: center.lat() + latDiff,\n\t\t\tsouth: center.lat() - latDiff,\n\t\t\teast: center.lng() + lngDiff,\n\t\t\twest: center.lng() - lngDiff\n\t\t});\n\t\tme.map.setZoom(me.map.getZoom() - 1);\n\t};\n\n\tMapController.prototype.drawArea = function(vertices) {\n\t\tvar me = this,\n\t\t\tsplined = GeoUtils.spline(vertices.concat(vertices.slice(0).splice(0, Math.round(vertices.length / 2))));\n\t\t\t\n\t\tme.objectManager.showObject(new google.maps.Polygon({\n\t\t\tpath: splined.splice(0, Math.round(splined.length * 2 / 3) - 2),\n\t\t\tstrokeColor: '#080',\n\t\t\tfillColor: '#080',\n\t\t\tclickable: false,\n\t\t\tstrokeOpacity: 0.7,\n\t\t\tfillOpacity: 0.3,\n\t\t\tzIndex: 100\n\t\t}), null, 'inProgress');\n\t};\n\n\tMapController.prototype.startView = function(callback) {\n\t\tvar me = this;\n\n\t\tme.$retryBtn.show();\n\t\tme.$retryBtn.off().one('click', function() {\n\t\t\tme.$retryBtn.hide();\n\t\t\tcallback();\n\t\t});\n\t};\n\n\tMapController.prototype.specifyLocation = function(callback) {\n\t\tvar me = this,\n\t\t\tdragStartListener;\n\n\t\tfunction hideMessage() {\n\t\t\tme.hideMessage();\n\t\t}\n\n\t\tfunction finalize(latLng) {\n\t\t\tme.$centerMarker.hide();\n\t\t\tme.$determineBtn.hide();\n\t\t\tme.$cancelBtn.hide();\n\t\t\tgoogle.maps.event.removeListener(dragStartListener);\n\t\t\thideMessage();\n\t\t\tcallback(latLng);\n\t\t}\n\n\t\tme.$centerMarker.show();\n\t\tme.$determineBtn.show();\n\t\tme.$cancelBtn.show();\n\t\tme.showMessage(me.application.getMessage('dragMapToSpecifyLocation'));\n\n\t\tdragStartListener = google.maps.event.addListenerOnce(me.map, 'dragstart', hideMessage);\n\n\t\tme.$cancelBtn.off().one('click', function() {\n\t\t\tfinalize();\n\t\t});\n\t\tme.$determineBtn.off().one('click', function() {\n\t\t\tfinalize(me.map.getCenter());\n\t\t});\n\t};\n\n\treturn MapController;\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/MapController.js\n ** module id = 10\n ** module chunks = 1\n **/","define([\n\t'resources/js/dev/GeoUtil.js',\n\t'resources/js/dev/ProgressBar.js'\n], function(GeoUtil, ProgressBar) {\n\tvar minuteArray = _.range(1, 61).concat(_.map(_.range(1, 19), function(n) {\n\t\treturn 60 + n * 10;\n\t})).concat(_.map(_.range(1, 7), function(n) {\n\t\treturn 240 + n * 60;\n\t}));\n\t\n\tfunction initializeScroll() {\n\t\t// correct unnecessary scroll offset caused by software keyboard of iPhone.\n\t\twindow.scrollTo(0, 0);\n\t}\n\n\tfunction InputController(application, $el, mapController) {\n\t\tvar me = this;\n\t\tvar optionTpl = _.template('<option value=\"{{num}}\" {{selected}}>{{num}}</option>');\n\n\t\tme.mapController = mapController;\n\t\tme.application = application;\n\t\tme.getLocationWatchId = null;\n\n\t\tme.$el = $el;\n\t\tme.$selModeList = $el.find('.select');\n\t\tme.$location = $el.find('input[name=location]');\n\t\tme.$time = $el.find('[name=travelTime]');\n\t\tme.$execBtn = $el.find('.btn[role=execute]');\n\t\tme.$cancelBtn = $el.find('.glyphicon[role=cancel]');\n\t\tme.$time.append(_.map(minuteArray, function(n) {\n\t\t\treturn optionTpl({ num: n, selected: n === 30? 'selected': '' });\n\t\t}).join(''));\n\n\t\tme.defaultPlaceholder = me.$location.attr('placeholder');\n\n\t\tif (!window.navigator.geolocation) {\n\t\t\tme.$selModeList.find('[data-selmode=' + me.selMode.CURRENT + ']').addClass('disabled');\n\t\t}\n\n\t\tme.initEvents();\n\t}\n\n\tInputController.prototype.initEvents = function() {\n\t\tvar me = this;\n\n\t\tme.$selModeList.find('li[data-selmode]:not(.disabled)').click(function(ev) {\n\t\t\tvar $target = $(ev.target),\n\t\t\t\t$li = $target.is('li')\n\t\t\t\t\t? $target\n\t\t\t\t\t: $target.parents('li');\n\n\t\t\tme.onSelModeChoosed($li.attr('data-selmode'));\n\t\t}).keydown(_.bind(me.onKeyDownSelModeListItem, me))\n\t\t\t.blur(_.bind(me.onBlurSelModeListItem, me));\n\n\t\tme.$location.focus(function() {\n\t\t\tme.toggleSelModeList(true);\n\t\t});\n\t\tme.$location.blur(_.bind(me.onBlurSelModeListItem, me));\n\t\tme.$location.keydown(_.bind(me.onKeydown, me));\n\t\tme.$location.change(function() {\n\t\t\tme.$location.removeAttr('data-latitude');\n\t\t\tme.$location.removeAttr('data-longitude');\n\t\t});\n\t\tme.$time.blur(initializeScroll);\n\t};\n\t\n\tInputController.prototype.onBlurSelModeListItem= function() {\n\t\tvar me = this;\n\n\t\t_.defer(function() {\n\t\t\tinitializeScroll();\n\t\t\tif (!me.$el.find(':focus').is('li')) {\n\t\t\t\tme.toggleSelModeList(false);\n\t\t\t}\n\t\t});\n\t};\n\n\tInputController.prototype.onKeydown = function(ev) {\n\t\tvar me = this,\n\t\t\t$currentFocus,\n\t\t\t$items;\n\n\t\tif (ev.keyCode === 13) {\n\t\t\t// return\n\t\t\tme.$location.blur();\n\t\t} else if (ev.keyCode === 38 || ev.keyCode === 40) {\n\t\t\t// up or down\n\t\t\t$items = me.$selModeList.find('li');\n\t\t\t$currentFocus = $items.filter(':focus');\n\n\t\t\tme.$location.blur();\n\t\t\t$items.eq(ev.keyCode === 38? $items.length - 1: 0).focus();\n\t\t\tev.preventDefault();\n\n\t\t} else {\n\t\t\tme.updateLocationCombo();\n\t\t}\n\t};\n\n\tInputController.prototype.onKeyDownSelModeListItem = function(ev) {\n\t\tvar me = this,\n\t\t\t$target = $(ev.target),\n\t\t\t$items,\n\t\t\t$li = $target.is('li')\n\t\t\t\t? $target\n\t\t\t\t: $target.parents('li');\n\n\t\tif (ev.keyCode === 13) {\n\t\t\tme.onSelModeChoosed($li.attr('data-selmode'), me.extractSelModeListItemData($li));\n\t\t} else if (ev.keyCode === 38 || ev.keyCode === 40) {\n\t\t\t$items = me.$selModeList.find('li');\n\t\t\t$items.eq(($li.index() + (ev.keyCode === 38? -1: 1)) % $items.length).focus();\n\t\t\tev.preventDefault();\n\t\t}\n\t};\n\n\tInputController.prototype.extractSelModeListItemData = function($item) {\n\t\treturn {\n\t\t\tposition: {\n\t\t\t\tlat: +$item.attr('data-latitude'),\n\t\t\t\tlng: +$item.attr('data-longitude')\n\t\t\t},\n\t\t\taddress: $item.text()\n\t\t};\n\t};\n\n\tInputController.prototype.updateLocationCombo = _.debounce(function() {\n\t\tvar me = this,\n\t\t\tval = me.$location.val(),\n\t\t\tselector = 'li[data-selmode=selmode-geocode]',\n\t\t\ttpl = _.template('<li tabindex=\"-1\" data-selmode=\"selmode-geocode\" data-latitude=\"{{lat}}\" data-longitude=\"{{lng}}\">{{address}}</li>');\n\n\t\tme.$selModeList.find(selector).remove();\n\n\t\tif (!val || val.length < 2) {\n\t\t\treturn;\n\t\t}\n\n\t\tnew google.maps.Geocoder().geocode({\n\t\t\taddress: val\n\t\t}, function(results, status) {\n\t\t\tif (status === google.maps.GeocoderStatus.OK) {\n\t\t\t\tme.$selModeList.prepend(results.slice(0, 3).map(function(result) {\n\t\t\t\t\treturn tpl({\n\t\t\t\t\t\tlat: result.geometry.location.lat(),\n\t\t\t\t\t\tlng: result.geometry.location.lng(),\n\t\t\t\t\t\taddress: GeoUtil.trimGeocoderAddress(result.formatted_address)\n\t\t\t\t\t});\n\t\t\t\t}).join(''));\n\n\t\t\t\tme.$selModeList.find(selector).click(function(ev) {\n\t\t\t\t\tvar $choosed = $(ev.target);\n\n\t\t\t\t\tme.onSelModeChoosed(me.selMode.GEOCODE, me.extractSelModeListItemData($choosed));\n\t\t\t\t}).keydown(_.bind(me.onKeyDownSelModeListItem, me))\n\t\t\t\t\t.blur(_.bind(me.onBlurSelModeListItem, me));\n\t\t\t}\n\t\t});\n\t}, 200);\n\n\tInputController.prototype.selMode = {\n\t\tTEXT: 'selmode-text',\n\t\tMAP: 'selmode-map',\n\t\tCURRENT: 'selmode-current',\n\t\tGEOCODE: 'selmode-geocode'\n\t};\n\n\tInputController.prototype.appendElementToLocationInput = function($el, fix) {\n\t\tvar me = this,\n\t\t\t$loc = me.$location;\n\n\t\tfix = _.defaults(fix || {}, { top: 0, left: 0, width: 0 });\n\n\t\t$el.css({\n\t\t\ttop: (fix.top + $loc.outerHeight()) + 'px',\n\t\t\tleft: (fix.left + Math.round($loc.offset().left - ($loc.outerWidth() - $loc.width()) / 2)) + 'px',\n\t\t\twidth: (fix.width + $loc.outerWidth()) + 'px'\n\t\t});\n\t};\n\n\tInputController.prototype.toggleSelModeList = function(show) {\n\t\tvar me = this,\n\t\t\tisVisible = me.$selModeList.is(':visible'),\n\t\t\tdoShow = !isVisible && (show !== false || show === true),\n\t\t\tdoHide = isVisible && (show === false || show !== true),\n\t\t\tdeferred = new $.Deferred();\n\n\t\tif (doShow) {\n\t\t\tme.appendElementToLocationInput(me.$selModeList, { left: -3 });\n\t\t\tme.$selModeList.fadeIn(undefined, function() {\n\t\t\t\tdeferred.resolve();\n\t\t\t});\n\t\t\t_.delay(function() {\n\t\t\t\tme.$el.one('click', me.__bgClickHandler);\n\t\t\t}, 100);\n\t\t} else if (doHide) {\n\t\t\tme.$selModeList.fadeOut(undefined, function() {\n\t\t\t\tdeferred.resolve();\n\t\t\t});\n\t\t}\n\n\t\treturn deferred.promise();\n\t};\n\n\tInputController.prototype.selectLocationOnMap = function() {\n\t\tvar me = this;\n\n\t\tme.togglePanel(false);\n\t\tme.mapController.specifyLocation(function(loc) {\n\t\t\tme.togglePanel(true);\n\t\t\tif (loc) {\n\t\t\t\tme.setLatLng(loc);\n\t\t\t\tme.$execBtn.focus();\n\t\t\t}\n\t\t});\n\t};\n\n\tInputController.prototype.selectLocationByText = function() {\n\t\tvar me = this;\n\n\t\tme.$location.focus();\n\t};\n\n\tInputController.prototype.applyGeoLocationResult = function() {\n\t\tvar me = this,\n\t\t\t__ = _.bind(me.application.getMessage, me.application);\n\n\t\tif (me.lastGeoLocationResult.code === 1) {\n\t\t\twindow.alert(__('geolocationForbidden'));\n\n\t\t} else if (me.lastGeoLocationResult.code === 2) {\n\t\t\twindow.alert(__('geolocationUnavailable'));\n\n\t\t} else if (me.lastGeoLocationResult.code === 3) {\n\t\t\twindow.alert(__('geolocationFailure'));\n\n\t\t} else if (me.lastGeoLocationResult.coords) {\n\t\t\tcrd = me.lastGeoLocationResult.coords;\n\t\t\tlatLng = new google.maps.LatLng(crd.latitude, crd.longitude);\n\t\t\tme.setLatLng(latLng);\n\t\t\tme.mapController.map.panTo(latLng);\n\n\t\t} else {\n\t\t\twindow.alert(__('geolocationError'));\n\t\t}\n\t};\n\n\tInputController.prototype.selectLocationByGeoLocation = function() {\n\t\tvar me = this,\n\t\t\tcrd, latLng, bar, $bar, initial = false;\n\n\t\tif (me.lastGeoLocationResult) {\n\t\t\tme.$location.attr('placeholder', me.defaultPlaceholder);\n\t\t\tme.applyGeoLocationResult(me.lastGeoLocationResult);\n\t\t\tme.$execBtn.focus();\n\n\t\t} else {\n\t\t\tif (!me.geoLocationWatchId) {\n\t\t\t\tinitial = true;\n\t\t\t\t$bar = me.$location.parent().find('div[role=progressbar]');\n\t\t\t\tbar = new ProgressBar($bar);\n\t\t\t\tme.appendElementToLocationInput($bar, { top: 8, left: 7 });\n\t\t\t\tbar.update(99.9);\n\t\t\t\tme.$location.attr('placeholder', me.application.getMessage('geolocationDetecting'));\n\t\t\t\t_.delay(function() {\n\t\t\t\t\tme.geoLocationWatchId = window.navigator.geolocation.watchPosition(function(pos) {\n\t\t\t\t\t\t// on success\n\t\t\t\t\t\tme.lastGeoLocationResult = pos;\n\t\t\t\t\t\tbar.finalize();\n\t\t\t\t\t}, function(err) {\n\t\t\t\t\t\t// on error\n\t\t\t\t\t\tme.lastGeoLocationResult = err;\n\t\t\t\t\t\tbar.finalize();\n\t\t\t\t\t}, {\n\t\t\t\t\t\tenableHighAccuracy: true,\n\t\t\t\t\t\tmaximumAge: 0,\n\t\t\t\t\t\ttimeout: 5000\n\t\t\t\t\t});\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t\t\n\t\t\t_.delay(function() {\n\t\t\t\tme.selectLocationByGeoLocation();\n\t\t\t}, initial? 500: 100);\n\t\t}\n\t};\n\n\tInputController.prototype.setLatLng = function(loc) {\n\t\tvar me = this;\n\t\n\t\tnew google.maps.Geocoder().geocode({\n\t\t\tlocation: loc\n\t\t}, function(results, status) {\n\t\t\t\tvar filteredResults = results.filter(function(r) {\n\t\t\t\t\t// exclude road name\n\t\t\t\t\treturn !_.contains(r.types, 'route');\n\t\t\t\t});\n\n\t\t\tif (status !== google.maps.GeocoderStatus.OK) {\n\t\t\t\twindow.alert(status);\n\t\t\t\treturn;\n\t\t\t} else if (filteredResults.length === 0) {\n\t\t\t\taddr = '';\n\t\t\t} else {\n\t\t\t\taddr = GeoUtil.trimGeocoderAddress(filteredResults[0].formatted_address);\n\t\t\t}\n\n\t\t\tme.$location.val(addr);\n\t\t\tme.$location.attr('data-latitude', loc.lat());\n\t\t\tme.$location.attr('data-longitude', loc.lng());\n\t\t\tme.$location.blur();\n\t\t});\n\t};\n\n\tInputController.prototype.onSelModeChoosed = function(mode, data) {\n\t\tvar me = this;\n\t\t\n\t\tme.toggleSelModeList(false);\n\n\t\tif (mode === me.selMode.MAP) {\n\t\t\tme.selectLocationOnMap();\n\n\t\t} else if (mode === me.selMode.GEOCODE) {\n\t\t\tme.selectLocationByGeocodeResult(data);\n\n\t\t} else if (mode === me.selMode.TEXT) {\n\t\t\tme.selectLocationByText();\n\n\t\t} else if (mode === me.selMode.CURRENT) {\n\t\t\tme.selectLocationByGeoLocation();\n\t\t}\n\t};\n\n\tInputController.prototype.selectLocationByGeocodeResult = function(data) {\n\t\tvar me = this;\n\n\t\tme.$location.val(data.address);\n\t\tme.$location.attr('data-latitude', data.position.lat);\n\t\tme.$location.attr('data-longitude', data.position.lng);\n\t\tme.$execBtn.focus();\n\t};\n\n\tInputController.prototype.togglePanel = function(show) {\n\t\tvar me = this,\n\t\t\t$header = me.$el.find('#app-header'),\n\t\t\t// isVisible = me.$el.is(':visible'),\n\t\t\tisVisible = me.$el.css('height') !== '50px',\n\t\t\tdoShow = !isVisible && (show !== false),\n\t\t\tdoHide = isVisible && (show !== true);\n\n\t\tif (doShow) {\n\t\t\t// me.$el.fadeIn();\n\t\t\tif (me.isCancellable()) {\n\t\t\t\tme.$cancelBtn.show();\n\t\t\t}\n\t\t\t$header.animate({ padding: '3.6em 0 0 120px', zoom: '100%' });\n\t\t\t$header.find('h1').animate({ marginTop: '1em' });\n\t\t\tme.$el.animate({ height: '100%' });\n\t\t} else if (doHide) {\n\t\t\t// me.$el.fadeOut();\n\t\t\tme.$cancelBtn.hide();\n\t\t\t$header.animate({ padding: '1em 0 0 60px', zoom: '60%' });\n\t\t\t$header.find('h1').animate({ marginTop: '0' });\n\t\t\tme.$el.animate({ height: '50px' });\n\t\t}\n\t};\n\n\tInputController.prototype.isCancellable= function() {\n\t\tvar me = this,\n\t\t\tretVal = false;\n\t\t\n\t\tme.mapController.map.data.forEach(function(feature) {\n\t\t\tif (feature.getProperty('isResult') === true) {\n\t\t\t\tretVal = true;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\treturn retVal;\n\t};\n\n\tInputController.prototype.getValues = function() {\n\t\tvar me = this,\n\t\t\tlatVal = +me.$location.attr('data-latitude'),\n\t\t\tlngVal = +me.$location.attr('data-longitude');\n\n\t\treturn {\n\t\t\taddress: me.$location.val(),\n\t\t\torigin: latVal && lngVal\n\t\t\t\t? new google.maps.LatLng(latVal, lngVal)\n\t\t\t\t: undefined,\n\t\t\ttime: +me.$time.val() * 60,\n\t\t\tmode: me.$el.find('input[name=travelMode]:checked').val()\n\t\t};\n\t};\n\n\treturn InputController;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/InputController.js\n ** module id = 11\n ** module chunks = 1\n **/","define([\n\t'resources/js/dev/GeoUtil'\n], function(GeoUtil) {\n\t'use strict';\n\tvar twicePI = 2 * Math.PI,\n\t\thalfPI = Math.PI / 2;\n\n\tfunction Calculation(request) {\n\t\tvar me = this;\n\n\t\tme.config = request;\n\t\tme.consumedTime = 0;\n\t\tme.vertices = new google.maps.MVCArray();\n\t\t\n\t\tme.vertices.addListener('insert_at', function(n) {\n\t\t\tvar added = me.vertices.getAt(n);\n\t\t\t\n\t\t\tgoogle.maps.event.trigger(me, 'progress', me.getProgress(), added, me.getGoals());\n\t\t});\n\t}\n\n\tCalculation.prototype = new google.maps.MVCObject();\n\n\tCalculation.prototype.getGoals = function() {\n\t\treturn _.collect(this.vertices.getArray(), 'endLocation');\n\t};\n\n\tCalculation.prototype.getProgress = function() {\n\t\tvar me = this;\n\n\t\treturn Math.round(100 * me.accumulateAngles(me.getGoals()) / twicePI);\n\t};\n\n\tCalculation.prototype.getVelocity = function() {\n\t\tvar me = this;\n\n\t\treturn 1000 * me.getProgress() / me.consumedTime;\n\t}\n\n\tCalculation.prototype.isComplete = function(vertices) {\n\t\tvar me = this;\n\n\t\treturn me.accumulateAngles(vertices || me.getGoals()) >= twicePI;\n\t};\n\n\tCalculation.prototype.hasVisited = function(location) {\n\t\tvar me = this,\n\t\t\tsameLocation = function(v) {\n\t\t\t\treturn GeoUtil.distance(v.endLocation, location) < 0.0005;\n\t\t\t};\n\t\t\t\n\t\t\treturn _.some(me.vertices.getArray(), sameLocation);\n\t};\n\n\tCalculation.prototype.accumulateAngles = function(vertices) {\n\t\tvar me = this,\n\t\t\tchecked = 0,\n\t\t\tdiff,\n\t\t\tangles = _.map(vertices, function(v) {\n\t\t\t\treturn GeoUtil.calcAngle(me.config.origin, v);\n\t\t\t});\n\t\t\t\n\t\treturn _.reduce(angles, function(passed, angle, idx, arr) {\n\t\t\treturn passed + (idx > 0? ((diff = angle - arr[idx - 1]) < -1 * Math.PI? (diff + twicePI): diff): 0);\n\t\t}, 0);\n\t};\n\n\treturn Calculation;\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/Calculation.js\n ** module id = 12\n ** module chunks = 1\n **/","define(function() {\n\tfunction Footprint(markerOptions) {\n\t\tvar me = this;\n\t\t\n\t\tgoogle.maps.Marker.constructor.call(me, markerOptions);\n\t\tme.angle = 90;\n\t\tme.stepCount = 0;\n\n\t\tme.timer = window.setInterval(function() {\n\t\t\tme.stepCount++;\n\t\t\tme.setIcon(me.createIconOption());\n\t\t}, 500);\n\t}\n\n\tFootprint.prototype = new google.maps.Marker();\n\n\tFootprint.prototype.stop = function() {\n\t\tvar me = this;\n\t\t\n\t\tme.setIcon(me.createIconOption(true));\n\t\twindow.clearInterval(me.timer);\n\t};\n\n\tFootprint.prototype.createIconOption = function(stop) {\n\t\tvar me = this;\n\t\t\n\t\treturn {\n\t\t\tpath: stop\n\t\t\t\t? [\n\t\t\t\t'M',\n\t\t\t\t'33.25',\n\t\t\t\t'16.025278207000508',\n\t\t\t\t'C',\n\t\t\t\t'32.0125',\n\t\t\t\t'16.01137519315023',\n\t\t\t\t'29.875',\n\t\t\t\t'17.125',\n\t\t\t\t'28.5',\n\t\t\t\t'18.5',\n\t\t\t\t'C',\n\t\t\t\t'26.944444444444443',\n\t\t\t\t'20.055555555555557',\n\t\t\t\t'26',\n\t\t\t\t'22.133333333333333',\n\t\t\t\t'26',\n\t\t\t\t'24',\n\t\t\t\t'C',\n\t\t\t\t'26',\n\t\t\t\t'25.65',\n\t\t\t\t'26.718232309083987',\n\t\t\t\t'29.1375',\n\t\t\t\t'27.59607179796442',\n\t\t\t\t'31.75',\n\t\t\t\t'C',\n\t\t\t\t'28.817051115483906',\n\t\t\t\t'35.38370354993694',\n\t\t\t\t'28.934556004964225',\n\t\t\t\t'37.02877200266145',\n\t\t\t\t'28.09607179796442',\n\t\t\t\t'38.75',\n\t\t\t\t'C',\n\t\t\t\t'27.49323230908399',\n\t\t\t\t'39.9875',\n\t\t\t\t'27',\n\t\t\t\t'41.9',\n\t\t\t\t'27',\n\t\t\t\t'43',\n\t\t\t\t'C',\n\t\t\t\t'27',\n\t\t\t\t'44.1',\n\t\t\t\t'27.9',\n\t\t\t\t'45.45',\n\t\t\t\t'29',\n\t\t\t\t'46',\n\t\t\t\t'C',\n\t\t\t\t'30.1',\n\t\t\t\t'46.55',\n\t\t\t\t'31.5625',\n\t\t\t\t'46.79335988647727',\n\t\t\t\t'32.25',\n\t\t\t\t'46.54079974772727',\n\t\t\t\t'C',\n\t\t\t\t'32.9375',\n\t\t\t\t'46.28823960897727',\n\t\t\t\t'34.244611443600775',\n\t\t\t\t'44.60073960897727',\n\t\t\t\t'35.154692096890614',\n\t\t\t\t'42.79079974772727',\n\t\t\t\t'C',\n\t\t\t\t'36.06477275018045',\n\t\t\t\t'40.98085988647727',\n\t\t\t\t'37.29976312969924',\n\t\t\t\t'37.7',\n\t\t\t\t'37.89911516248792',\n\t\t\t\t'35.5',\n\t\t\t\t'C',\n\t\t\t\t'38.49846719527659',\n\t\t\t\t'33.3',\n\t\t\t\t'39.006023382671565',\n\t\t\t\t'28.8',\n\t\t\t\t'39.02701780114341',\n\t\t\t\t'25.5',\n\t\t\t\t'C',\n\t\t\t\t'39.05552142071855',\n\t\t\t\t'21.019668967058752',\n\t\t\t\t'38.61369715435026',\n\t\t\t\t'19.063165635728122',\n\t\t\t\t'37.28259473554611',\n\t\t\t\t'17.775278207000508',\n\t\t\t\t'C',\n\t\t\t\t'36.30216763099575',\n\t\t\t\t'16.826681220850787',\n\t\t\t\t'34.4875',\n\t\t\t\t'16.039181220850786',\n\t\t\t\t'33.25',\n\t\t\t\t'16.025278207000508',\n\t\t\t\t'Z',\n\t\t\t\t'M',\n\t\t\t\t'15.25',\n\t\t\t\t'18.025278207000508',\n\t\t\t\t'C',\n\t\t\t\t'14.0125',\n\t\t\t\t'18.01137519315023',\n\t\t\t\t'12.029399448381973',\n\t\t\t\t'19.0125',\n\t\t\t\t'10.843109885293275',\n\t\t\t\t'20.25',\n\t\t\t\t'C',\n\t\t\t\t'9.06600455055934',\n\t\t\t\t'22.103820450048765',\n\t\t\t\t'8.782723188934392',\n\t\t\t\t'23.29235909990247',\n\t\t\t\t'9.234286149351865',\n\t\t\t\t'27',\n\t\t\t\t'C',\n\t\t\t\t'9.535722657672789',\n\t\t\t\t'29.475',\n\t\t\t\t'10.956323209290815',\n\t\t\t\t'34.0875',\n\t\t\t\t'12.39117626405859',\n\t\t\t\t'37.25',\n\t\t\t\t'C',\n\t\t\t\t'13.826029318826365',\n\t\t\t\t'40.4125',\n\t\t\t\t'16.0125',\n\t\t\t\t'43.697443923338966',\n\t\t\t\t'17.25',\n\t\t\t\t'44.54987538519771',\n\t\t\t\t'C',\n\t\t\t\t'18.4875',\n\t\t\t\t'45.402306847056444',\n\t\t\t\t'20.4',\n\t\t\t\t'45.96020979614915',\n\t\t\t\t'21.5',\n\t\t\t\t'45.789659716514834',\n\t\t\t\t'C',\n\t\t\t\t'22.773760289505443',\n\t\t\t\t'45.59216888123285',\n\t\t\t\t'23.610306095530625',\n\t\t\t\t'44.57547853664944',\n\t\t\t\t'23.803773241635348',\n\t\t\t\t'42.989784331317125',\n\t\t\t\t'C',\n\t\t\t\t'23.970848524534787',\n\t\t\t\t'41.62040294909271',\n\t\t\t\t'23.408348524534787',\n\t\t\t\t'39.0375',\n\t\t\t\t'22.553773241635348',\n\t\t\t\t'37.25',\n\t\t\t\t'C',\n\t\t\t\t'21.64498244521012',\n\t\t\t\t'35.34909836954499',\n\t\t\t\t'21.01353030910185',\n\t\t\t\t'31.40558005856733',\n\t\t\t\t'21.03259473554611',\n\t\t\t\t'27.75',\n\t\t\t\t'C',\n\t\t\t\t'21.057182515417388',\n\t\t\t\t'23.035323791686757',\n\t\t\t\t'20.6272918537451',\n\t\t\t\t'21.07631897554676',\n\t\t\t\t'19.28259473554611',\n\t\t\t\t'19.775278207000508',\n\t\t\t\t'C',\n\t\t\t\t'18.302167630995747',\n\t\t\t\t'18.826681220850787',\n\t\t\t\t'16.4875',\n\t\t\t\t'18.039181220850786',\n\t\t\t\t'15.25',\n\t\t\t\t'18.025278207000508',\n\t\t\t\t'Z',\n\t\t\t\t'' ].join(' '): me.stepCount % 2 === 0 ? [\n\t\t\t\t'M',\n\t\t\t\t'6.75',\n\t\t\t\t'0.9674052644538893',\n\t\t\t\t'C',\n\t\t\t\t'5.512499999999999',\n\t\t\t\t'0.9494781599035285',\n\t\t\t\t'3.7238751931502287',\n\t\t\t\t'1.7369781599035283',\n\t\t\t\t'2.7752782070005075',\n\t\t\t\t'2.7174052644538893',\n\t\t\t\t'C',\n\t\t\t\t'1.537811369197653',\n\t\t\t\t'3.996395232246864',\n\t\t\t\t'1.0449905640558672',\n\t\t\t\t'6.195073224589727',\n\t\t\t\t'1.0308551414032063',\n\t\t\t\t'10.5',\n\t\t\t\t'C',\n\t\t\t\t'1.0200194414744117',\n\t\t\t\t'13.8',\n\t\t\t\t'1.5015328047234089',\n\t\t\t\t'18.3',\n\t\t\t\t'2.1008848375120888',\n\t\t\t\t'20.5',\n\t\t\t\t'C',\n\t\t\t\t'2.7002368703007686',\n\t\t\t\t'22.7',\n\t\t\t\t'3.9352272498195546',\n\t\t\t\t'25.980859886477273',\n\t\t\t\t'4.84530790310939',\n\t\t\t\t'27.790799747727274',\n\t\t\t\t'C',\n\t\t\t\t'5.755388556399225',\n\t\t\t\t'29.600739608977275',\n\t\t\t\t'7.0625',\n\t\t\t\t'31.288239608977275',\n\t\t\t\t'7.75',\n\t\t\t\t'31.540799747727274',\n\t\t\t\t'C',\n\t\t\t\t'8.4375',\n\t\t\t\t'31.793359886477273',\n\t\t\t\t'9.9',\n\t\t\t\t'31.55',\n\t\t\t\t'11',\n\t\t\t\t'31',\n\t\t\t\t'C',\n\t\t\t\t'12.1',\n\t\t\t\t'30.45',\n\t\t\t\t'13',\n\t\t\t\t'29.1',\n\t\t\t\t'13',\n\t\t\t\t'28',\n\t\t\t\t'C',\n\t\t\t\t'13',\n\t\t\t\t'26.9',\n\t\t\t\t'12.50676769091601',\n\t\t\t\t'24.9875',\n\t\t\t\t'11.90392820203558',\n\t\t\t\t'23.75',\n\t\t\t\t'C',\n\t\t\t\t'11.065443995035771',\n\t\t\t\t'22.028772002661448',\n\t\t\t\t'11.182948884516094',\n\t\t\t\t'20.383703549936946',\n\t\t\t\t'12.40392820203558',\n\t\t\t\t'16.75',\n\t\t\t\t'C',\n\t\t\t\t'13.281767690916011',\n\t\t\t\t'14.1375',\n\t\t\t\t'14',\n\t\t\t\t'10.65',\n\t\t\t\t'14',\n\t\t\t\t'9',\n\t\t\t\t'C',\n\t\t\t\t'14',\n\t\t\t\t'7.133333333333333',\n\t\t\t\t'13.055555555555555',\n\t\t\t\t'5.055555555555555',\n\t\t\t\t'11.5',\n\t\t\t\t'3.5',\n\t\t\t\t'C',\n\t\t\t\t'10.125',\n\t\t\t\t'2.125',\n\t\t\t\t'7.987500000000001',\n\t\t\t\t'0.9853323690042503',\n\t\t\t\t'6.75',\n\t\t\t\t'0.9674052644538893',\n\t\t\t\t'Z',\n\t\t\t\t'M',\n\t\t\t\t'22.75',\n\t\t\t\t'18.967405264453888',\n\t\t\t\t'C',\n\t\t\t\t'21.5125',\n\t\t\t\t'18.949478159903528',\n\t\t\t\t'19.723875193150228',\n\t\t\t\t'19.73697815990353',\n\t\t\t\t'18.775278207000508',\n\t\t\t\t'20.717405264453888',\n\t\t\t\t'C',\n\t\t\t\t'17.523506201306184',\n\t\t\t\t'22.01118040924059',\n\t\t\t\t'17.043624674242828',\n\t\t\t\t'24.213862596654838',\n\t\t\t\t'17.025278207000508',\n\t\t\t\t'28.75',\n\t\t\t\t'C',\n\t\t\t\t'17.010964011861812',\n\t\t\t\t'32.289163976901435',\n\t\t\t\t'16.326076083975728',\n\t\t\t\t'36.409634732011256',\n\t\t\t\t'15.44622675836466',\n\t\t\t\t'38.25',\n\t\t\t\t'C',\n\t\t\t\t'14.591651475465222',\n\t\t\t\t'40.0375',\n\t\t\t\t'14.029151475465222',\n\t\t\t\t'42.62040294909271',\n\t\t\t\t'14.19622675836466',\n\t\t\t\t'43.989784331317125',\n\t\t\t\t'C',\n\t\t\t\t'14.389693904469379',\n\t\t\t\t'45.57547853664944',\n\t\t\t\t'15.226239710494553',\n\t\t\t\t'46.592168881232844',\n\t\t\t\t'16.5',\n\t\t\t\t'46.789659716514834',\n\t\t\t\t'C',\n\t\t\t\t'17.6',\n\t\t\t\t'46.960209796149144',\n\t\t\t\t'19.5125',\n\t\t\t\t'46.40230684705644',\n\t\t\t\t'20.75',\n\t\t\t\t'45.5498753851977',\n\t\t\t\t'C',\n\t\t\t\t'21.9875',\n\t\t\t\t'44.697443923338966',\n\t\t\t\t'24.173970681173635',\n\t\t\t\t'41.4125',\n\t\t\t\t'25.60882373594141',\n\t\t\t\t'38.25',\n\t\t\t\t'C',\n\t\t\t\t'27.043676790709185',\n\t\t\t\t'35.0875',\n\t\t\t\t'28.46427734232721',\n\t\t\t\t'30.475',\n\t\t\t\t'28.765713850648137',\n\t\t\t\t'28',\n\t\t\t\t'C',\n\t\t\t\t'29.21727681106561',\n\t\t\t\t'24.29235909990247',\n\t\t\t\t'28.933995449440662',\n\t\t\t\t'23.103820450048765',\n\t\t\t\t'27.156890114706727',\n\t\t\t\t'21.25',\n\t\t\t\t'C',\n\t\t\t\t'25.970600551618027',\n\t\t\t\t'20.0125',\n\t\t\t\t'23.9875',\n\t\t\t\t'18.98533236900425',\n\t\t\t\t'22.75',\n\t\t\t\t'18.967405264453888',\n\t\t\t\t'Z',\n\t\t\t\t''\n\t\t\t].join(' '): [\n\t\t\t\t'M',\n\t\t\t\t'23.25',\n\t\t\t\t'1.025278207000508',\n\t\t\t\t'C',\n\t\t\t\t'22.0125',\n\t\t\t\t'1.0113751931502286',\n\t\t\t\t'19.875',\n\t\t\t\t'2.125',\n\t\t\t\t'18.5',\n\t\t\t\t'3.5',\n\t\t\t\t'C',\n\t\t\t\t'16.944444444444443',\n\t\t\t\t'5.055555555555555',\n\t\t\t\t'16',\n\t\t\t\t'7.133333333333333',\n\t\t\t\t'16',\n\t\t\t\t'9',\n\t\t\t\t'C',\n\t\t\t\t'16',\n\t\t\t\t'10.65',\n\t\t\t\t'16.718232309083987',\n\t\t\t\t'14.1375',\n\t\t\t\t'17.59607179796442',\n\t\t\t\t'16.75',\n\t\t\t\t'C',\n\t\t\t\t'18.817051115483906',\n\t\t\t\t'20.383703549936943',\n\t\t\t\t'18.934556004964225',\n\t\t\t\t'22.028772002661448',\n\t\t\t\t'18.09607179796442',\n\t\t\t\t'23.75',\n\t\t\t\t'C',\n\t\t\t\t'17.49323230908399',\n\t\t\t\t'24.9875',\n\t\t\t\t'17',\n\t\t\t\t'26.9',\n\t\t\t\t'17',\n\t\t\t\t'28',\n\t\t\t\t'C',\n\t\t\t\t'17',\n\t\t\t\t'29.1',\n\t\t\t\t'17.9',\n\t\t\t\t'30.45',\n\t\t\t\t'19',\n\t\t\t\t'31',\n\t\t\t\t'C',\n\t\t\t\t'20.1',\n\t\t\t\t'31.55',\n\t\t\t\t'21.5625',\n\t\t\t\t'31.793359886477273',\n\t\t\t\t'22.25',\n\t\t\t\t'31.54079974772727',\n\t\t\t\t'C',\n\t\t\t\t'22.9375',\n\t\t\t\t'31.288239608977268',\n\t\t\t\t'24.244611443600775',\n\t\t\t\t'29.600739608977268',\n\t\t\t\t'25.154692096890614',\n\t\t\t\t'27.79079974772727',\n\t\t\t\t'C',\n\t\t\t\t'26.06477275018045',\n\t\t\t\t'25.980859886477273',\n\t\t\t\t'27.299763129699233',\n\t\t\t\t'22.7',\n\t\t\t\t'27.89911516248791',\n\t\t\t\t'20.5',\n\t\t\t\t'C',\n\t\t\t\t'28.49846719527659',\n\t\t\t\t'18.3',\n\t\t\t\t'29.006023382671565',\n\t\t\t\t'13.8',\n\t\t\t\t'29.02701780114341',\n\t\t\t\t'10.5',\n\t\t\t\t'C',\n\t\t\t\t'29.05552142071855',\n\t\t\t\t'6.019668967058752',\n\t\t\t\t'28.613697154350263',\n\t\t\t\t'4.063165635728123',\n\t\t\t\t'27.28259473554611',\n\t\t\t\t'2.7752782070005075',\n\t\t\t\t'C',\n\t\t\t\t'26.302167630995747',\n\t\t\t\t'1.8266812208507872',\n\t\t\t\t'24.4875',\n\t\t\t\t'1.0391812208507871',\n\t\t\t\t'23.25',\n\t\t\t\t'1.025278207000508',\n\t\t\t\t'Z',\n\t\t\t\t'M',\n\t\t\t\t'7.25',\n\t\t\t\t'19.025278207000508',\n\t\t\t\t'C',\n\t\t\t\t'6.012499999999999',\n\t\t\t\t'19.01137519315023',\n\t\t\t\t'4.029399448381974',\n\t\t\t\t'20.0125',\n\t\t\t\t'2.843109885293275',\n\t\t\t\t'21.25',\n\t\t\t\t'C',\n\t\t\t\t'1.066004550559339',\n\t\t\t\t'23.103820450048765',\n\t\t\t\t'0.782723188934392',\n\t\t\t\t'24.29235909990247',\n\t\t\t\t'1.234286149351865',\n\t\t\t\t'28',\n\t\t\t\t'C',\n\t\t\t\t'1.535722657672788',\n\t\t\t\t'30.475',\n\t\t\t\t'2.9563232092908143',\n\t\t\t\t'35.0875',\n\t\t\t\t'4.39117626405859',\n\t\t\t\t'38.25',\n\t\t\t\t'C',\n\t\t\t\t'5.826029318826366',\n\t\t\t\t'41.4125',\n\t\t\t\t'8.0125',\n\t\t\t\t'44.697443923338966',\n\t\t\t\t'9.25',\n\t\t\t\t'45.54987538519771',\n\t\t\t\t'C',\n\t\t\t\t'10.4875',\n\t\t\t\t'46.402306847056444',\n\t\t\t\t'12.4',\n\t\t\t\t'46.96020979614915',\n\t\t\t\t'13.5',\n\t\t\t\t'46.789659716514834',\n\t\t\t\t'C',\n\t\t\t\t'14.773760289505443',\n\t\t\t\t'46.59216888123285',\n\t\t\t\t'15.610306095530625',\n\t\t\t\t'45.57547853664944',\n\t\t\t\t'15.803773241635348',\n\t\t\t\t'43.989784331317125',\n\t\t\t\t'C',\n\t\t\t\t'15.970848524534787',\n\t\t\t\t'42.62040294909271',\n\t\t\t\t'15.408348524534787',\n\t\t\t\t'40.0375',\n\t\t\t\t'14.553773241635348',\n\t\t\t\t'38.25',\n\t\t\t\t'C',\n\t\t\t\t'13.644982445210116',\n\t\t\t\t'36.34909836954499',\n\t\t\t\t'13.013530309101847',\n\t\t\t\t'32.40558005856733',\n\t\t\t\t'13.032594735546109',\n\t\t\t\t'28.75',\n\t\t\t\t'C',\n\t\t\t\t'13.057182515417391',\n\t\t\t\t'24.03532379168675',\n\t\t\t\t'12.6272918537451',\n\t\t\t\t'22.07631897554676',\n\t\t\t\t'11.282594735546109',\n\t\t\t\t'20.775278207000508',\n\t\t\t\t'C',\n\t\t\t\t'10.302167630995749',\n\t\t\t\t'19.826681220850787',\n\t\t\t\t'8.4875',\n\t\t\t\t'19.039181220850786',\n\t\t\t\t'7.25',\n\t\t\t\t'19.025278207000508',\n\t\t\t\t'Z',\n\t\t\t\t''\n\t\t\t].join(' '),\n\t\t\tfillColor: '#233f5b',\n\t\t\tfillOpacity: 1,\n\t\t\tstrokeWeight: 0,\n\t\t\trotation: me.angle,\n\t\t\tscale: 1,\n\t\t\tanchor: new google.maps.Point(15, 24)\n\t\t};\n\t};\n\n\tFootprint.prototype.setAngle = function(angle) { this.angle = angle; };\n\n\treturn Footprint;\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/Footprint.js\n ** module id = 13\n ** module chunks = 1\n **/","define([\r\n], function() {\r\n\t'use strict';\r\n\r\n\tfunction OM(map) {\r\n\t\tvar me = this;\r\n\r\n\t\tgoogle.maps.MVCArray.constructor.call(me);\r\n\t\tme.map = map;\r\n\t\tme.addListener('remove_at', function(idx, elem) {\r\n\t\t\tif (elem[0].setMap) {\r\n\t\t\t\telem[0].setMap(null);\r\n\t\t\t} else if (elem.close) {\r\n\t\t\t\telem[0].close();\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error('cannot destroy item', elem);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tme.addListener('insert_at', function(idx) {\r\n\t\t\tvar elem = me.getArray()[idx],\r\n\t\t\t\tobj = elem[0],\r\n\t\t\t\tcls = elem[1],\r\n\t\t\t\tid = elem[2],\r\n\t\t\t\tmarker;\r\n\r\n\t\t\tif (obj.open) {\r\n\t\t\t\tobj.open(me.map);\r\n\t\t\t} else {\r\n\t\t\t\tobj.setMap(me.map);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tOM.prototype = new google.maps.MVCArray();\r\n\r\n\tOM.prototype.clearObject = function(id) {\r\n\t\tvar me = this;\r\n\r\n\t\tif (!id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tme.forEach(function(elem, idx) {\r\n\t\t\tif (elem[2] === id) {\r\n\t\t\t\tme.removeAt(idx);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tOM.prototype.clearObjects = function(taggedAs) {\r\n\t\tvar me = this,\r\n\t\t\ttoRemove = [];\r\n\t\t\r\n\t\tme.forEach(function(elem, idx) {\r\n\t\t\tif (elem && (taggedAs === undefined || elem[1] === taggedAs)) {\r\n\t\t\t\ttoRemove.push(idx);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfor (var i = toRemove.length; i > 0; --i) {\r\n\t\t\tme.removeAt(i - 1) ;\r\n\t\t}\r\n\t};\r\n\r\n\tOM.prototype.findObject = function(id) {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\treturn me.getArray().filter(function(elem) {\r\n\t\t\treturn elem[2] === id;\r\n\t\t}).pop();\r\n\t};\r\n\r\n\tOM.prototype.showObject = function(obj, cls, id) {\r\n\t\tvar me = this;\r\n\t\t\r\n\t\tme.clearObject(id);\r\n\t\tme.push([ obj, cls, id ]);\r\n\t\treturn obj;\r\n\t};\r\n\r\n\treturn OM;\r\n});\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/ObjectManager.js\n ** module id = 14\n ** module chunks = 1\n **/","define([ 'resources/js/dev/GeoUtil.js',\n\t'resources/js/dev/Walk30mUtils.js'\n], function(GeoUtil, Walk30mUtils) {\n\n\tfunction ResultVisualizer(application, map, objectManager) {\n\t\tvar me = this,\n\t\t\tdefaultStyler = map.data.getStyle();\n\n\t\tme.application = application;\n\t\tme.map = map;\n\t\tme.objectManager = objectManager;\n\t\tme.twitterURITpl = _.template('https://twitter.com/intent/tweet?text={{message}}&url={{url}}&hashtags=walk30m');\n\t\tme.routeLinkTpl = _.template('https://www.google.co.jp/maps/dir/{{originLat}},{{originLng}}/{{destLat}},{{destLng}}');\n\t\tme.balloonTpl = _.template(application.getMessage('routeDetailBalloonTpl'));\n\t\tme.summaryBalloonTpl = _.template(application.getMessage('resultSummaryBalloonTpl'));\n\n\t\tme.map.data.addListener('click', _.bind(me.onClickResult, me));\n\n\t\tme.map.data.setStyle(function(feature) {\n\t\t\tif (feature.getProperty('isResult') === true) {\n\t\t\t\treturn {\n\t\t\t\t\tstrokeColor: '#4a4',\n\t\t\t\t\tfillColor: '#4a4',\n\t\t\t\t\tstrokeOpacity: 1,\n\t\t\t\t\tfillOpacity: 0.3\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn _.isObject(defaultStyler)\n\t\t\t\t\t? defaultStyler\n\t\t\t\t\t: _.isFunction(defaultStyler)\n\t\t\t\t\t\t? defaultStyler(feature)\n\t\t\t\t\t\t: {};\n\t\t\t}\n\t\t});\n\t}\n\n\tResultVisualizer.prototype.createRouteLink = function(route) { \n\t\tvar me = this,\n\t\t\tpath = route.overview_path;\n\n\t\treturn me.routeLinkTpl({\n\t\t\toriginLat: path[0].lat(),\n\t\t\toriginLng: path[0].lng(),\n\t\t\tdestLat: route.overview_path[path.length - 1].lat(),\n\t\t\tdestLng: path[path.length - 1].lng(),\n\t\t});\n\t};\n\n\tResultVisualizer.prototype.createBalloonContent = function(directionResult) {\n\t\tvar me = this,\n\t\t\troute = directionResult.routes[0],\n\t\t\tcontent = me.balloonTpl({\n\t\t\t\tdest: GeoUtil.trimGeocoderAddress(route.legs[0].end_address),\n\t\t\t\ttime: route.legs[0].duration.text,\n\t\t\t\turl: me.createRouteLink(route),\n\t\t\t\tsummary: route.summary,\n\t\t\t\tcopyright: route.copyrights\n\t\t\t});\n\n\t\treturn content;\n\t};\n\n\tResultVisualizer.prototype.clearResultDetail = function() {\n\t\tvar me = this;\n\n\t\tme.objectManager.clearObject('routeBalloon');\n\t\tme.objectManager.clearObjects('route');\n\t};\n\n\tResultVisualizer.prototype.showResultDetail = function(feature) {\n\t\tvar me = this,\n\t\t\tcls = 'route';\n\t\t\n\t\tfeature.getProperty('vertices').forEach(function(vertex) {\n\t\t\tvar route = vertex.directionResult.routes[0].overview_path,\n\t\t\t\tendPoint = me.objectManager.showObject(new google.maps.Marker({\n\t\t\t\t\tposition: route[route.length - 1],\n\t\t\t\t\ticon: {\n\t\t\t\t\t\tpath: google.maps.SymbolPath.CIRCLE,\n\t\t\t\t\t\tscale: 6,\n\t\t\t\t\t\tstrokeColor: '#4a4',\n\t\t\t\t\t\tstrokeWeight: 3\n\t\t\t\t\t}\n\t\t\t\t}), cls),\n\t\t\t\tpath = me.objectManager.showObject(new google.maps.Polyline({\n\t\t\t\t\tpath: route,\n\t\t\t\t\tclickable: false,\n\t\t\t\t\tstrokeColor: '#4a4',\n\t\t\t\t\tstrokeWeight: 3,\n\t\t\t\t\tstrokeOpacity: 1\n\t\t\t\t}), cls);\n\n\t\t\tfunction onClickRoute(event) {\n\t\t\t\tme.objectManager.clearObject('routeBalloon');\n\t\t\t\tme.objectManager.showObject(new google.maps.InfoWindow({\n\t\t\t\t\tposition: event.latLng,\n\t\t\t\t\tcontent: me.createBalloonContent(vertex.directionResult),\n\t\t\t\t\tmaxWidth: 320\n\t\t\t\t}), null, 'routeBalloon');\n\t\t\t}\n\n\t\t\tendPoint.addListener('click', onClickRoute);\n\t\t});\n\t};\n\n\tResultVisualizer.prototype.createSummary = function(feature) {\n\t\tvar me = this,\n\t\t\toptions = feature.getProperty('options');\n\n\t\treturn me.summaryBalloonTpl(Walk30mUtils.createSummary(_.defaults({\n\t\t\ttimeUnitMinExpr: me.application.getMessage('timeUnitMinExpr')\n\t\t}, options)));\n\t};\n\n\tResultVisualizer.prototype.showSummaryBalloon = function(feature) {\n\t\tvar me = this,\n\t\t\t__ = _.bind(me.application.getMessage, me.application)\n\t\t\t$balloon = $(me.map.getDiv()).find('.gm-style-iw'),\n\t\t\toptions = feature.getProperty('options'),\n\t\t\tsummary = Walk30mUtils.createSummary(_.defaults({\n\t\t\t\ttravelModeExpr: __('travelModes')[options.mode],\n\t\t\t\ttimeUnitMinExpr: __('timeUnitMinExpr')\n\t\t\t}, options));\n\n\t\tme.objectManager.showObject(new google.maps.InfoWindow({\n\t\t\tposition: options.origin,\n\t\t\tcontent: me.createSummary(feature),\n\t\t\tmaxWidth: 320\n\t\t}), null, 'summaryBalloon');\n\n\t\t$balloon.find('a[role=tweet-result]').click(function() {\n\t\t\tvar url = me.twitterURITpl({\n\t\t\t\turl: window.encodeURIComponent(Walk30mUtils.createSharedURI(feature)),\n\t\t\t\tmessage: window.encodeURIComponent(_.template(__('tweetMessageTpl'))(summary))\n\t\t\t});\n\n\t\t\twindow.open(url, '_blank');\n\t\t});\n\t\t$balloon.find('a[role=report-problem]').click(function() {\n\t\t\tme.application.startEditMessage(_.template(__('reportMessageTpl'))({\n\t\t\t\tid: feature.getId(),\n\t\t\t\tsummary: _.template(__('summaryTpl'))(summary)\n\t\t\t}));\n\t\t});\n\t\t$balloon.find('a[role=erase-result]').click(function() {\n\t\t\tme.map.data.remove(feature);\n\t\t\tme.objectManager.clearObject('summaryBalloon');\n\t\t});\n\t\t$balloon.find('a[role=show-routes]').click(function() {\n\t\t\tme.objectManager.clearObject('summaryBalloon');\n\t\t\tfeature.setProperty('detailed', true);\n\t\t\tme.showResultDetail(feature);\n\t\t});\n\t};\n\n\tResultVisualizer.prototype.onClickResult = function(event) {\n\t\tvar me = this;\n\t\t\n\t\tme.clearResultDetail();\n\n\t\tif (event.feature.getProperty('detailed')) {\n\t\t\tevent.feature.setProperty('detailed', false);\n\t\t}\n\t\tme.showSummaryBalloon(event.feature);\n\t};\n\n\tResultVisualizer.prototype.addResult = function(result) {\n\t\tvar me = this,\n\t\t\tvertices = _.collect(result.vertices, 'endLocation'),\n\t\t\ttoSpline = vertices.concat(vertices.slice(0).splice(0, Math.round(vertices.length / 2))),\n\t\t\ttoGeoJsonCoord = function(coord) {\n\t\t\t\treturn [ coord.lng(), coord.lat() ];\n\t\t\t},\n\t\t\tsplined = GeoUtil.spline(toSpline);\n\t\t\n\t\tsplined = splined.slice(0, Math.round(splined.length * 2 / 3) - 2);\n\n\t\tme.map.data.addGeoJson({\n\t\t\ttype: 'Feature',\n\t\t\tid: result.taskId,\n\t\t\tgeometry: {\n\t\t\t\ttype: 'Polygon',\n\t\t\t\tcoordinates: [\n\t\t\t\t\tsplined.concat([ splined[0] ]).map(toGeoJsonCoord)\n\t\t\t\t]\n\t\t\t},\n\t\t\tproperties: _.defaults({\n\t\t\t\tisResult: true,\n\t\t\t\tvertices: result.vertices.slice(0)\n\t\t\t}, result)\n\t\t});\n\t};\n\n\treturn ResultVisualizer;\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/ResultVisualizer.js\n ** module id = 15\n ** module chunks = 1\n **/","define([\n], function() {\n\t'use strict';\n\n\tvar Walk30mUtils = {};\n\n\tWalk30mUtils.createSummary = function(options) {\n\t\treturn _.defaults({\n\t\t\toriginAddress: options.address,\n\t\t\ttimeExpr: (options.time / 60) + options.timeUnitMinExpr\n\t\t}, options);\n\t};\n\n\tWalk30mUtils.encodeResult = function(coords) {\n\t\tvar diffSequence = coords.reduce(function(passed, elem) {\n\t\t\treturn [\n\t\t\t\telem,\n\t\t\t\tpassed[1].concat([[\n\t\t\t\t\tMath.round(1000000 * (elem.lng - (passed[0] === null? 0: passed[0].lng))),\n\t\t\t\t\tMath.round(1000000 * (elem.lat - (passed[0] === null? 0: passed[0].lat)))\n\t\t\t\t]])\n\t\t\t];\n\t\t}, [ null, [] ])[1];\n\n\t\treturn diffSequence.map(function(s) {\n\t\t\treturn [\n\t\t\t\ts[0].toString(36),\n\t\t\t\ts[1].toString(36)\n\t\t\t].join(' ');\n\t\t}).join(',')\n\t\t\t.replace(/,/g, ' ')\n\t\t\t.replace(/\\s/g, '+')\n\t\t\t.replace(/\\+\\-/g, '-');\n\t};\n\n\tWalk30mUtils.decodeResult = function(str) {\n\t\tvar charSeq = str\n\t\t\t.replace(/\\+/g, ' ')\n\t\t\t.replace(/\\-/g, ' -')\n\t\t\t.split(' ')\n\t\t\t.reduce(function(passed, elem) {\n\t\t\t\treturn [\n\t\t\t\t\tpassed[0] === null? elem: null,\n\t\t\t\t\tpassed[0] === null? passed[1]: passed[1].concat([[ passed[0], elem ]])\n\t\t\t\t]\n\t\t\t}, [ null, [] ])[1];\n\t\t\n\t\treturn charSeq.reduce(function(passed, elem) {\n\t\t\tvar x = parseInt(elem[0], 36) / 1000000,\n\t\t\t\ty = parseInt(elem[1], 36) / 1000000;\n\t\t\t\t\n\t\t\treturn [\n\t\t\t\t[ x, y ],\n\t\t\t\tpassed\n\t\t\t\t\t? passed[1].concat([ { lat: passed[0][1] + y, lng: passed[0][0] + x } ])\n\t\t\t\t\t: [ { lat: y, lng: x } ]\n\t\t\t];\n\t\t}, null)[1];\n\t};\n\n\tWalk30mUtils.createSharedURI = function(feature) {\n\t\treturn _.template('https://walk30m.com?path={{path}}')({\n\t\t\tpath: Walk30mUtils.encodeResult(_.collect(feature.getProperty('vertices'), 'endLocation').map(function(latLng) {\n\t\t\t\treturn { lat: latLng.lat(), lng: latLng.lng() };\n\t\t\t}))\n\t\t});\n\t};\n\n\treturn Walk30mUtils;\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./resources/js/dev/Walk30mUtils.js\n ** module id = 16\n ** module chunks = 1\n **/"],"sourceRoot":""}